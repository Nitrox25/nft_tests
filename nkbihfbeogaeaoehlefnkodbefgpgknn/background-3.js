LavaPack.loadBundle([[286,{"./constants":285,buffer:2065,multibase:282,varint:3380,"web-encoding":3384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{Buffer:n}=e("buffer"),s=e("multibase"),i=e("varint"),{names:o}=e("./constants"),{TextDecoder:a}=e("web-encoding"),c=new a,u={};for(const e in o)u[o[e]]=e;function h(e){r.decode(e)}r.names=o,r.codes=Object.freeze(u),r.toHexString=function(e){if(!(e instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return(n.isBuffer(e)?e:n.from(e.buffer,e.byteOffset,e.byteLength)).toString("hex")},r.fromHexString=function(e){return n.from(e,"hex")},r.toB58String=function(e){if(!(e instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return c.decode(s.encode("base58btc",e)).slice(1)},r.fromB58String=function(e){const t=e instanceof Uint8Array?c.decode(e):e;return s.decode("z"+t)},r.decode=function(e){if(!(e instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");let t=n.isBuffer(e)?e:n.from(e.buffer,e.byteOffset,e.byteLength);if(t.length<2)throw new Error("multihash too short. must be > 2 bytes.");const s=i.decode(t);if(!r.isValidCode(s))throw new Error(`multihash unknown function code: 0x${s.toString(16)}`);t=t.slice(i.decode.bytes);const o=i.decode(t);if(o<0)throw new Error(`multihash invalid length: ${o}`);if(t=t.slice(i.decode.bytes),t.length!==o)throw new Error(`multihash length inconsistent: 0x${t.toString("hex")}`);return{code:s,name:u[s],length:o,digest:t}},r.encode=function(e,t,s){if(!e||t===undefined)throw new Error("multihash encode requires at least two args: digest, code");const o=r.coerceCode(t);if(!(e instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(null==s&&(s=e.length),s&&e.length!==s)throw new Error("digest length should be equal to specified length.");const a=i.encode(o),c=i.encode(s),u=n.alloc(a.length+c.length+e.length);return u.set(a,0),u.set(c,a.length),u.set(e,a.length+c.length),u},r.coerceCode=function(e){let t=e;if("string"==typeof e){if(o[e]===undefined)throw new Error(`Unrecognized hash function named: ${e}`);t=o[e]}if("number"!=typeof t)throw new Error(`Hash function code should be a number. Got: ${t}`);if(u[t]===undefined&&!r.isAppCode(t))throw new Error(`Unrecognized function code: ${t}`);return t},r.isAppCode=function(e){return e>0&&e<16},r.isValidCode=function(e){return!!r.isAppCode(e)||!!u[e]},r.validate=h,r.prefix=function(e){return h(e),n.from(e.buffer,e.byteOffset,2)}}}},{package:"@ensdomains/content-hash>multihashes",file:"node_modules/@ensdomains/content-hash/node_modules/multihashes/src/index.js"}],[287,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}}}},{package:"@ensdomains/content-hash>multicodec>uint8arrays",file:"node_modules/@ensdomains/content-hash/node_modules/uint8arrays/concat.js"}],[288,{"multibase/src/constants":266,"web-encoding":3384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{names:n}=e("multibase/src/constants"),{TextEncoder:s}=e("web-encoding"),i=new s;t.exports=function(e,t="utf8"){if("utf8"===t||"utf-8"===t)return i.encode(e);if("ascii"===t)return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(e);const r=n[t];if(!r)throw new Error("Unknown base");return r.decode(e)}}}},{package:"@ensdomains/content-hash>multicodec>uint8arrays",file:"node_modules/@ensdomains/content-hash/node_modules/uint8arrays/from-string.js"}],[289,{"multibase/src/constants":266,"web-encoding":3384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{names:n}=e("multibase/src/constants"),{TextDecoder:s}=e("web-encoding"),i=new s("utf8");t.exports=function(e,t="utf8"){if("utf8"===t||"utf-8"===t)return i.decode(e);if("ascii"===t)return function(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}(e);const r=n[t];if(!r)throw new Error("Unknown base");return r.encode(e)}}}},{package:"@ensdomains/content-hash>multicodec>uint8arrays",file:"node_modules/@ensdomains/content-hash/node_modules/uint8arrays/to-string.js"}],[29,{"../../../shared/constants/common":3411,"../../../shared/constants/gas":3412,"../../../shared/constants/network":3417,"../../../shared/constants/smartTransactions":3420,"../../../shared/constants/swaps":3421,"../../../shared/constants/time":3424,"../../../shared/lib/fetch-with-cache":3428,"../../../shared/lib/swaps-utils":3431,"../../../shared/lib/transactions-controller-utils":3434,"../../../shared/modules/Numeric":3436,"../../../shared/modules/conversion.utils":3440,"../../../shared/modules/string-utils":3451,"../../../shared/modules/swaps.utils":3452,"../../../ui/helpers/utils/optimism/fetchEstimatedL1Fee":4131,"@ethersproject/contracts":423,"@ethersproject/providers":462,"@metamask/obs-store":1301,"bignumber.js":1975,"human-standard-token-abi":2709,lodash:2954,loglevel:2966},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.utils=r.default=void 0;var n=e("@ethersproject/providers"),s=e("@ethersproject/contracts"),i=S(e("loglevel")),o=S(e("bignumber.js")),a=e("@metamask/obs-store"),c=e("lodash"),u=S(e("human-standard-token-abi")),h=e("../../../shared/modules/conversion.utils"),d=e("../../../shared/constants/swaps"),l=e("../../../shared/constants/gas"),p=e("../../../shared/constants/network"),f=e("../../../shared/constants/smartTransactions"),g=e("../../../shared/modules/swaps.utils"),y=e("../../../shared/lib/swaps-utils"),m=S(e("../../../shared/lib/fetch-with-cache")),b=e("../../../shared/constants/time"),T=e("../../../shared/modules/string-utils"),w=e("../../../shared/lib/transactions-controller-utils"),v=S(e("../../../ui/helpers/utils/optimism/fetchEstimatedL1Fee")),k=e("../../../shared/modules/Numeric"),_=e("../../../shared/constants/common");function S(e){return e&&e.__esModule?e:{default:e}}const E=25e5,x=b.MINUTE;function I(e=E,t=0,r=0){const n=new o.default(e,10).minus(t,10);return!n.lt(0)&&n.lt(r,16)?`0x${n.toString(16)}`:r}const P={quotes:{},quotesPollingLimitEnabled:!1,fetchParams:null,tokens:null,tradeTxId:null,approveTxId:null,quotesLastFetched:null,customMaxGas:"",customGasPrice:null,customMaxFeePerGas:null,customMaxPriorityFeePerGas:null,swapsUserFeeLevel:"",selectedAggId:null,customApproveTxData:"",errorKey:"",topAggId:null,routeState:"",swapsFeatureIsLive:!0,saveFetchedQuotes:!1,swapsQuoteRefreshTime:x,swapsQuotePrefetchingRefreshTime:x,swapsStxBatchStatusRefreshTime:f.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxGetTransactionsRefreshTime:f.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxMaxFeeMultiplier:f.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER,swapsFeatureFlags:{}};function A(e){if(!Array.isArray(e)||0===e.length)throw new Error("Expected non-empty array param.");const t=[...e];if(t.sort(((e,t)=>{const r=new o.default(e.overallValueOfQuote,10),n=new o.default(t.overallValueOfQuote,10);return r.equals(n)?0:r.lessThan(n)?-1:1})),t.length%2==1){const e=t[(t.length-1)/2].overallValueOfQuote;return C(t.filter((t=>e===t.overallValueOfQuote)))}const r=t.length/2,n=r-1,s=t[r].overallValueOfQuote,i=t[n].overallValueOfQuote,a=t.filter((e=>s===e.overallValueOfQuote)),c=t.filter((e=>i===e.overallValueOfQuote)),u=C(a),h=C(c);return{ethFee:new o.default(u.ethFee,10).plus(h.ethFee,10).dividedBy(2).toString(10),metaMaskFeeInEth:new o.default(u.metaMaskFeeInEth,10).plus(h.metaMaskFeeInEth,10).dividedBy(2).toString(10),ethValueOfTokens:new o.default(u.ethValueOfTokens,10).plus(h.ethValueOfTokens,10).dividedBy(2).toString(10)}}function C(e){const t=e.reduce(((e,t)=>({ethFee:e.ethFee.plus(t.ethFee,10),metaMaskFeeInEth:e.metaMaskFeeInEth.plus(t.metaMaskFeeInEth,10),ethValueOfTokens:e.ethValueOfTokens.plus(t.ethValueOfTokens,10)})),{ethFee:new o.default(0,10),metaMaskFeeInEth:new o.default(0,10),ethValueOfTokens:new o.default(0,10)});return{ethFee:t.ethFee.div(e.length,10).toString(10),metaMaskFeeInEth:t.metaMaskFeeInEth.div(e.length,10).toString(10),ethValueOfTokens:t.ethValueOfTokens.div(e.length,10).toString(10)}}r.default=class{constructor({getBufferedGasLimit:e,networkController:t,provider:r,getProviderConfig:s,getTokenRatesState:i,fetchTradesInfo:o=y.fetchTradesInfo,getCurrentChainId:c,getEIP1559GasFeeEstimates:u,onNetworkStateChange:h}){this.store=new a.ObservableStore({swapsState:{...P}}),this.resetState=()=>{this.store.updateState({swapsState:{...P}})},this._fetchTradesInfo=o,this._getCurrentChainId=c,this._getEIP1559GasFeeEstimates=u,this.getBufferedGasLimit=e,this.getTokenRatesState=i,this.pollCount=0,this.getProviderConfig=s,this.indexOfNewestCallInFlight=0,this.ethersProvider=new n.Web3Provider(r),this._currentNetworkId=t.store.getState().networkId,h((()=>{const{networkId:e,networkStatus:s}=t.store.getState();s===p.NetworkStatus.Available&&e!==this._currentNetworkId&&(this._currentNetworkId=e,this.ethersProvider=new n.Web3Provider(r))}))}async fetchSwapsNetworkConfig(e){const t=await(0,m.default)((0,y.getBaseApi)("network",e),{method:"GET"},{cacheRefreshTime:6e5}),{refreshRates:r,parameters:n={}}=t||{};if(!r||"number"!=typeof r.quotes||"number"!=typeof r.quotesPrefetching)throw new Error(`MetaMask - invalid response for refreshRates: ${t}`);return{quotes:1e3*r.quotes,quotesPrefetching:1e3*r.quotesPrefetching,stxGetTransactions:1e3*r.stxGetTransactions,stxBatchStatus:1e3*r.stxBatchStatus,stxStatusDeadline:r.stxStatusDeadline,stxMaxFeeMultiplier:n.stxMaxFeeMultiplier}}async _setSwapsNetworkConfig(){var e,t,r,n,s,i;const o=this._getCurrentChainId();let a;try{a=await this.fetchSwapsNetworkConfig(o)}catch(e){console.error("Request for Swaps network config failed: ",e)}const{swapsState:c}=this.store.getState();this.store.updateState({swapsState:{...c,swapsQuoteRefreshTime:(null===(e=a)||void 0===e?void 0:e.quotes)||x,swapsQuotePrefetchingRefreshTime:(null===(t=a)||void 0===t?void 0:t.quotesPrefetching)||x,swapsStxGetTransactionsRefreshTime:(null===(r=a)||void 0===r?void 0:r.stxGetTransactions)||f.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxBatchStatusRefreshTime:(null===(n=a)||void 0===n?void 0:n.stxBatchStatus)||f.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxStatusDeadline:(null===(s=a)||void 0===s?void 0:s.stxStatusDeadline)||f.FALLBACK_SMART_TRANSACTIONS_DEADLINE,swapsStxMaxFeeMultiplier:(null===(i=a)||void 0===i?void 0:i.stxMaxFeeMultiplier)||f.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER}})}pollForNewQuotes(){const{swapsState:{swapsQuoteRefreshTime:e,swapsQuotePrefetchingRefreshTime:t,quotesPollingLimitEnabled:r}}=this.store.getState(),n=r?e:t;this.pollingTimeout=setTimeout((()=>{var e;const{swapsState:t}=this.store.getState();this.fetchAndSetQuotes(t.fetchParams,null===(e=t.fetchParams)||void 0===e?void 0:e.metaData,!0)}),n)}stopPollingForQuotes(){this.pollingTimeout&&clearTimeout(this.pollingTimeout)}async fetchAndSetQuotes(e,t={},r){const{chainId:n}=t,{swapsState:{quotesPollingLimitEnabled:s,saveFetchedQuotes:i}}=this.store.getState();if(!e)return null;r||(this.pollCount=0),clearTimeout(this.pollingTimeout),r||this.setSwapsErrorKey("");const o=this.indexOfNewestCallInFlight+1;this.indexOfNewestCallInFlight=o,i||this.setSaveFetchedQuotes(!0);let[a]=await Promise.all([this._fetchTradesInfo(e,{...t}),this._setSwapsNetworkConfig()]);const{swapsState:{saveFetchedQuotes:u}}=this.store.getState();if(!u)return[{},null];a=(0,c.mapValues)(a,(e=>({...e,sourceTokenInfo:t.sourceTokenInfo,destinationTokenInfo:t.destinationTokenInfo}))),n===p.CHAIN_IDS.OPTIMISM&&Object.values(a).length>0&&await Promise.all(Object.values(a).map((async e=>{if(e.trade){const t=await(0,v.default)(n,{txParams:e.trade,chainId:n},this.ethersProvider);e.multiLayerL1TradeFeeTotal=t}return e})));const h=Date.now();let l=!1;if(!(0,g.isSwapsDefaultTokenAddress)(e.sourceToken,n)&&Object.values(a).length){const t=await this._getERC20Allowance(e.sourceToken,e.fromAddress,n),[s]=Object.values(a);if(l=s.approvalNeeded&&t.eq(0)&&"wrappedNative"!==s.aggregator,l){if(!r){const{gasLimit:e}=await this.timedoutGasReturn(s.approvalNeeded);a=(0,c.mapValues)(a,(t=>({...t,approvalNeeded:{...t.approvalNeeded,gas:e||d.DEFAULT_ERC20_APPROVE_GAS}})))}}else a=(0,c.mapValues)(a,(e=>({...e,approvalNeeded:null})))}let f=null;if(l||null!=e&&e.balanceError||(a=await this.getAllQuotesWithGasEstimates(a)),0===Object.values(a).length)this.setSwapsErrorKey(d.QUOTES_NOT_AVAILABLE_ERROR);else{const[e,t]=await this._findTopQuoteAndCalculateSavings(a);f=e,a=t}if(this.indexOfNewestCallInFlight!==o)throw new Error(d.SWAPS_FETCH_ORDER_CONFLICT);const{swapsState:y}=this.store.getState();let{selectedAggId:m}=y;return a[m]||(m=null),this.store.updateState({swapsState:{...y,quotes:a,fetchParams:{...e,metaData:t},quotesLastFetched:h,selectedAggId:m,topAggId:f}}),s&&(this.pollCount+=1),!s||this.pollCount<4?(this.pollForNewQuotes(),[a,f]):(this.resetPostFetchState(),this.setSwapsErrorKey(d.QUOTES_EXPIRED_ERROR),null)}safeRefetchQuotes(){const{swapsState:e}=this.store.getState();!this.pollingTimeout&&e.fetchParams&&this.fetchAndSetQuotes(e.fetchParams)}setSelectedQuoteAggId(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,selectedAggId:e}})}setSwapsTokens(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,tokens:e}})}clearSwapsQuotes(){const{swapsState:e}=this.store.getState();this.store.updateState({swapsState:{...e,quotes:{}}})}setSwapsErrorKey(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,errorKey:e}})}async getAllQuotesWithGasEstimates(e){const t=await Promise.all(Object.values(e).map((async e=>{const{gasLimit:t,simulationFails:r}=await this.timedoutGasReturn(e.trade);return[t,r,e.aggregator]}))),r={};return t.forEach((([t,n,s])=>{if(t&&!n){const n=I(e[s].maxGas,e[s].estimatedRefund,t);r[s]={...e[s],gasEstimate:t,gasEstimateWithRefund:n}}else e[s].approvalNeeded&&(r[s]=e[s])})),r}timedoutGasReturn(e){return new Promise((t=>{let r=!1;const n=setTimeout((()=>{r=!0,t({gasLimit:null,simulationFails:!0})}),5*b.SECOND),s={data:e.data,from:e.from,to:e.to,value:e.value};this.getBufferedGasLimit({txParams:s},1).then((({gasLimit:e,simulationFails:s})=>{r||(clearTimeout(n),t({gasLimit:e,simulationFails:s}))})).catch((e=>{i.default.error(e),r||(clearTimeout(n),t({gasLimit:null,simulationFails:!0}))}))}))}async setInitialGasEstimate(e){const{swapsState:t}=this.store.getState(),r={...t.quotes[e]},{gasLimit:n,simulationFails:s}=await this.timedoutGasReturn(r.trade);if(n&&!s){const e=I(r.maxGas,r.estimatedRefund,n);r.gasEstimate=n,r.gasEstimateWithRefund=e}this.store.updateState({swapsState:{...t,quotes:{...t.quotes,[e]:r}}})}setApproveTxId(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,approveTxId:e}})}setTradeTxId(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,tradeTxId:e}})}setQuotesLastFetched(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,quotesLastFetched:e}})}setSwapsTxGasPrice(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customGasPrice:e}})}setSwapsTxMaxFeePerGas(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customMaxFeePerGas:e}})}setSwapsUserFeeLevel(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,swapsUserFeeLevel:e}})}setSwapsQuotesPollingLimitEnabled(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,quotesPollingLimitEnabled:e}})}setSwapsTxMaxFeePriorityPerGas(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customMaxPriorityFeePerGas:e}})}setSwapsTxGasLimit(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customMaxGas:e}})}setCustomApproveTxData(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customApproveTxData:e}})}setBackgroundSwapRouteState(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,routeState:e}})}setSaveFetchedQuotes(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,saveFetchedQuotes:e}})}setSwapsLiveness(e){const{swapsState:t}=this.store.getState(),{swapsFeatureIsLive:r}=e;this.store.updateState({swapsState:{...t,swapsFeatureIsLive:r}})}setSwapsFeatureFlags(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,swapsFeatureFlags:e}})}resetPostFetchState(){const{swapsState:e}=this.store.getState();this.store.updateState({swapsState:{...P,tokens:e.tokens,fetchParams:e.fetchParams,swapsFeatureIsLive:e.swapsFeatureIsLive,swapsQuoteRefreshTime:e.swapsQuoteRefreshTime,swapsQuotePrefetchingRefreshTime:e.swapsQuotePrefetchingRefreshTime,swapsFeatureFlags:e.swapsFeatureFlags}}),clearTimeout(this.pollingTimeout)}resetSwapsState(){const{swapsState:e}=this.store.getState();this.store.updateState({swapsState:{...P,swapsQuoteRefreshTime:e.swapsQuoteRefreshTime,swapsQuotePrefetchingRefreshTime:e.swapsQuotePrefetchingRefreshTime}}),clearTimeout(this.pollingTimeout)}async _findTopQuoteAndCalculateSavings(e={}){const{contractExchangeRates:t}=this.getTokenRatesState(),{swapsState:{customGasPrice:r,customMaxPriorityFeePerGas:n}}=this.store.getState(),s=this._getCurrentChainId();if(!Object.keys(e).length)return{};const i=(0,c.cloneDeep)(e),{gasFeeEstimates:a,gasEstimateType:u}=await this._getEIP1559GasFeeEstimates();let d="0x0";if(u===l.GasEstimateTypes.feeMarket){const{high:{suggestedMaxPriorityFeePerGas:e},estimatedBaseFee:t}=a,r=(0,h.decGWEIToHexWEI)(e),s=new k.Numeric(t,10,_.EtherDenomination.GWEI).toDenomination(_.EtherDenomination.WEI);d=new k.Numeric(n||r,16).add(s).round(6).toString()}else u===l.GasEstimateTypes.legacy?d=r||(0,h.decGWEIToHexWEI)(a.high):u===l.GasEstimateTypes.ethGasPrice&&(d=r||(0,h.decGWEIToHexWEI)(a.gasPrice));let p=null,f=null;Object.values(i).forEach((e=>{const{aggregator:r,approvalNeeded:n,averageGas:i,destinationAmount:a=0,destinationToken:c,destinationTokenInfo:u,gasEstimateWithRefund:l,sourceAmount:y,sourceToken:m,trade:b,fee:v,multiLayerL1TradeFeeTotal:S}=e,x=(l?new o.default(l,16):new o.default(i||E,10)).plus((null==n?void 0:n.gas)||"0x0",16).toString(16);let I=(0,w.calcGasTotal)(x,d);null!==S&&(I=(0,h.sumHexes)(I||"0x0",S||"0x0"));const P=new k.Numeric(I,16,_.EtherDenomination.WEI).add(new k.Numeric(b.value,16,_.EtherDenomination.WEI)),A=P.toDenomination(_.EtherDenomination.ETH).round(6).value,C=(0,g.isSwapsDefaultTokenAddress)(m,s)?P.minus(new k.Numeric(y,10)).toDenomination(_.EtherDenomination.ETH).round(6).value:A,O=(0,w.calcTokenAmount)(a,u.decimals),R=new o.default(100,10).minus(v,10).div(100),M=O.div(R).minus(O),D=t[Object.keys(t).find((e=>(0,T.isEqualCaseInsensitive)(e,c)))],j=D||1,N=O.times(j.toString(10),10),B=(0,g.isSwapsDefaultTokenAddress)(c,s)?1:D,q=B===undefined?N:N.minus(C,10);e.ethFee=C.toString(10),B!==undefined&&(e.ethValueOfTokens=N.toString(10),e.overallValueOfQuote=q.toString(10),e.metaMaskFeeInEth=M.times(B.toString(10)).toString(10)),(null===f||q.gt(f))&&(p=r,f=q)}));let y=null;if((0,g.isSwapsDefaultTokenAddress)(i[p].destinationToken,s)||Boolean(t[Object.keys(t).find((e=>{var t;return(0,T.isEqualCaseInsensitive)(e,null===(t=i[p])||void 0===t?void 0:t.destinationToken)}))])){const e=i[p];y={};const{ethFee:t,metaMaskFeeInEth:r,ethValueOfTokens:n}=A(Object.values(i));y.performance=new o.default(e.ethValueOfTokens,10).minus(n,10),y.fee=new o.default(t).minus(e.ethFee,10),y.metaMaskFee=e.metaMaskFeeInEth,y.total=y.performance.plus(y.fee).minus(y.metaMaskFee).toString(10),y.performance=y.performance.toString(10),y.fee=y.fee.toString(10),y.medianMetaMaskFee=r,i[p].isBestQuote=!0,i[p].savings=y}return[p,i]}async _getERC20Allowance(e,t,r){const n=new s.Contract(e,u.default,this.ethersProvider);return await n.allowance(t,d.SWAPS_CHAINID_CONTRACT_ADDRESS_MAP[r])}};const O={getMedianEthValueQuote:A,meansOfQuotesFeesAndValue:C};r.utils=O}}},{package:"$root$",file:"app/scripts/controllers/swaps.js"}],[290,{cids:2102},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("cids");r.cidForWeb=e=>{let t=new n(e);0===t.version&&(t=t.toV1());let r=t.toString("base32");if(r.length>63){const e=t.toString("base36");if(e.length<=63)return e;throw new TypeError("CID is longer than DNS limit of 63 characters and is not compatible with public gateways")}return r};r.cidV0ToV1Base32=e=>{let t=new n(e);return 0===t.version&&(t=t.toV1()),t.toString("base32")}}}},{package:"@ensdomains/content-hash",file:"node_modules/@ensdomains/content-hash/src/helpers.js"}],[291,{"./helpers":290,"./profiles":292,multicodec:275,multihashes:286},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("multicodec"),s=e("multihashes"),{hexStringToBuffer:i,profiles:o}=e("./profiles"),{cidForWeb:a,cidV0ToV1Base32:c}=e("./helpers");t.exports={helpers:{cidForWeb:a,cidV0ToV1Base32:c},decode:function(e){const t=i(e),r=n.getCodec(t),s=n.rmPrefix(t);let a=o[r];return a||(a=o.default),a.decode(s)},fromIpfs:function(e){return this.encode("ipfs-ns",e)},fromSkylink:function(e){return this.encode("skynet-ns",e)},fromSwarm:function(e){return this.encode("swarm-ns",e)},encode:function(e,t){let r=o[e];r||(r=o.default);const i=r.encode(t);return s.toHexString(n.addPrefix(e,i))},getCodec:function(e){let t=i(e);return n.getCodec(t)}}}}},{package:"@ensdomains/content-hash",file:"node_modules/@ensdomains/content-hash/src/index.js"}],[292,{buffer:2065,cids:2102,"js-base64":2737,multihashes:286},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){const n=e("cids"),s=e("multihashes"),i=e("js-base64"),o=e=>{let t=e.slice(0,2),r=e.slice(2),n="";return n="0x"===t?r:e,s.fromHexString(n)},a=e=>{try{const{multihash:t}=e;if(t.length<38){const e=s.decode(t);if("identity"===e.name&&e.length<36)return!1}return!0}catch(e){return!1}return!1},c={skynet:e=>i.toUint8Array(e),swarm:e=>{const t=s.encode(o(e),"keccak-256");return new n(1,"swarm-manifest",t).bytes},ipfs:e=>new n(e).toV1().bytes,ipns:e=>{const t=new n(e);if(!a(t))throw Error("ipns-ns allows only valid cryptographic libp2p-key identifiers, try using ED25519 pubkey instead");return new n(1,"libp2p-key",t.multihash).bytes},utf8:e=>t.from(e,"utf8")},u={hexMultiHash:e=>{const t=new n(e);return s.decode(t.multihash).digest.toString("hex")},ipfs:e=>{const t=new n(e).toV1();return t.toString("libp2p-key"===t.codec?"base36":"base32")},ipns:e=>{const t=new n(e).toV1();return a(t)?t.toString("base36"):(console.warn("[ensdomains/content-hash] use of non-cryptographic identifiers in ipns-ns is deprecated and will be removed, migrate to ED25519 libp2p-key"),String(s.decode(new n(e).multihash).digest))},utf8:e=>e.toString("utf8"),base64:e=>i.fromUint8Array(e,!0)},h={"skynet-ns":{encode:c.skynet,decode:u.base64},"swarm-ns":{encode:c.swarm,decode:u.hexMultiHash},"ipfs-ns":{encode:c.ipfs,decode:u.ipfs},"ipns-ns":{encode:c.ipns,decode:u.ipns},default:{encode:c.utf8,decode:u.utf8}};r.hexStringToBuffer=o,r.profiles=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ensdomains/content-hash",file:"node_modules/@ensdomains/content-hash/src/profiles.js"}],[2926,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=/\s/;t.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}}}},{package:"lodash",file:"node_modules/lodash/_trimmedEndIndex.js"}],[2933,{"./_baseInRange":2827,"./toFinite":2962,"./toNumber":2964},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./_baseInRange"),s=e("./toFinite"),i=e("./toNumber");t.exports=function(e,t,r){return t=s(t),r===undefined?(r=t,t=0):r=s(r),e=i(e),n(e,t,r)}}}},{package:"lodash",file:"node_modules/lodash/inRange.js"}],[2939,{"./_baseKeys":2837,"./_getTag":2878,"./_isPrototype":2893,"./isArguments":2934,"./isArray":2935,"./isArrayLike":2936,"./isBuffer":2938,"./isTypedArray":2951},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./_baseKeys"),s=e("./_getTag"),i=e("./isArguments"),o=e("./isArray"),a=e("./isArrayLike"),c=e("./isBuffer"),u=e("./_isPrototype"),h=e("./isTypedArray"),d=Object.prototype.hasOwnProperty;t.exports=function(e){if(null==e)return!0;if(a(e)&&(o(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||h(e)||i(e)))return!e.length;var t=s(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!n(e).length;for(var r in e)if(d.call(e,r))return!1;return!0}}}},{package:"lodash",file:"node_modules/lodash/isEmpty.js"}],[2942,{"./toInteger":2963},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./toInteger");t.exports=function(e){return"number"==typeof e&&e==n(e)}}}},{package:"lodash",file:"node_modules/lodash/isInteger.js"}],[2955,{"./_baseAssignValue":2817,"./_baseForOwn":2822,"./_baseIteratee":2836},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./_baseAssignValue"),s=e("./_baseForOwn"),i=e("./_baseIteratee");t.exports=function(e,t){var r={};return t=i(t,3),s(e,(function(e,s,i){n(r,s,t(e,s,i))})),r}}}},{package:"lodash",file:"node_modules/lodash/mapValues.js"}],[2962,{"./toNumber":2964},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./toNumber"),s=1/0;t.exports=function(e){return e?(e=n(e))===s||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}}}},{package:"lodash",file:"node_modules/lodash/toFinite.js"}],[2963,{"./toFinite":2962},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./toFinite");t.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}}}},{package:"lodash",file:"node_modules/lodash/toInteger.js"}],[2964,{"./_baseTrim":2846,"./isObject":2946,"./isSymbol":2950},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./_baseTrim"),s=e("./isObject"),i=e("./isSymbol"),o=0/0,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,h=parseInt;t.exports=function(e){if("number"==typeof e)return e;if(i(e))return o;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=c.test(e);return r||u.test(e)?h(e.slice(2),r?2:8):a.test(e)?o:+e}}}},{package:"lodash",file:"node_modules/lodash/toNumber.js"}],[2967,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=s;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function s(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function i(e){return!0===(e&&e.__isLong__)}s.prototype.__isLong__,Object.defineProperty(s.prototype,"__isLong__",{value:!0}),s.isLong=i;var o={},a={};function c(e,t){var r,n,s;return t?(s=0<=(e>>>=0)&&e<256)&&(n=a[e])?n:(r=h(e,(0|e)<0?-1:0,!0),s&&(a[e]=r),r):(s=-128<=(e|=0)&&e<128)&&(n=o[e])?n:(r=h(e,e<0?-1:0,!1),s&&(o[e]=r),r)}function u(e,t){if(isNaN(e))return t?T:b;if(t){if(e<0)return T;if(e>=g)return S}else{if(e<=-y)return E;if(e+1>=y)return _}return e<0?u(-e,t).neg():h(e%f|0,e/f|0,t)}function h(e,t,r){return new s(e,t,r)}s.fromInt=c,s.fromNumber=u,s.fromBits=h;var d=Math.pow;function l(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return b;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return l(e.substring(1),t,r).neg();for(var s=u(d(r,8)),i=b,o=0;o<e.length;o+=8){var a=Math.min(8,e.length-o),c=parseInt(e.substring(o,o+a),r);if(a<8){var h=u(d(r,a));i=i.mul(h).add(u(c))}else i=(i=i.mul(s)).add(u(c))}return i.unsigned=t,i}function p(e,t){return"number"==typeof e?u(e,t):"string"==typeof e?l(e,t):h(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}s.fromString=l,s.fromValue=p;var f=4294967296,g=f*f,y=g/2,m=c(1<<24),b=c(0);s.ZERO=b;var T=c(0,!0);s.UZERO=T;var w=c(1);s.ONE=w;var v=c(1,!0);s.UONE=v;var k=c(-1);s.NEG_ONE=k;var _=h(-1,2147483647,!1);s.MAX_VALUE=_;var S=h(-1,-1,!0);s.MAX_UNSIGNED_VALUE=S;var E=h(0,-2147483648,!1);s.MIN_VALUE=E;var x=s.prototype;x.toInt=function(){return this.unsigned?this.low>>>0:this.low},x.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},x.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(E)){var t=u(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var s=u(d(e,6),this.unsigned),i=this,o="";;){var a=i.div(s),c=(i.sub(a.mul(s)).toInt()>>>0).toString(e);if((i=a).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},x.getHighBits=function(){return this.high},x.getHighBitsUnsigned=function(){return this.high>>>0},x.getLowBits=function(){return this.low},x.getLowBitsUnsigned=function(){return this.low>>>0},x.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},x.isZero=function(){return 0===this.high&&0===this.low},x.eqz=x.isZero,x.isNegative=function(){return!this.unsigned&&this.high<0},x.isPositive=function(){return this.unsigned||this.high>=0},x.isOdd=function(){return 1==(1&this.low)},x.isEven=function(){return 0==(1&this.low)},x.equals=function(e){return i(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},x.eq=x.equals,x.notEquals=function(e){return!this.eq(e)},x.neq=x.notEquals,x.ne=x.notEquals,x.lessThan=function(e){return this.comp(e)<0},x.lt=x.lessThan,x.lessThanOrEqual=function(e){return this.comp(e)<=0},x.lte=x.lessThanOrEqual,x.le=x.lessThanOrEqual,x.greaterThan=function(e){return this.comp(e)>0},x.gt=x.greaterThan,x.greaterThanOrEqual=function(e){return this.comp(e)>=0},x.gte=x.greaterThanOrEqual,x.ge=x.greaterThanOrEqual,x.compare=function(e){if(i(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},x.comp=x.compare,x.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(w)},x.neg=x.negate,x.add=function(e){i(e)||(e=p(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,s=65535&this.low,o=e.high>>>16,a=65535&e.high,c=e.low>>>16,u=0,d=0,l=0,f=0;return l+=(f+=s+(65535&e.low))>>>16,d+=(l+=n+c)>>>16,u+=(d+=r+a)>>>16,u+=t+o,h((l&=65535)<<16|(f&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},x.subtract=function(e){return i(e)||(e=p(e)),this.add(e.neg())},x.sub=x.subtract,x.multiply=function(e){if(this.isZero())return b;if(i(e)||(e=p(e)),n)return h(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return b;if(this.eq(E))return e.isOdd()?E:b;if(e.eq(E))return this.isOdd()?E:b;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return u(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,s=this.low>>>16,o=65535&this.low,a=e.high>>>16,c=65535&e.high,d=e.low>>>16,l=65535&e.low,f=0,g=0,y=0,T=0;return y+=(T+=o*l)>>>16,g+=(y+=s*l)>>>16,y&=65535,g+=(y+=o*d)>>>16,f+=(g+=r*l)>>>16,g&=65535,f+=(g+=s*d)>>>16,g&=65535,f+=(g+=o*c)>>>16,f+=t*l+r*d+s*c+o*a,h((y&=65535)<<16|(T&=65535),(f&=65535)<<16|(g&=65535),this.unsigned)},x.mul=x.multiply,x.divide=function(e){if(i(e)||(e=p(e)),e.isZero())throw Error("division by zero");var t,r,s;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?h((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?T:b;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return T;if(e.gt(this.shru(1)))return v;s=T}else{if(this.eq(E))return e.eq(w)||e.eq(k)?E:e.eq(E)?w:(t=this.shr(1).div(e).shl(1)).eq(b)?e.isNegative()?w:k:(r=this.sub(e.mul(t)),s=t.add(r.div(e)));if(e.eq(E))return this.unsigned?T:b;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=b}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:d(2,o-48),c=u(t),l=c.mul(e);l.isNegative()||l.gt(r);)l=(c=u(t-=a,this.unsigned)).mul(e);c.isZero()&&(c=w),s=s.add(c),r=r.sub(l)}return s},x.div=x.divide,x.modulo=function(e){return i(e)||(e=p(e)),n?h((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},x.mod=x.modulo,x.rem=x.modulo,x.not=function(){return h(~this.low,~this.high,this.unsigned)},x.and=function(e){return i(e)||(e=p(e)),h(this.low&e.low,this.high&e.high,this.unsigned)},x.or=function(e){return i(e)||(e=p(e)),h(this.low|e.low,this.high|e.high,this.unsigned)},x.xor=function(e){return i(e)||(e=p(e)),h(this.low^e.low,this.high^e.high,this.unsigned)},x.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?h(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):h(0,this.low<<e-32,this.unsigned)},x.shl=x.shiftLeft,x.shiftRight=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?h(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):h(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},x.shr=x.shiftRight,x.shiftRightUnsigned=function(e){if(i(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?h(this.low>>>e|t<<32-e,t>>>e,this.unsigned):h(32===e?t:t>>>e-32,0,this.unsigned)},x.shru=x.shiftRightUnsigned,x.shr_u=x.shiftRightUnsigned,x.toSigned=function(){return this.unsigned?h(this.low,this.high,!1):this},x.toUnsigned=function(){return this.unsigned?this:h(this.low,this.high,!0)},x.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},x.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},x.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},s.fromBytes=function(e,t,r){return r?s.fromBytesLE(e,t):s.fromBytesBE(e,t)},s.fromBytesLE=function(e,t){return new s(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},s.fromBytesBE=function(e,t){return new s(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>long",file:"node_modules/long/src/long.js"}],[2977,{"./util":2981},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{encodeText:n}=e("./util");t.exports=class{constructor(e,t,r,s){this.name=e,this.code=t,this.codeBuf=n(this.code),this.alphabet=s,this.codec=r(s)}encode(e){return this.codec.encode(e)}decode(e){for(const t of e)if(this.alphabet&&this.alphabet.indexOf(t)<0)throw new Error(`invalid character '${t}' in '${e}'`);return this.codec.decode(e)}}}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/base.js"}],[2978,{"./base.js":2977,"./rfc4648":2980,"./util":2981,"@multiformats/base-x":1372},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("@multiformats/base-x"),s=e("./base.js"),{rfc4648:i}=e("./rfc4648"),{decodeText:o,encodeText:a}=e("./util"),c=[["identity","\0",()=>({encode:o,decode:a}),""],["base2","0",i(1),"01"],["base8","7",i(3),"01234567"],["base10","9",n,"0123456789"],["base16","f",i(4),"0123456789abcdef"],["base16upper","F",i(4),"0123456789ABCDEF"],["base32hex","v",i(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",i(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",i(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",i(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",i(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",i(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",i(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",i(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",i(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",n,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",n,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",n,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",n,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],u=c.reduce(((e,t)=>(e[t[0]]=new s(t[0],t[1],t[2],t[3]),e)),{}),h=c.reduce(((e,t)=>(e[t[1]]=u[t[0]],e)),{});t.exports={names:u,codes:h}}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/constants.js"}],[2979,{"./constants":2978,"./util":2981},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./constants"),{encodeText:s,decodeText:i,concat:o}=e("./util");function a(e){if(Object.prototype.hasOwnProperty.call(n.names,e))return n.names[e];if(Object.prototype.hasOwnProperty.call(n.codes,e))return n.codes[e];throw new Error(`Unsupported encoding: ${e}`)}(r=t.exports=function(e,t){if(!t)throw new Error("requires an encoded Uint8Array");const{name:r,codeBuf:n}=a(e);return function(e,t){const r=a(e);r.decode(i(t))}(r,t),o([n,t],n.length+t.length)}).encode=function(e,t){const r=a(e),n=s(r.encode(t));return o([r.codeBuf,n],r.codeBuf.length+n.length)},r.decode=function(e){e instanceof Uint8Array&&(e=i(e));const t=e[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(t)&&(e=e.toLowerCase()),a(e[0]).decode(e.substring(1))},r.isEncoded=function(e){if(e instanceof Uint8Array&&(e=i(e)),"[object String]"!==Object.prototype.toString.call(e))return!1;try{return a(e[0]).name}catch(e){return!1}},r.encoding=a,r.encodingFromData=function(e){return e instanceof Uint8Array&&(e=i(e)),a(e[0])};const c=Object.freeze(n.names),u=Object.freeze(n.codes);r.names=c,r.codes=u}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/index.js"}],[2980,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={rfc4648:e=>t=>({encode:r=>((e,t,r)=>{const n="="===t[t.length-1],s=(1<<r)-1;let i="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,i+=t[s&a>>o];if(o&&(i+=t[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i})(r,t,e),decode:r=>((e,t,r)=>{const n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const i=new Uint8Array(s*r/8|0);let o=0,a=0,c=0;for(let t=0;t<s;++t){const s=n[e[t]];if(s===undefined)throw new SyntaxError("Invalid character "+e[t]);a=a<<r|s,o+=r,o>=8&&(o-=8,i[c++]=255&a>>o)}if(o>=r||255&a<<8-o)throw new SyntaxError("Unexpected end of data");return i})(r,t,e)})}}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/rfc4648.js"}],[2981,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=new TextDecoder,s=new TextEncoder;t.exports={decodeText:e=>n.decode(e),encodeText:e=>s.encode(e),concat:function(e,t){const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}}}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/util.js"}],[2982,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function e(t,r){var i,o=0,a=0,c=r=r||0,u=t.length;do{if(c>=u||a>49)throw e.bytes=0,new RangeError("Could not decode varint");i=t[c++],o+=a<28?(i&s)<<a:(i&s)*Math.pow(2,a),a+=7}while(i>=n);return e.bytes=c-r,o};var n=128,s=127}}},{package:"@ensdomains/content-hash>cids>multicodec>varint",file:"node_modules/multicodec/node_modules/varint/decode.js"}],[2983,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function e(t,r,o){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");r=r||[];var a=o=o||0;for(;t>=i;)r[o++]=255&t|n,t/=128;for(;t&s;)r[o++]=255&t|n,t>>>=7;return r[o]=0|t,e.bytes=o-a+1,r};var n=128,s=-128,i=Math.pow(2,31)}}},{package:"@ensdomains/content-hash>cids>multicodec>varint",file:"node_modules/multicodec/node_modules/varint/encode.js"}],[2984,{"./decode.js":2982,"./encode.js":2983,"./length.js":2985},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={encode:e("./encode.js"),decode:e("./decode.js"),encodingLength:e("./length.js")}}}},{package:"@ensdomains/content-hash>cids>multicodec>varint",file:"node_modules/multicodec/node_modules/varint/index.js"}],[2985,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=Math.pow(2,7),s=Math.pow(2,14),i=Math.pow(2,21),o=Math.pow(2,28),a=Math.pow(2,35),c=Math.pow(2,42),u=Math.pow(2,49),h=Math.pow(2,56),d=Math.pow(2,63);t.exports=function(e){return e<n?1:e<s?2:e<i?3:e<o?4:e<a?5:e<c?6:e<u?7:e<h?8:e<d?9:10}}}},{package:"@ensdomains/content-hash>cids>multicodec>varint",file:"node_modules/multicodec/node_modules/varint/length.js"}],[2986,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=Object.freeze({identity:0,cidv1:1,cidv2:2,cidv3:3,ip4:4,tcp:6,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,dccp:33,"murmur3-128":34,"murmur3-32":35,ip6:41,ip6zone:42,path:47,multicodec:48,multihash:49,multiaddr:50,multibase:51,dns:53,dns4:54,dns6:55,dnsaddr:56,protobuf:80,cbor:81,raw:85,"dbl-sha2-256":86,rlp:96,bencode:99,"dag-pb":112,"dag-cbor":113,"libp2p-key":114,"git-raw":120,"torrent-info":123,"torrent-file":124,"leofcoin-block":129,"leofcoin-tx":130,"leofcoin-pr":131,sctp:132,"dag-jose":133,"dag-cose":134,"eth-block":144,"eth-block-list":145,"eth-tx-trie":146,"eth-tx":147,"eth-tx-receipt-trie":148,"eth-tx-receipt":149,"eth-state-trie":150,"eth-account-snapshot":151,"eth-storage-trie":152,"bitcoin-block":176,"bitcoin-tx":177,"bitcoin-witness-commitment":178,"zcash-block":192,"zcash-tx":193,docid:206,"stellar-block":208,"stellar-tx":209,md4:212,md5:213,bmt:214,"decred-block":224,"decred-tx":225,"ipld-ns":226,"ipfs-ns":227,"swarm-ns":228,"ipns-ns":229,zeronet:230,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"x25519-pub":236,"ed25519-pub":237,"bls12_381-g1g2-pub":238,"dash-block":240,"dash-tx":241,"swarm-manifest":250,"swarm-feed":251,udp:273,"p2p-webrtc-star":275,"p2p-webrtc-direct":276,"p2p-stardust":277,"p2p-circuit":290,"dag-json":297,udt:301,utp:302,unix:400,thread:406,p2p:421,ipfs:421,https:443,onion:444,onion3:445,garlic64:446,garlic32:447,tls:448,quic:460,ws:477,wss:478,"p2p-websocket-star":479,http:480,json:512,messagepack:513,"libp2p-peer-record":769,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,"p256-pub":4608,"p384-pub":4609,"p521-pub":4610,"ed448-pub":4611,"x448-pub":4612,"ed25519-priv":4864,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082,"zeroxcert-imprint-256":52753,"fil-commitment-unsealed":61697,"fil-commitment-sealed":61698,"holochain-adr-v0":8417572,"holochain-adr-v1":8483108,"holochain-key-v0":9728292,"holochain-key-v1":9793828,"holochain-sig-v0":10645796,"holochain-sig-v1":10711332,"skynet-ns":11639056});t.exports={baseTable:n}}}},{package:"@ensdomains/content-hash>cids>multicodec",file:"node_modules/multicodec/src/generated-table.js"}],[2987,{"./maps":2988,"./util":2989,"uint8arrays/concat":3347,varint:2984},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("varint"),s=e("uint8arrays/concat"),i=e("./util"),{nameToVarint:o,constantToCode:a,nameToCode:c,codeToName:u}=e("./maps");function h(e){const t=n.decode(e),r=u[t];if(r===undefined)throw new Error(`Code "${t}" not found`);return r}function d(e){return u[e]}function l(e){const t=c[e];if(t===undefined)throw new Error(`Codec "${e}" not found`);return t}function p(e){return n.decode(e)}function f(e){const t=o[e];if(t===undefined)throw new Error(`Codec "${e}" not found`);return t}function g(e){return i.varintEncode(e)}t.exports={addPrefix:function(e,t){let r;if(e instanceof Uint8Array)r=i.varintUint8ArrayEncode(e);else{if(!o[e])throw new Error("multicodec not recognized");r=o[e]}return s([r,t],r.length+t.length)},rmPrefix:function(e){return n.decode(e),e.slice(n.decode.bytes)},getNameFromData:h,getNameFromCode:d,getCodeFromName:l,getCodeFromData:p,getVarintFromName:f,getVarintFromCode:g,getCodec:function(e){return h(e)},getName:function(e){return d(e)},getNumber:function(e){return l(e)},getCode:function(e){return p(e)},getCodeVarint:function(e){return f(e)},getVarint:function(e){return Array.from(g(e))},...a,nameToVarint:o,nameToCode:c,codeToName:u}}}},{package:"@ensdomains/content-hash>cids>multicodec",file:"node_modules/multicodec/src/index.js"}],[2988,{"./generated-table":2986,"./util":2989},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{baseTable:n}=e("./generated-table"),s=e("./util").varintEncode,i={},o={},a={};for(const e in n){const t=e,r=n[t];i[t]=s(r);o[t.toUpperCase().replace(/-/g,"_")]=r,a[r]||(a[r]=t)}Object.freeze(i),Object.freeze(o),Object.freeze(a);const c=Object.freeze(n);t.exports={nameToVarint:i,constantToCode:o,nameToCode:c,codeToName:a}}}},{package:"@ensdomains/content-hash>cids>multicodec",file:"node_modules/multicodec/src/maps.js"}],[2989,{"uint8arrays/from-string":3349,"uint8arrays/to-string":3350,varint:2984},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("varint"),s=e("uint8arrays/to-string"),i=e("uint8arrays/from-string");function o(e){return parseInt(s(e,"base16"),16)}t.exports={numberToUint8Array:function(e){let t=e.toString(16);t.length%2==1&&(t="0"+t);return i(t,"base16")},uint8ArrayToNumber:o,varintUint8ArrayEncode:function(e){return Uint8Array.from(n.encode(o(e)))},varintEncode:function(e){return Uint8Array.from(n.encode(e))}}}}},{package:"@ensdomains/content-hash>cids>multicodec",file:"node_modules/multicodec/src/util.js"}],[3,{"../../../shared/modules/hexstring-utils":3444,"../lib/util":81,"@ethersproject/hdnode":434,"ethereumjs-util":2340,"ethereumjs-wallet":2350,"ethereumjs-wallet/thirdparty":2369,loglevel:2966},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@ethersproject/hdnode"),s=e("ethereumjs-util"),i=h(e("ethereumjs-wallet")),o=h(e("ethereumjs-wallet/thirdparty")),a=h(e("loglevel")),c=e("../../../shared/modules/hexstring-utils"),u=e("../lib/util");function h(e){return e&&e.__esModule?e:{default:e}}var d={async importAccount(e,t){return(0,this.strategies[e])(...t)},strategies:{"Private Key":e=>{if(!e)throw new Error("Cannot import an empty key.");if((0,n.isValidMnemonic)(e.trim()))throw new Error("t('importAccountErrorIsSRP')");const t=e.replace(/\s+/gu,""),r=(0,u.addHexPrefix)(t);let i;try{i=(0,s.toBuffer)(r)}catch(e){throw new Error("t('importAccountErrorNotHexadecimal')")}try{if(!(0,s.isValidPrivate)(i)||66!==(0,s.getBinarySize)(r))throw new Error("t('importAccountErrorNotAValidPrivateKey')")}catch(e){throw new Error("t('importAccountErrorNotAValidPrivateKey')")}return(0,c.stripHexPrefix)(r)},"JSON File":(e,t)=>{let r;try{r=o.default.fromEtherWallet(e,t)}catch(n){a.default.debug("Attempt to import as EtherWallet format failed, trying V3"),r=i.default.fromV3(e,t,!0)}return function(e){const t=e.getPrivateKey();return(0,s.bufferToHex)(t)}(r)}}};r.default=d}}},{package:"$root$",file:"app/scripts/account-import-strategies/index.js"}],[30,{"../../../../shared/constants/app":3409,"../../../../shared/constants/gas":3412,"../../../../shared/constants/metametrics":3416,"../../../../shared/constants/network":3417,"../../../../shared/constants/transaction":3426,"../../../../shared/lib/transactions-controller-utils":3434,"../../../../shared/modules/Numeric":3436,"../../../../shared/modules/conversion.utils":3440,"../../../../shared/modules/swaps.utils":3452,"../../../../shared/modules/transaction.utils":3453,"../../lib/cleanErrorStack":40,"../../lib/util":81,"../../metamask-controller":82,"./lib/util":32,"./pending-tx-tracker":33,"./tx-gas-utils":34,"./tx-state-manager":35,"@ethereumjs/common":354,"@ethereumjs/tx":364,"@metamask/obs-store":1301,"@metamask/safe-event-emitter":1320,"bignumber.js":1975,"eth-rpc-errors":2286,"ethereumjs-util":2340,"ethjs-query":2383,lodash:2954,loglevel:2966,"nonce-tracker":3015},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=R(e("@metamask/safe-event-emitter")),s=e("@metamask/obs-store"),i=e("ethereumjs-util"),o=R(e("ethjs-query")),a=e("eth-rpc-errors"),c=e("@ethereumjs/common"),u=e("@ethereumjs/tx"),h=R(e("nonce-tracker")),d=R(e("loglevel")),l=R(e("bignumber.js")),p=e("lodash"),f=R(e("../../lib/cleanErrorStack")),g=e("../../lib/util"),y=e("../../../../shared/constants/transaction"),m=e("../../metamask-controller"),b=e("../../../../shared/constants/gas"),T=e("../../../../shared/modules/conversion.utils"),w=e("../../../../shared/modules/swaps.utils"),v=e("../../../../shared/constants/metametrics"),k=e("../../../../shared/constants/network"),_=e("../../../../shared/modules/transaction.utils"),S=e("../../../../shared/constants/app"),E=e("../../../../shared/lib/transactions-controller-utils"),x=e("../../../../shared/modules/Numeric"),I=R(e("./tx-state-manager")),P=R(e("./tx-gas-utils")),A=R(e("./pending-tx-tracker")),C=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=s?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(e("./lib/util"));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function R(e){return e&&e.__esModule?e:{default:e}}const M=[y.TransactionType.swap,y.TransactionType.swapApproval],D=[...M,y.TransactionType.simpleSend,y.TransactionType.tokenMethodTransfer,y.TransactionType.tokenMethodTransferFrom,y.TransactionType.contractInteraction],j="failed on-chain";class N extends n.default{constructor(e){super(),this.getNetworkId=e.getNetworkId,this.getNetworkStatus=e.getNetworkStatus,this._getCurrentChainId=e.getCurrentChainId,this.getProviderConfig=e.getProviderConfig,this._getCurrentNetworkEIP1559Compatibility=e.getCurrentNetworkEIP1559Compatibility,this._getCurrentAccountEIP1559Compatibility=e.getCurrentAccountEIP1559Compatibility,this.preferencesStore=e.preferencesStore||new s.ObservableStore({}),this.provider=e.provider,this.getPermittedAccounts=e.getPermittedAccounts,this.blockTracker=e.blockTracker,this.signEthTx=e.signTransaction,this.inProcessOfSigning=new Set,this._trackMetaMetricsEvent=e.trackMetaMetricsEvent,this._getParticipateInMetrics=e.getParticipateInMetrics,this._getEIP1559GasFeeEstimates=e.getEIP1559GasFeeEstimates,this.createEventFragment=e.createEventFragment,this.updateEventFragment=e.updateEventFragment,this.finalizeEventFragment=e.finalizeEventFragment,this.getEventFragmentById=e.getEventFragmentById,this.getDeviceModel=e.getDeviceModel,this.getAccountType=e.getAccountType,this.getTokenStandardAndDetails=e.getTokenStandardAndDetails,this.securityProviderRequest=e.securityProviderRequest,this.messagingSystem=e.messenger,this.memStore=new s.ObservableStore({}),this.resetState=()=>{this._updateMemstore()},this.query=new o.default(this.provider),this.txGasUtil=new P.default(this.provider),this._mapMethods(),this.txStateManager=new I.default({initState:e.initState,txHistoryLimit:e.txHistoryLimit,getNetworkId:this.getNetworkId,getNetworkStatus:this.getNetworkStatus,getCurrentChainId:e.getCurrentChainId}),this.store=this.txStateManager.store,this.nonceTracker=new h.default({provider:this.provider,blockTracker:this.blockTracker,getPendingTransactions:(...t)=>[...this.txStateManager.getPendingTransactions(...t),...e.getExternalPendingTransactions(...t)],getConfirmedTransactions:this.txStateManager.getConfirmedTransactions.bind(this.txStateManager)}),this.pendingTxTracker=new A.default({provider:this.provider,nonceTracker:this.nonceTracker,publishTransaction:e=>this.query.sendRawTransaction(e),getPendingTransactions:()=>[...this.txStateManager.getPendingTransactions(),...this.txStateManager.getApprovedTransactions()],approveTransaction:this.approveTransaction.bind(this),getCompletedTransactions:this.txStateManager.getConfirmedTransactions.bind(this.txStateManager)}),this.txStateManager.store.subscribe((()=>this.emit(m.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE))),this._setupListeners(),this._updateMemstore(),this.txStateManager.store.subscribe((()=>this._updateMemstore())),e.onNetworkStateChange((()=>{this._onBootCleanUp(),this._updateMemstore()})),this._updatePendingTxsAfterFirstBlock(),this._onBootCleanUp()}getChainId(){const e=this.getNetworkStatus(),t=this._getCurrentChainId(),r=parseInt(t,16);return e!==k.NetworkStatus.Available||Number.isNaN(r)?0:r}async getEIP1559Compatibility(e){const t=await this._getCurrentNetworkEIP1559Compatibility(),r=await this._getCurrentAccountEIP1559Compatibility(e);return t&&r}async getCommonConfiguration(e){const{type:t,nickname:r}=this.getProviderConfig(),n=await this.getEIP1559Compatibility(e)?c.Hardfork.London:c.Hardfork.Berlin;if(t!==k.NETWORK_TYPES.RPC&&t!==k.NETWORK_TYPES.SEPOLIA)return new c.Common({chain:t,hardfork:n});const s=parseInt(this._getCurrentChainId(),16),i=this.getNetworkStatus(),o=this.getNetworkId();return c.Common.custom({name:r,chainId:s,networkId:i===k.NetworkStatus.Available?parseInt(o,10):0,hardfork:n})}addTransaction(e){this.txStateManager.addTransaction(e),this.emit(`${e.id}:unapproved`,e),this._trackTransactionMetricsEvent(e,y.TransactionMetaMetricsEvent.added,e.actionId)}wipeTransactions(e){this.txStateManager.wipeTransactions(e)}async newUnapprovedTransaction(e,t={}){d.default.debug(`MetaMaskController newUnapprovedTransaction ${JSON.stringify(e)}`);const r=await this.addUnapprovedTransaction(t.method,e,t.origin,undefined,undefined,t.id);return new Promise(((e,t)=>{this.txStateManager.once(`${r.id}:finished`,(r=>{switch(r.status){case y.TransactionStatus.submitted:return e(r.hash);case y.TransactionStatus.rejected:return t((0,f.default)(a.ethErrors.provider.userRejectedRequest("MetaMask Tx Signature: User denied transaction signature.")));case y.TransactionStatus.failed:return t((0,f.default)(a.ethErrors.rpc.internal(r.err.message)));default:return t((0,f.default)(a.ethErrors.rpc.internal(`MetaMask Tx Signature: Unknown problem: ${JSON.stringify(r.txParams)}`)))}}))}))}_getTransaction(e){const{transactions:t}=this.store.getState();return t[e]}_isUnapprovedTransaction(e){return this.txStateManager.getTransaction(e).status===y.TransactionStatus.unapproved}_throwErrorIfNotUnapprovedTx(e,t){if(!this._isUnapprovedTransaction(e))throw new Error(`TransactionsController: Can only call ${t} on an unapproved transaction.\n         Current tx status: ${this.txStateManager.getTransaction(e).status}`)}_updateTransaction(e,t,r){const n=this.txStateManager.getTransaction(e),s=(0,p.merge)(n,t);this.txStateManager.updateTransaction(s,r)}updatePreviousGasParams(e,{maxFeePerGas:t,maxPriorityFeePerGas:r,gasLimit:n}){const s={previousGas:{maxFeePerGas:t,maxPriorityFeePerGas:r,gasLimit:n}};s.previousGas=(0,p.pickBy)(s.previousGas);const i=`Update Previous Gas for ${e}`;return this._updateTransaction(e,s,i),this._getTransaction(e)}async updateEditableParams(e,{data:t,from:r,to:n,value:s,gas:i,gasPrice:o}){this._throwErrorIfNotUnapprovedTx(e,"updateEditableParams");const a={txParams:{data:t,from:r,to:n,value:s,gas:i,gasPrice:o}};a.txParams=(0,p.pickBy)(a.txParams,(e=>e!==undefined));const c=this._getTransaction(e),{type:u}=await(0,_.determineTransactionType)({...c.txParams,...a.txParams},this.query);a.type=u;const h=`Update Editable Params for ${e}`;return this._updateTransaction(e,a,h),this._getTransaction(e)}updateTransactionGasFees(e,{gas:t,gasLimit:r,gasPrice:n,maxPriorityFeePerGas:s,maxFeePerGas:i,estimateUsed:o,estimateSuggested:a,defaultGasEstimates:c,originalGasEstimate:u,userEditedGasLimit:h,userFeeLevel:d}){this._throwErrorIfNotUnapprovedTx(e,"updateTransactionGasFees");let l={txParams:{gas:t,gasLimit:r,gasPrice:n,maxPriorityFeePerGas:s,maxFeePerGas:i},estimateUsed:o,estimateSuggested:a,defaultGasEstimates:c,originalGasEstimate:u,userEditedGasLimit:h,userFeeLevel:d};l.txParams=(0,p.pickBy)(l.txParams),l=(0,p.pickBy)(l);const f=`Update Transaction Gas Fees for ${e}`;return this._updateTransaction(e,l,f),this._getTransaction(e)}updateTransactionEstimatedBaseFee(e,{estimatedBaseFee:t,decEstimatedBaseFee:r}){this._throwErrorIfNotUnapprovedTx(e,"updateTransactionEstimatedBaseFee");let n={estimatedBaseFee:t,decEstimatedBaseFee:r};n=(0,p.pickBy)(n);const s=`Update Transaction Estimated Base Fees for ${e}`;return this._updateTransaction(e,n,s),this._getTransaction(e)}updateSwapApprovalTransaction(e,{type:t,sourceTokenSymbol:r}){this._throwErrorIfNotUnapprovedTx(e,"updateSwapApprovalTransaction");let n={type:t,sourceTokenSymbol:r};n=(0,p.pickBy)(n);const s=`Update Swap Approval Transaction for ${e}`;return this._updateTransaction(e,n,s),this._getTransaction(e)}updateSwapTransaction(e,{sourceTokenSymbol:t,destinationTokenSymbol:r,type:n,destinationTokenDecimals:s,destinationTokenAddress:i,swapMetaData:o,swapTokenValue:a,estimatedBaseFee:c,approvalTxId:u}){this._throwErrorIfNotUnapprovedTx(e,"updateSwapTransaction");let h={sourceTokenSymbol:t,destinationTokenSymbol:r,type:n,destinationTokenDecimals:s,destinationTokenAddress:i,swapMetaData:o,swapTokenValue:a,estimatedBaseFee:c,approvalTxId:u};h=(0,p.pickBy)(h);const d=`Update Swap Transaction for ${e}`;return this._updateTransaction(e,h,d),this._getTransaction(e)}updateTransactionUserSettings(e,{userEditedGasLimit:t,userFeeLevel:r}){this._throwErrorIfNotUnapprovedTx(e,"updateTransactionUserSettings");let n={userEditedGasLimit:t,userFeeLevel:r};n=(0,p.pickBy)(n);const s=`Update User Settings for ${e}`;return this._updateTransaction(e,n,s),this._getTransaction(e)}updateTransactionSendFlowHistory(e,t,r){var n;this._throwErrorIfNotUnapprovedTx(e,"updateTransactionSendFlowHistory");const s=this._getTransaction(e);if(t===((null==s||null===(n=s.sendFlowHistory)||void 0===n?void 0:n.length)||0)){const t=`Update sendFlowHistory for ${e}`;this.txStateManager.updateTransaction({...s,sendFlowHistory:[...(null==s?void 0:s.sendFlowHistory)??[],...r]},t)}return this._getTransaction(e)}async addTransactionGasDefaults(e){const t=await(0,_.determineTransactionContractCode)(e.txParams,this.query);let r=e;try{r=await this.addTxGasDefaults(e,t)}catch(t){throw d.default.warn(t),r=this.txStateManager.getTransaction(e.id),r.loadingDefaults=!1,this.txStateManager.updateTransaction(e,"Failed to calculate gas defaults."),t}return r.loadingDefaults=!1,this.txStateManager.updateTransaction(r,"Added new unapproved transaction."),r}async addUnapprovedTransaction(e,t,r,n,s=[],i){if(n!==undefined&&!D.includes(n))throw new Error(`TransactionController - invalid transactionType value: ${n}`);if(i){let e=this.txStateManager.getTransactionWithActionId(i);if(e)return this.emit("newUnapprovedTx",e),e=await this.addTransactionGasDefaults(e),this._requestApproval(e),e}const o=C.normalizeTxParams(t),c=await this.getEIP1559Compatibility();C.validateTxParams(o,c);let u=this.txStateManager.generateTxMeta({txParams:o,origin:r,sendFlowHistory:s});if(i&&(u.actionId=i),r===S.ORIGIN_METAMASK){if(o.from!==this.getSelectedAddress())throw a.ethErrors.rpc.internal({message:"Internally initiated transaction is using invalid account.",data:{origin:r,fromAddress:o.from,selectedAddress:this.getSelectedAddress()}})}else{if(!(await this.getPermittedAccounts(r)).includes(o.from))throw a.ethErrors.provider.unauthorized({data:{origin:r}})}const{type:h}=await(0,_.determineTransactionType)(o,this.query);if(u.type=n||h,u.txParams.value=u.txParams.value?(0,g.addHexPrefix)(u.txParams.value):"0x0",e&&this.securityProviderRequest){const t=await this.securityProviderRequest(u,e);u.securityProviderResponse=t}return this.addTransaction(u),this.emit("newUnapprovedTx",u),u=await this.addTransactionGasDefaults(u),this._requestApproval(u),u}async addTxGasDefaults(e,t){const r=e.txParams.type!==y.TransactionEnvelopeType.legacy&&await this.getEIP1559Compatibility(),{gasPrice:n,maxFeePerGas:s,maxPriorityFeePerGas:i}=await this._getDefaultGasFees(e,r),{gasLimit:o,simulationFails:a}=await this._getDefaultGasLimit(e,t);if(e=this.txStateManager.getTransaction(e.id),a&&(e.simulationFails=a),r){const t=this.getAdvancedGasFee();Boolean(t)&&!M.includes(e.type)?(e.userFeeLevel=b.CUSTOM_GAS_ESTIMATE,e.txParams.maxFeePerGas=(0,T.decGWEIToHexWEI)(t.maxBaseFee),e.txParams.maxPriorityFeePerGas=(0,T.decGWEIToHexWEI)(t.priorityFee)):!e.txParams.gasPrice||e.txParams.maxFeePerGas||e.txParams.maxPriorityFeePerGas?(s&&i&&!e.txParams.maxFeePerGas&&!e.txParams.maxPriorityFeePerGas||e.origin===S.ORIGIN_METAMASK?e.userFeeLevel=b.GasRecommendations.medium:e.userFeeLevel=b.PriorityLevels.dAppSuggested,s&&!e.txParams.maxFeePerGas&&(e.txParams.maxFeePerGas=s),i&&!e.txParams.maxPriorityFeePerGas&&(e.txParams.maxPriorityFeePerGas=i),n&&!e.txParams.maxFeePerGas&&(e.txParams.maxFeePerGas=n),e.txParams.maxFeePerGas&&!e.txParams.maxPriorityFeePerGas&&(e.txParams.maxPriorityFeePerGas=e.txParams.maxFeePerGas)):(e.txParams.maxFeePerGas=e.txParams.gasPrice,e.txParams.maxPriorityFeePerGas=e.txParams.gasPrice,e.origin===S.ORIGIN_METAMASK?e.userFeeLevel=b.CUSTOM_GAS_ESTIMATE:e.userFeeLevel=b.PriorityLevels.dAppSuggested),delete e.txParams.gasPrice}else delete e.txParams.maxPriorityFeePerGas,delete e.txParams.maxFeePerGas;return!n||e.txParams.gasPrice||e.txParams.maxPriorityFeePerGas||e.txParams.maxFeePerGas||(e.txParams.gasPrice=n),o&&!e.txParams.gas&&(e.txParams.gas=o,e.originalGasEstimate=o),e.defaultGasEstimates={estimateType:e.userFeeLevel,gas:e.txParams.gas,gasPrice:e.txParams.gasPrice,maxFeePerGas:e.txParams.maxFeePerGas,maxPriorityFeePerGas:e.txParams.maxPriorityFeePerGas},e}async _getDefaultGasFees(e,t){if(!t&&e.txParams.gasPrice||t&&e.txParams.maxFeePerGas&&e.txParams.maxPriorityFeePerGas)return{};try{const{gasFeeEstimates:e,gasEstimateType:r}=await this._getEIP1559GasFeeEstimates();if(t&&r===b.GasEstimateTypes.feeMarket){const{medium:{suggestedMaxPriorityFeePerGas:t,suggestedMaxFeePerGas:r}={}}=e;if(t&&r)return{maxFeePerGas:(0,T.decGWEIToHexWEI)(r),maxPriorityFeePerGas:(0,T.decGWEIToHexWEI)(t)}}else{if(r===b.GasEstimateTypes.legacy)return{gasPrice:(0,T.decGWEIToHexWEI)(e.medium)};if(r===b.GasEstimateTypes.ethGasPrice)return{gasPrice:(0,T.decGWEIToHexWEI)(e.gasPrice)}}}catch(e){console.error(e)}const r=await this.query.gasPrice();return{gasPrice:r&&(0,g.addHexPrefix)(r.toString(16))}}async _getDefaultGasLimit(e){const t=this._getCurrentChainId(),r=k.CHAIN_ID_TO_GAS_LIMIT_BUFFER_MAP[t],n=(0,g.getChainType)(t);if(e.txParams.gas)return{};if(e.txParams.to&&e.type===y.TransactionType.simpleSend&&"custom"!==n&&!e.txParams.data)return{gasLimit:b.GAS_LIMITS.SIMPLE};const{blockGasLimit:s,estimatedGasHex:i,simulationFails:o}=await this.txGasUtil.analyzeGasUsage(e);return{gasLimit:this.txGasUtil.addGasBuffer((0,g.addHexPrefix)(i),s,r),simulationFails:o}}generateNewGasParams(e,t={},r=11){const{txParams:n}=e,s={},i={};return t.gasLimit&&(i.gas=(null==t?void 0:t.gas)??b.GAS_LIMITS.SIMPLE),t.estimateSuggested&&(i.estimateSuggested=t.estimateSuggested),t.estimateUsed&&(i.estimateUsed=t.estimateUsed),(0,_.isEIP1559Transaction)(e)?(s.maxFeePerGas=n.maxFeePerGas,s.maxPriorityFeePerGas=n.maxPriorityFeePerGas,i.maxFeePerGas=(null==t?void 0:t.maxFeePerGas)||(0,T.bnToHex)((0,g.BnMultiplyByFraction)((0,g.hexToBn)(n.maxFeePerGas),r,10)),i.maxPriorityFeePerGas=(null==t?void 0:t.maxPriorityFeePerGas)||(0,T.bnToHex)((0,g.BnMultiplyByFraction)((0,g.hexToBn)(n.maxPriorityFeePerGas),r,10))):(s.gasPrice=n.gasPrice,i.gasPrice=(null==t?void 0:t.gasPrice)||(0,T.bnToHex)((0,g.BnMultiplyByFraction)((0,g.hexToBn)(n.gasPrice),r,10))),{previousGasParams:s,newGasParams:i}}async createCancelTransaction(e,t,{estimatedBaseFee:r,actionId:n}={}){if(n){const e=this.txStateManager.getTransactionWithActionId(n);if(e)return e}const s=this.txStateManager.getTransaction(e),{txParams:i}=s,{from:o,nonce:a}=i,{previousGasParams:c,newGasParams:u}=this.generateNewGasParams(s,{...t,gasLimit:t.gasLimit||b.GAS_LIMITS.SIMPLE}),h=this.txStateManager.generateTxMeta({txParams:{from:o,to:o,nonce:a,value:"0x0",...u},previousGasParams:c,loadingDefaults:!1,status:y.TransactionStatus.approved,type:y.TransactionType.cancel,actionId:n});return r&&(h.estimatedBaseFee=r),this.addTransaction(h),await this.approveTransaction(h.id,n,{hasApprovalRequest:!1}),h}async createSpeedUpTransaction(e,t,{estimatedBaseFee:r,actionId:n}={}){if(n){const e=this.txStateManager.getTransactionWithActionId(n);if(e)return e}const s=this.txStateManager.getTransaction(e),{txParams:i}=s,{previousGasParams:o,newGasParams:a}=this.generateNewGasParams(s,t),c=this.txStateManager.generateTxMeta({txParams:{...i,...a},previousGasParams:o,loadingDefaults:!1,status:y.TransactionStatus.approved,type:y.TransactionType.retry,originalType:s.type,actionId:n});return r&&(c.estimatedBaseFee=r),this.addTransaction(c),await this.approveTransaction(c.id,n,{hasApprovalRequest:!1}),c}async updateTransaction(e){this.txStateManager.updateTransaction(e,"confTx: user updated transaction")}async updateAndApproveTransaction(e,t){this.txStateManager.updateTransaction(e,"confTx: user approved transaction"),await this.approveTransaction(e.id,t)}async approveTransaction(e,t,{hasApprovalRequest:r=!0}={}){const n=this.txStateManager.getTransaction(e);if(this.inProcessOfSigning.has(e))return;let s;this.inProcessOfSigning.add(e);try{this.txStateManager.setTxStatusApproved(e),r&&this._acceptApproval(n);const i=n.txParams.from;let{customNonceValue:o}=n;o=Number(o),s=await this.nonceTracker.getNonceLock(i);const a=n.previousGasParams?n.txParams.nonce:s.nextNonce,c=0===o?o:o||a;n.txParams.nonce=(0,g.addHexPrefix)(c.toString(16)),n.nonceDetails=s.nonceDetails,o&&(n.nonceDetails.customNonceValue=o),this.txStateManager.updateTransaction(n,"transactions#approveTransaction");const u=await this.signTransaction(e);await this.publishTransaction(e,u,t),this._trackTransactionMetricsEvent(n,y.TransactionMetaMetricsEvent.approved,t),s.releaseLock()}catch(r){try{this._failTransaction(e,r,t)}catch(e){d.default.error(e)}throw s&&s.releaseLock(),r}finally{this.inProcessOfSigning.delete(e)}}async approveTransactionsWithSameNonce(e=[]){if(0===e.length)return"";const t=e[0],r=await this.getCommonConfiguration(t.from),n=u.TransactionFactory.fromTxData(t,{common:r}),s=(0,i.bufferToHex)(n.serialize());if(this.inProcessOfSigning.has(s))return"";let o,a;this.inProcessOfSigning.add(s);try{const r=t.from;a=await this.nonceTracker.getNonceLock(r);const n=a.nextNonce;o=await Promise.all(e.map((e=>(e.nonce=(0,g.addHexPrefix)(n.toString(16)),this.signExternalTransaction(e)))))}catch(e){throw d.default.error(e),e}finally{a&&a.releaseLock(),this.inProcessOfSigning.delete(s)}return o}async signExternalTransaction(e){const t=C.normalizeTxParams(e),r=this.getChainId(),n=(0,_.isEIP1559Transaction)({txParams:t})?y.TransactionEnvelopeType.feeMarket:y.TransactionEnvelopeType.legacy,s={...t,type:n,gasLimit:t.gas,chainId:new x.Numeric(r,10).toPrefixedHexString()},o=s.from,a=await this.getCommonConfiguration(o),c=u.TransactionFactory.fromTxData(s,{common:a}),h=await this.signEthTx(c,o);return(0,i.bufferToHex)(h.serialize())}async signTransaction(e){const t=this.txStateManager.getTransaction(e),r=this.getChainId(),n=(0,_.isEIP1559Transaction)(t)?y.TransactionEnvelopeType.feeMarket:y.TransactionEnvelopeType.legacy,s={...t.txParams,type:n,chainId:r,gasLimit:t.txParams.gas},o=s.from,a=await this.getCommonConfiguration(s.from),c=u.TransactionFactory.fromTxData(s,{common:a}),h=await this.signEthTx(c,o);t.r=(0,g.addHexPrefix)(h.r.toString(16)),t.s=(0,g.addHexPrefix)(h.s.toString(16)),t.v=(0,g.addHexPrefix)(h.v.toString(16)),this.txStateManager.updateTransaction(t,"transactions#signTransaction: add r, s, v values"),this.txStateManager.setTxStatusSigned(t.id);return(0,i.bufferToHex)(h.serialize())}async publishTransaction(e,t,r){const n=this.txStateManager.getTransaction(e);if(n.rawTx=t,n.type===y.TransactionType.swap){const e=await this.query.getBalance(n.txParams.from);n.preTxBalance=e.toString(16)}let s;this.txStateManager.updateTransaction(n,"transactions#publishTransaction");try{s=await this.query.sendRawTransaction(t)}catch(e){if(!e.message.toLowerCase().includes("known transaction"))throw e;s=(0,i.keccak)((0,i.toBuffer)((0,g.addHexPrefix)(t),"hex")).toString("hex"),s=(0,g.addHexPrefix)(s)}this.setTxHash(e,s),this.txStateManager.setTxStatusSubmitted(e),this._trackTransactionMetricsEvent(n,y.TransactionMetaMetricsEvent.submitted,r)}async updatePostTxBalance({txMeta:e,txId:t,numberOfAttempts:r=6}){const n=await this.query.getBalance(e.txParams.from),s=this.txStateManager.getTransaction(t),i=s.approvalTxId?this.txStateManager.getTransaction(s.approvalTxId):null;s.postTxBalance=n.toString(16);(0,w.isSwapsDefaultTokenAddress)(e.destinationTokenAddress,e.chainId)&&e.preTxBalance===s.postTxBalance&&r>0?setTimeout((()=>{this.updatePostTxBalance({txMeta:e,txId:t,numberOfAttempts:r-1})}),5e3):(this.txStateManager.updateTransaction(s,"transactions#confirmTransaction - add postTxBalance"),this._trackSwapsMetrics(s,i))}async confirmTransaction(e,t,r,n){const s=this.txStateManager.getTransaction(e);if(s)try{const i=C.normalizeTxReceiptGasUsed(t.gasUsed);s.txReceipt={...t,gasUsed:i},r&&(s.baseFeePerGas=r),n&&(s.blockTimestamp=n),this.txStateManager.setTxStatusConfirmed(e),this._markNonceDuplicatesDropped(e);const{submittedTime:o}=s,a={gas_used:i};o&&(a.completion_time=this._getTransactionCompletionTime(o)),"0x0"===t.status&&(a.status=j),this._trackTransactionMetricsEvent(s,y.TransactionMetaMetricsEvent.finalized,undefined,a),this.txStateManager.updateTransaction(s,"transactions#confirmTransaction - add txReceipt"),s.type===y.TransactionType.swap&&await this.updatePostTxBalance({txMeta:s,txId:e})}catch(e){d.default.error(e)}}async confirmExternalTransaction(e,t,r){if(await this.txStateManager.addExternalTransaction(e),!e)return;const n=e.id;try{const s=C.normalizeTxReceiptGasUsed(t.gasUsed);e.txReceipt={...t,gasUsed:s},r&&(e.baseFeePerGas=r),this.txStateManager.setTxStatusConfirmed(n),this._markNonceDuplicatesDropped(n);const{submittedTime:i}=e,o={gas_used:s};i&&(o.completion_time=this._getTransactionCompletionTime(i)),"0x0"===t.status&&(o.status=j),this._trackTransactionMetricsEvent(e,y.TransactionMetaMetricsEvent.finalized,undefined,o),this.txStateManager.updateTransaction(e,"transactions#confirmTransaction - add txReceipt"),e.type===y.TransactionType.swap&&await this.updatePostTxBalance({txMeta:e,txId:n})}catch(e){d.default.error(e)}}async cancelTransaction(e,t){const r=this.txStateManager.getTransaction(e);this.txStateManager.setTxStatusRejected(e),this._rejectApproval(r),this._trackTransactionMetricsEvent(r,y.TransactionMetaMetricsEvent.rejected,t)}setTxHash(e,t){const r=this.txStateManager.getTransaction(e);r.hash=t,this.txStateManager.updateTransaction(r,"transactions#setTxHash")}async createTransactionEventFragment(e,t,r){const n=this.txStateManager.getTransaction(e),{properties:s,sensitiveProperties:i}=await this._buildEventFragmentProperties(n);this._createTransactionEventFragment(n,t,s,i,r)}_mapMethods(){this.getState=()=>this.memStore.getState(),this.getSelectedAddress=()=>this.preferencesStore.getState().selectedAddress,this.getUnapprovedTxCount=()=>Object.keys(this.txStateManager.getUnapprovedTxList()).length,this.getPendingTxCount=e=>this.txStateManager.getPendingTransactions(e).length,this.getTransactions=e=>this.txStateManager.getTransactions(e),this.getAdvancedGasFee=()=>this.preferencesStore.getState().advancedGasFee}async _updatePendingTxsAfterFirstBlock(){await this.blockTracker.getLatestBlock(),await this.pendingTxTracker.updatePendingTxs()}_onBootCleanUp(){this.txStateManager.getTransactions({searchCriteria:{status:y.TransactionStatus.unapproved,loadingDefaults:!0}}).forEach((e=>{this.addTxGasDefaults(e).then((e=>{e.loadingDefaults=!1,this.txStateManager.updateTransaction(e,"transactions: gas estimation for tx on boot")})).catch((t=>{const r=this.txStateManager.getTransaction(e.id);r.loadingDefaults=!1,this.txStateManager.updateTransaction(r,"failed to estimate gas during boot cleanup."),this._failTransaction(r.id,t)}))})),this.txStateManager.getTransactions({searchCriteria:{status:y.TransactionStatus.approved}}).forEach((e=>{this.approveTransaction(e.id)}))}_setupListeners(){this.txStateManager.on("tx:status-update",this.emit.bind(this,"tx:status-update")),this._setupBlockTrackerListener(),this.pendingTxTracker.on("tx:warning",(e=>{this.txStateManager.updateTransaction(e,"transactions/pending-tx-tracker#event: tx:warning")})),this.pendingTxTracker.on("tx:failed",((e,t)=>{this._failTransaction(e,t)})),this.pendingTxTracker.on("tx:confirmed",((e,t,r,n)=>this.confirmTransaction(e,t,r,n))),this.pendingTxTracker.on("tx:dropped",(e=>{this._dropTransaction(e)})),this.pendingTxTracker.on("tx:block-update",((e,t)=>{e.firstRetryBlockNumber||(e.firstRetryBlockNumber=t,this.txStateManager.updateTransaction(e,"transactions/pending-tx-tracker#event: tx:block-update"))})),this.pendingTxTracker.on("tx:retry",(e=>{"retryCount"in e||(e.retryCount=0),e.retryCount+=1,this.txStateManager.updateTransaction(e,"transactions/pending-tx-tracker#event: tx:retry")}))}_markNonceDuplicatesDropped(e){const t=this.txStateManager.getTransaction(e),{nonce:r,from:n}=t.txParams,s=this.txStateManager.getTransactions({searchCriteria:{nonce:r,from:n}});s.length&&s.forEach((r=>{r.id!==e&&(r.replacedBy=t.hash,r.replacedById=t.id,this.txStateManager.updateTransaction(t,"transactions/pending-tx-tracker#event: tx:confirmed reference to confirmed txHash with same nonce"),r.status!==y.TransactionStatus.failed&&this._dropTransaction(r.id))}))}_setupBlockTrackerListener(){let e=!1;const t=this._onLatestBlock.bind(this),{blockTracker:r,txStateManager:n}=this;function s(){const s=n.getPendingTransactions();!e&&s.length>0?(r.on("latest",t),e=!0):e&&!s.length&&(r.removeListener("latest",t),e=!1)}n.on("tx:status-update",s),s()}async _onLatestBlock(e){try{await this.pendingTxTracker.updatePendingTxs()}catch(e){d.default.error(e)}try{await this.pendingTxTracker.resubmitPendingTxs(e)}catch(e){d.default.error(e)}}_updateMemstore(){const e=this.txStateManager.getUnapprovedTxList(),t=this.txStateManager.getTransactions({limit:100});this.memStore.updateState({unapprovedTxs:e,currentNetworkTxList:t})}_calculateTransactionsCost(e,t){let r="0x0";null!=t&&t.txReceipt&&(r=(0,E.calcGasTotal)(t.txReceipt.gasUsed,t.txReceipt.effectiveGasPrice));const n=(0,E.calcGasTotal)(e.txReceipt.gasUsed,e.txReceipt.effectiveGasPrice),s=new l.default(n,16).plus(r,16).toString(16);return{approvalGasCostInEth:Number((0,T.hexWEIToDecETH)(r)),tradeGasCostInEth:Number((0,T.hexWEIToDecETH)(n)),tradeAndApprovalGasCostInEth:Number((0,T.hexWEIToDecETH)(s))}}_trackSwapsMetrics(e,t){if(this._getParticipateInMetrics()&&e.swapMetaData)if("0x0"===e.txReceipt.status)this._trackMetaMetricsEvent({event:"Swap Failed",sensitiveProperties:{...e.swapMetaData},category:v.MetaMetricsEventCategory.Swaps});else{const r=(0,E.getSwapsTokensReceivedFromTxMeta)(e.destinationTokenSymbol,e,e.destinationTokenAddress,e.txParams.from,e.destinationTokenDecimals,t,e.chainId),n=r?`${new l.default(r,10).div(e.swapMetaData.token_to_amount,10).times(100).round(2)}%`:null,s=e.txReceipt.gasUsed&&e.swapMetaData.estimated_gas?`${new l.default(e.txReceipt.gasUsed,16).div(e.swapMetaData.estimated_gas,10).times(100).round(2)}%`:null,i=this._calculateTransactionsCost(e,t);this._trackMetaMetricsEvent({event:"Swap Completed",category:v.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...e.swapMetaData,token_to_amount_received:r,quote_vs_executionRatio:n,estimated_vs_used_gasRatio:s,approval_gas_cost_in_eth:i.approvalGasCostInEth,trade_gas_cost_in_eth:i.tradeGasCostInEth,trade_and_approval_gas_cost_in_eth:i.tradeAndApprovalGasCostInEth}})}}_allowanceAmountInRelationToDappProposedValue(e,t,r){return e===y.TransactionApprovalAmountType.custom&&t&&r?`${new l.default(t,10).div(r,10).times(100).round(2)}`:null}_allowanceAmountInRelationToTokenBalance(e,t,r){return(e===y.TransactionApprovalAmountType.custom||e===y.TransactionApprovalAmountType.dappProposed)&&t&&r?`${new l.default(t,16).div(r,10).times(100).round(2)}`:null}async _buildEventFragmentProperties(e,t){const{type:r,time:n,status:s,chainId:i,origin:o,txParams:{gasPrice:a,gas:c,maxFeePerGas:u,maxPriorityFeePerGas:h,estimateSuggested:d,estimateUsed:l},defaultGasEstimates:p,originalType:f,replacedById:g,metamaskNetworkId:m,customTokenAmount:T,dappProposedTokenAmount:w,currentTokenBalance:v,originalApprovalAmount:k,finalApprovalAmount:x,contractMethodName:I,securityProviderResponse:P}=e,A=o===S.ORIGIN_METAMASK?"user":"dapp",{assetType:C,tokenStandard:O}=await(0,_.determineTransactionAssetType)(e,this.query,this.getTokenStandardAndDetails),R={};if((0,_.isEIP1559Transaction)(e)?(R.max_fee_per_gas=u,R.max_priority_fee_per_gas=h):R.gas_price=a,p){const{estimateType:t}=p;if(t){R.default_estimate=t;let r=e.defaultGasEstimates.maxFeePerGas,n=e.defaultGasEstimates.maxPriorityFeePerGas;if([b.GasRecommendations.low,b.GasRecommendations.medium,b.GasRecommendations.high].includes(t)){var M,D;const{gasFeeEstimates:e}=await this._getEIP1559GasFeeEstimates();var j,N;if(null!=e&&null!==(M=e[t])&&void 0!==M&&M.suggestedMaxFeePerGas)r=null===(j=e[t])||void 0===j?void 0:j.suggestedMaxFeePerGas,R.default_max_fee_per_gas=r;if(null!=e&&null!==(D=e[t])&&void 0!==D&&D.suggestedMaxPriorityFeePerGas)n=null===(N=e[t])||void 0===N?void 0:N.suggestedMaxPriorityFeePerGas,R.default_max_priority_fee_per_gas=n}}e.defaultGasEstimates.gas&&(R.default_gas=e.defaultGasEstimates.gas),e.defaultGasEstimates.gasPrice&&(R.default_gas_price=e.defaultGasEstimates.gasPrice)}d&&(R.estimate_suggested=d),l&&(R.estimate_used=l),null!=t&&t.gas_used&&(R.gas_used=t.gas_used);const B=this._getGasValuesInGWEI(R);let q="0";e.txParams.maxFeePerGas&&(q="2");const F=[y.TransactionType.contractInteraction,y.TransactionType.tokenMethodApprove,y.TransactionType.tokenMethodSafeTransferFrom,y.TransactionType.tokenMethodSetApprovalForAll,y.TransactionType.tokenMethodTransfer,y.TransactionType.tokenMethodTransferFrom,y.TransactionType.smart,y.TransactionType.swap,y.TransactionType.swapApproval].includes(r),U="Approve";let L,K,$,G,H=y.TransactionType.simpleSend;r===y.TransactionType.cancel?H=y.TransactionType.cancel:r===y.TransactionType.retry?H=f:r===y.TransactionType.deployContract?H=y.TransactionType.deployContract:F&&(H=y.TransactionType.contractInteraction,K=I,K===U&&O===y.TokenStandard.ERC20&&("0"===w||"0"===T?L=y.TransactionApprovalAmountType.revoke:T?L=y.TransactionApprovalAmountType.custom:w&&(L=y.TransactionApprovalAmountType.dappProposed),$=this._allowanceAmountInRelationToDappProposedValue(L,k,x),G=this._allowanceAmountInRelationToTokenBalance(L,w,v)));const z=this._getTransaction(g),Y={RETRY:y.TransactionType.retry,CANCEL:y.TransactionType.cancel,SAME_NONCE:"other"};let W,V;null!=t&&t.dropped&&(W=Y.SAME_NONCE,(null==z?void 0:z.type)===y.TransactionType.cancel?W=Y.CANCEL:(null==z?void 0:z.type)===y.TransactionType.retry&&(W=Y.RETRY)),V=1===(null==P?void 0:P.flagAsDangerous)?["flagged_as_malicious"]:2===(null==P?void 0:P.flagAsDangerous)?["flagged_as_safety_unknown"]:null;let J={chain_id:i,referrer:o,source:A,network:m,eip_1559_version:q,gas_edit_type:"none",gas_edit_attempted:"none",account_type:await this.getAccountType(this.getSelectedAddress()),device_model:await this.getDeviceModel(this.getSelectedAddress()),asset_type:C,token_standard:O,transaction_type:H,transaction_speed_up:r===y.TransactionType.retry,ui_customizations:V};K===U&&(J={...J,transaction_approval_amount_type:L});let Q={status:s,transaction_envelope_type:(0,_.isEIP1559Transaction)(e)?E.TRANSACTION_ENVELOPE_TYPE_NAMES.FEE_MARKET:E.TRANSACTION_ENVELOPE_TYPE_NAMES.LEGACY,first_seen:n,gas_limit:c,transaction_contract_method:K,transaction_replaced:W,...t,...B};return K===U&&(Q={...Q,transaction_approval_amount_vs_balance_ratio:G,transaction_approval_amount_vs_proposed_ratio:$}),{properties:J,sensitiveProperties:Q}}_createTransactionEventFragment(e,t,r,n,s){const i=`transaction-${[y.TransactionMetaMetricsEvent.finalized,y.TransactionMetaMetricsEvent.submitted].includes(t)?"submitted":"added"}-${e.id}`;if(void 0===this.getEventFragmentById(i))switch(t){case y.TransactionMetaMetricsEvent.added:this.createEventFragment({category:v.MetaMetricsEventCategory.Transactions,initialEvent:y.TransactionMetaMetricsEvent.added,successEvent:y.TransactionMetaMetricsEvent.approved,failureEvent:y.TransactionMetaMetricsEvent.rejected,properties:r,sensitiveProperties:n,persist:!0,uniqueIdentifier:i,actionId:s});break;case y.TransactionMetaMetricsEvent.approved:case y.TransactionMetaMetricsEvent.rejected:this.createEventFragment({category:v.MetaMetricsEventCategory.Transactions,successEvent:y.TransactionMetaMetricsEvent.approved,failureEvent:y.TransactionMetaMetricsEvent.rejected,properties:r,sensitiveProperties:n,persist:!0,uniqueIdentifier:i,actionId:s});break;case y.TransactionMetaMetricsEvent.submitted:this.createEventFragment({category:v.MetaMetricsEventCategory.Transactions,initialEvent:y.TransactionMetaMetricsEvent.submitted,successEvent:y.TransactionMetaMetricsEvent.finalized,properties:r,sensitiveProperties:n,persist:!0,uniqueIdentifier:i,actionId:s});break;case y.TransactionMetaMetricsEvent.finalized:this.createEventFragment({category:v.MetaMetricsEventCategory.Transactions,successEvent:y.TransactionMetaMetricsEvent.finalized,properties:r,sensitiveProperties:n,persist:!0,uniqueIdentifier:i,actionId:s})}}async _trackTransactionMetricsEvent(e,t,r,n={}){if(!e)return;const{properties:s,sensitiveProperties:i}=await this._buildEventFragmentProperties(e,n);let o;switch(this._createTransactionEventFragment(e,t,s,i,r),t){case y.TransactionMetaMetricsEvent.approved:o=`transaction-added-${e.id}`,this.updateEventFragment(o,{properties:s,sensitiveProperties:i}),this.finalizeEventFragment(o);break;case y.TransactionMetaMetricsEvent.rejected:o=`transaction-added-${e.id}`,this.updateEventFragment(o,{properties:s,sensitiveProperties:i}),this.finalizeEventFragment(o,{abandoned:!0});break;case y.TransactionMetaMetricsEvent.finalized:o=`transaction-submitted-${e.id}`,this.updateEventFragment(o,{properties:s,sensitiveProperties:i}),this.finalizeEventFragment(`transaction-submitted-${e.id}`)}}_getTransactionCompletionTime(e){return Math.round((Date.now()-e)/1e3).toString()}_getGasValuesInGWEI(e){const t={};for(const r in e)(0,i.isHexString)(e[r])?t[r]=(0,T.hexWEIToDecGWEI)(e[r]):t[r]=e[r];return t}_failTransaction(e,t,r){this.txStateManager.setTxStatusFailed(e,t);const n=this.txStateManager.getTransaction(e);this._trackTransactionMetricsEvent(n,y.TransactionMetaMetricsEvent.finalized,r,{error:t.message})}_dropTransaction(e){this.txStateManager.setTxStatusDropped(e);const t=this.txStateManager.getTransaction(e);this._trackTransactionMetricsEvent(t,y.TransactionMetaMetricsEvent.finalized,undefined,{dropped:!0})}_requestApproval(e){const t=this._getApprovalId(e),{origin:r}=e,n=S.MESSAGE_TYPE.TRANSACTION,s={txId:e.id};this.messagingSystem.call("ApprovalController:addRequest",{id:t,origin:r,type:n,requestData:s},!0).catch((()=>{}))}_acceptApproval(e){const t=this._getApprovalId(e);try{this.messagingSystem.call("ApprovalController:acceptRequest",t)}catch(e){d.default.error("Failed to accept transaction approval request",e)}}_rejectApproval(e){const t=this._getApprovalId(e);try{this.messagingSystem.call("ApprovalController:rejectRequest",t,new Error("Rejected"))}catch(e){d.default.error("Failed to reject transaction approval request",e)}}_getApprovalId(e){return String(e.id)}}r.default=N}}},{package:"$root$",file:"app/scripts/controllers/transactions/index.js"}],[3007,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){for(var n=self.crypto||self.msCrypto,s="-_",i=36;i--;)s+=i.toString(36);for(i=36;i---10;)s+=i.toString(36).toUpperCase();t.exports=function(e){var t="",r=n.getRandomValues(new Uint8Array(e||21));for(i=e||21;i--;)t+=s[63&r[i]];return t}}}},{package:"nanoid",file:"node_modules/nanoid/index.browser.js"}],[3012,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();t.exports=r=n.fetch,n.fetch&&(r.default=n.fetch.bind(n)),r.Headers=n.Headers,r.Request=n.Request,r.Response=n.Response}}},{package:"node-fetch",file:"node_modules/node-fetch/browser.js"}],[3015,{assert:1832,"await-semaphore":1840,"ethjs-query":2383},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("ethjs-query"),s=e("assert"),i=e("await-semaphore").Mutex;t.exports=class{constructor({provider:e,blockTracker:t,getPendingTransactions:r,getConfirmedTransactions:s}){this.provider=e,this.blockTracker=t,this.ethQuery=new n(e),this.getPendingTransactions=r,this.getConfirmedTransactions=s,this.lockMap={}}async getGlobalLock(){const e=this._lookupMutex("global");return{releaseLock:await e.acquire()}}async getNonceLock(e){await this._globalMutexFree();const t=await this._takeMutex(e);try{const r={},n=await this._getNetworkNextNonce(e),i=this._getHighestLocallyConfirmed(e),o=n.nonce,a=Math.max(o,i),c=this.getPendingTransactions(e),u=this._getHighestContinuousFrom(c,a)||0;r.params={highestLocallyConfirmed:i,highestSuggested:a,nextNetworkNonce:o},r.local=u,r.network=n;const h=Math.max(n.nonce,u.nonce);return s(Number.isInteger(h),`nonce-tracker - nextNonce is not an integer - got: (${typeof h}) "${h}"`),{nextNonce:h,nonceDetails:r,releaseLock:t}}catch(e){throw t(),e}}async _globalMutexFree(){const e=this._lookupMutex("global");(await e.acquire())()}async _takeMutex(e){const t=this._lookupMutex(e);return await t.acquire()}_lookupMutex(e){let t=this.lockMap[e];return t||(t=new i,this.lockMap[e]=t),t}async _getNetworkNextNonce(e){const t=await this.blockTracker.getLatestBlock(),r=(await this.ethQuery.getTransactionCount(e,t)).toNumber();s(Number.isInteger(r),`nonce-tracker - baseCount is not an integer - got: (${typeof r}) "${r}"`);return{name:"network",nonce:r,details:{blockNumber:t,baseCount:r}}}_getHighestLocallyConfirmed(e){const t=this.getConfirmedTransactions(e),r=this._getHighestNonce(t);return Number.isInteger(r)?r+1:0}_getHighestNonce(e){const t=e.map((e=>{const t=e.txParams.nonce;return s(typeof t,"string","nonces should be hex strings"),parseInt(t,16)}));return Math.max.apply(null,t)}_getHighestContinuousFrom(e,t){const r=e.map((e=>{const t=e.txParams.nonce;return s(typeof t,"string","nonces should be hex strings"),parseInt(t,16)}));let n=t;for(;r.includes(n);)n++;return{name:"local",nonce:n,details:{startPoint:t,highest:n}}}}}}},{package:"nonce-tracker",file:"node_modules/nonce-tracker/index.js"}],[3027,{"safe-event-emitter":3262,xtend:3397},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){e("xtend");const n=e("safe-event-emitter");t.exports=class extends n{constructor(e={}){super(),this._state=e}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState(),r=Object.assign({},t,e);this.putState(r)}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}}}},{package:"@metamask/eth-keyring-controller>obs-store",file:"node_modules/obs-store/index.js"}],[3058,{"./src/index-light":3064},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./src/index-light")}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/light.js"}],[3059,{"./enum":3062,"./util":3081},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r,s=e("./enum"),i=e("./util");function o(e,t,r,n){if(t.resolvedType)if(t.resolvedType instanceof s){e("switch(d%s){",n);for(var i=t.resolvedType.values,o=Object.keys(i),a=0;a<o.length;++a)t.repeated&&i[o[a]]===t.typeDefault&&e("default:"),e("case%j:",o[a])("case %i:",i[o[a]])("m%s=%j",n,i[o[a]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,c)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function a(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof s?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var i=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,i?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=i.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var a=t[n].resolve(),c=i.safeProp(a.name);a.map?(r("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),o(r,a,n,c+"[ks[i]]")("}")("}")):a.repeated?(r("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),o(r,a,n,c+"[i]")("}")("}")):(a.resolvedType instanceof s||r("if(d%s!=null){",c),o(r,a,n,c),a.resolvedType instanceof s||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(i.compareFieldsById);if(!t.length)return i.codegen()("return {}");for(var r=i.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],o=[],c=[],u=0;u<t.length;++u)t[u].partOf||(t[u].resolve().repeated?n:t[u].map?o:c).push(t[u]);if(n.length){for(r("if(o.arrays||o.defaults){"),u=0;u<n.length;++u)r("d%s=[]",i.safeProp(n[u].name));r("}")}if(o.length){for(r("if(o.objects||o.defaults){"),u=0;u<o.length;++u)r("d%s={}",i.safeProp(o[u].name));r("}")}if(c.length){for(r("if(o.defaults){"),u=0;u<c.length;++u){var h=c[u],d=i.safeProp(h.name);if(h.resolvedType instanceof s)r("d%s=o.enums===String?%j:%j",d,h.resolvedType.valuesById[h.typeDefault],h.typeDefault);else if(h.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",h.typeDefault.low,h.typeDefault.high,h.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,h.typeDefault.toString(),h.typeDefault.toNumber());else if(h.bytes){var l="["+Array.prototype.slice.call(h.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,h.typeDefault))("else{")("d%s=%s",d,l)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else r("d%s=%j",d,h.typeDefault)}r("}")}var p=!1;for(u=0;u<t.length;++u){h=t[u];var f=e._fieldsArray.indexOf(h);d=i.safeProp(h.name);h.map?(p||(p=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),a(r,h,f,d+"[ks2[j]]")("}")):h.repeated?(r("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),a(r,h,f,d+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",d,h.name),a(r,h,f,d),h.partOf&&r("if(o.oneofs)")("d%s=%j",i.safeProp(h.partOf.name),h.name)),r("}")}return r("return d")}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/converter.js"}],[3060,{"./enum":3062,"./types":3080,"./util":3081},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){var t=i.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break");t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var a=e._fieldsArray[r].resolve(),c=a.resolvedType instanceof n?"int32":a.type,u="m"+i.safeProp(a.name);t("case %i:",a.id),a.map?(t("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),s.defaults[a.keyType]!==undefined?t("k=%j",s.defaults[a.keyType]):t("k=null"),s.defaults[c]!==undefined?t("value=%j",s.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),s.basic[c]===undefined?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),s.long[a.keyType]!==undefined?t('%s[typeof k==="object"?util.longToHash(k):k]=value',u):t("%s[k]=value",u)):a.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),s.packed[c]!==undefined&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,c)("}else"),s.basic[c]===undefined?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,r):t("%s.push(r.%s())",u,c)):s.basic[c]===undefined?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,r):t("%s=r.%s()",u,c),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var h=e._fieldsArray[r];h.required&&t("if(!m.hasOwnProperty(%j))",h.name)("throw util.ProtocolError(%j,{instance:m})",o(h))}return t("return m")};var n=e("./enum"),s=e("./types"),i=e("./util");function o(e){return"missing required '"+e.name+"'"}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/decoder.js"}],[3061,{"./enum":3062,"./types":3080,"./util":3081},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){for(var t,r=i.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(i.compareFieldsById),c=0;c<a.length;++c){var u=a[c].resolve(),h=e._fieldsArray.indexOf(u),d=u.resolvedType instanceof n?"int32":u.type,l=s.basic[d];t="m"+i.safeProp(u.name),u.map?(r("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|s.mapKey[u.keyType],u.keyType),l===undefined?r("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",h,t):r(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|l,d,t),r("}")("}")):u.repeated?(r("if(%s!=null&&%s.length){",t,t),u.packed&&s.packed[d]!==undefined?r("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",d,t)("w.ldelim()"):(r("for(var i=0;i<%s.length;++i)",t),l===undefined?o(r,u,h,t+"[i]"):r("w.uint32(%i).%s(%s[i])",(u.id<<3|l)>>>0,d,t)),r("}")):(u.optional&&r("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,u.name),l===undefined?o(r,u,h,t):r("w.uint32(%i).%s(%s)",(u.id<<3|l)>>>0,d,t))}return r("return w")};var n=e("./enum"),s=e("./types"),i=e("./util");function o(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/encoder.js"}],[3062,{"./namespace":3069,"./object":3070,"./util":3081},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=o;var n=e("./object");((o.prototype=Object.create(n.prototype)).constructor=o).className="Enum";var s=e("./namespace"),i=e("./util");function o(e,t,r,s,i){if(n.call(this,e,r),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=s,this.comments=i||{},this.reserved=undefined,t)for(var o=Object.keys(t),a=0;a<o.length;++a)"number"==typeof t[o[a]]&&(this.valuesById[this.values[o[a]]=t[o[a]]]=o[a])}o.fromJSON=function(e,t){var r=new o(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",t?this.comment:undefined,"comments",t?this.comments:undefined])},o.prototype.add=function(e,t,r){if(!i.isString(e))throw TypeError("name must be a string");if(!i.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==undefined)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=r||null,this},o.prototype.remove=function(e){if(!i.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},o.prototype.isReservedId=function(e){return s.isReservedId(this.reserved,e)},o.prototype.isReservedName=function(e){return s.isReservedName(this.reserved,e)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/enum.js"}],[3063,{"./enum":3062,"./object":3070,"./types":3080,"./util":3081},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=u;var n=e("./object");((u.prototype=Object.create(n.prototype)).constructor=u).className="Field";var s,i=e("./enum"),o=e("./types"),a=e("./util"),c=/^required|optional|repeated$/;function u(e,t,r,s,i,u,h){if(a.isObject(s)?(h=i,u=s,s=i=undefined):a.isObject(i)&&(h=u,u=i,i=undefined),n.call(this,e,u),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(r))throw TypeError("type must be a string");if(s!==undefined&&!c.test(s=s.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(i!==undefined&&!a.isString(i))throw TypeError("extend must be a string");"proto3_optional"===s&&(s="optional"),this.rule=s&&"optional"!==s?s:undefined,this.type=r,this.id=t,this.extend=i||undefined,this.required="required"===s,this.optional=!this.required,this.repeated="repeated"===s,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&o.long[r]!==undefined,this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=h}u.fromJSON=function(e,t){return new u(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),n.prototype.setOption.call(this,e,t,r)},u.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},u.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=o.defaults[this.type])===undefined&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof s?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof i&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof i)||delete this.options.packed,Object.keys(this.options).length||(this.options=undefined)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof s&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this)},u.d=function(e,t,r,n){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(s,i){a.decorateType(s.constructor).add(new u(i,e,t,r,{default:n}))}},u._configure=function(e){s=e}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/field.js"}],[3064,{"./converter":3059,"./decoder":3060,"./encoder":3061,"./enum":3062,"./field":3063,"./index-minimal":3065,"./mapfield":3066,"./message":3067,"./method":3068,"./namespace":3069,"./object":3070,"./oneof":3071,"./root":3074,"./service":3078,"./type":3079,"./types":3080,"./util":3081,"./verifier":3084,"./wrappers":3085},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=t.exports=e("./index-minimal");n.build="light",n.load=function(e,t,r){return"function"==typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)},n.loadSync=function(e,t){return t||(t=new n.Root),t.loadSync(e)},n.encoder=e("./encoder"),n.decoder=e("./decoder"),n.verifier=e("./verifier"),n.converter=e("./converter"),n.ReflectionObject=e("./object"),n.Namespace=e("./namespace"),n.Root=e("./root"),n.Enum=e("./enum"),n.Type=e("./type"),n.Field=e("./field"),n.OneOf=e("./oneof"),n.MapField=e("./mapfield"),n.Service=e("./service"),n.Method=e("./method"),n.Message=e("./message"),n.wrappers=e("./wrappers"),n.types=e("./types"),n.util=e("./util"),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/index-light.js"}],[3065,{"./reader":3072,"./reader_buffer":3073,"./roots":3075,"./rpc":3076,"./util/minimal":3083,"./writer":3086,"./writer_buffer":3087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r;function s(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=e("./writer"),n.BufferWriter=e("./writer_buffer"),n.Reader=e("./reader"),n.BufferReader=e("./reader_buffer"),n.util=e("./util/minimal"),n.rpc=e("./rpc"),n.roots=e("./roots"),n.configure=s,s()}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/index-minimal.js"}],[3066,{"./field":3063,"./types":3080,"./util":3081},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=o;var n=e("./field");((o.prototype=Object.create(n.prototype)).constructor=o).className="MapField";var s=e("./types"),i=e("./util");function o(e,t,r,s,o,a){if(n.call(this,e,t,s,undefined,undefined,o,a),!i.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(e,t){return new o(e,t.id,t.keyType,t.type,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},o.prototype.resolve=function(){if(this.resolved)return this;if(s.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},o.d=function(e,t,r){return"function"==typeof r?r=i.decorateType(r).name:r&&"object"==typeof r&&(r=i.decorateEnum(r).name),function(n,s){i.decorateType(n.constructor).add(new o(s,e,t,r))}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/mapfield.js"}],[3067,{"./util/minimal":3083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=s;var n=e("./util/minimal");function s(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}s.create=function(e){return this.$type.create(e)},s.encode=function(e,t){return this.$type.encode(e,t)},s.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},s.decode=function(e){return this.$type.decode(e)},s.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},s.verify=function(e){return this.$type.verify(e)},s.fromObject=function(e){return this.$type.fromObject(e)},s.toObject=function(e,t){return this.$type.toObject(e,t)},s.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/message.js"}],[3068,{"./object":3070,"./util":3081},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./object");((i.prototype=Object.create(n.prototype)).constructor=i).className="Method";var s=e("./util");function i(e,t,r,i,o,a,c,u,h){if(s.isObject(o)?(c=o,o=a=undefined):s.isObject(a)&&(c=a,a=undefined),t!==undefined&&!s.isString(t))throw TypeError("type must be a string");if(!s.isString(r))throw TypeError("requestType must be a string");if(!s.isString(i))throw TypeError("responseType must be a string");n.call(this,e,c),this.type=t||"rpc",this.requestType=r,this.requestStream=!!o||undefined,this.responseType=i,this.responseStream=!!a||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=h}i.fromJSON=function(e,t){return new i(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["type","rpc"!==this.type&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:undefined,"parsedOptions",this.parsedOptions])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/method.js"}],[3069,{"./field":3063,"./object":3070,"./oneof":3071,"./util":3081},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=d;var n=e("./object");((d.prototype=Object.create(n.prototype)).constructor=d).className="Namespace";var s,i,o,a=e("./field"),c=e("./oneof"),u=e("./util");function h(e,t){if(!e||!e.length)return undefined;for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}function d(e,t){n.call(this,e,t),this.nested=undefined,this._nestedArray=null}function l(e){return e._nestedArray=null,e}d.fromJSON=function(e,t){return new d(e,t.options).addJSON(t.nested)},d.arrayToJSON=h,d.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0;return!1},d.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(d.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=u.toArray(this.nested))}}),d.prototype.toJSON=function(e){return u.toObject(["options",this.options,"nested",h(this.nestedArray,e)])},d.prototype.addJSON=function(e){if(e)for(var t,r=Object.keys(e),n=0;n<r.length;++n)t=e[r[n]],this.add((t.fields!==undefined?s.fromJSON:t.values!==undefined?o.fromJSON:t.methods!==undefined?i.fromJSON:t.id!==undefined?a.fromJSON:d.fromJSON)(r[n],t));return this},d.prototype.get=function(e){return this.nested&&this.nested[e]||null},d.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof o)return this.nested[e].values;throw Error("no such enum: "+e)},d.prototype.add=function(e){if(!(e instanceof a&&e.extend!==undefined||e instanceof s||e instanceof o||e instanceof i||e instanceof d||e instanceof c))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof d&&e instanceof d)||t instanceof s||t instanceof i)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,n=0;n<r.length;++n)e.add(r[n]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),l(this)},d.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=undefined),e.onRemove(this),l(this)},d.prototype.define=function(e,t){if(u.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof d))throw Error("path conflicts with non-namespace objects")}else r.add(r=new d(n))}return t&&r.addJSON(t),r},d.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof d?e[t++].resolveAll():e[t++].resolve();return this.resolve()},d.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=undefined):t&&!Array.isArray(t)&&(t=[t]),u.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof d&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var s=0;s<this.nestedArray.length;++s)if(this._nestedArray[s]instanceof d&&(n=this._nestedArray[s].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},d.prototype.lookupType=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such type: "+e);return t},d.prototype.lookupEnum=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},d.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[s,o]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},d.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},d._configure=function(e,t,r){s=e,i=t,o=r}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/namespace.js"}],[3070,{"./util":3081},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=i,i.className="ReflectionObject";var n,s=e("./util");function i(e,t){if(!s.isString(e))throw TypeError("name must be a string");if(t&&!s.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(i.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),i.prototype.toJSON=function(){throw Error()},i.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},i.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},i.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},i.prototype.getOption=function(e){return this.options?this.options[e]:undefined},i.prototype.setOption=function(e,t,r){return r&&this.options&&this.options[e]!==undefined||((this.options||(this.options={}))[e]=t),this},i.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(r){var i=n.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(i){var o=i[e];s.setProperty(o,r,t)}else(i={})[e]=s.setProperty({},r,t),n.push(i)}else{var a={};a[e]=t,n.push(a)}return this},i.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},i.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},i._configure=function(e){n=e}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/object.js"}],[3071,{"./field":3063,"./object":3070,"./util":3081},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=o;var n=e("./object");((o.prototype=Object.create(n.prototype)).constructor=o).className="OneOf";var s=e("./field"),i=e("./util");function o(e,t,r,s){if(Array.isArray(t)||(r=t,t=undefined),n.call(this,e,r),t!==undefined&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=s}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}o.fromJSON=function(e,t){return new o(e,t.oneof,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:undefined])},o.prototype.add=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},o.prototype.remove=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},o.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var r=e.get(this.oneof[t]);r&&!r.partOf&&(r.partOf=this,this.fieldsArray.push(r))}a(this)},o.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},o.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){i.decorateType(t.constructor).add(new o(r,e)),Object.defineProperty(t,r,{get:i.oneOfGetter(e),set:i.oneOfSetter(e)})}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/oneof.js"}],[3072,{"./util/minimal":3083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=c;var n,s=e("./util/minimal"),i=s.LongBits,o=s.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,h="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},d=function(){return s.Buffer?function(e){return(c.create=function(e){return s.Buffer.isBuffer(e)?new n(e):h(e)})(e)}:h};function l(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=d(),c.prototype._slice=s.Array.prototype.subarray||s.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=s.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=s.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=d(),n._configure();var t=s.Long?"toLong":"toNumber";s.merge(c.prototype,{int64:function(){return l.call(this)[t](!1)},uint64:function(){return l.call(this)[t](!0)},sint64:function(){return l.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/reader.js"}],[3073,{"./reader":3072,"./util/minimal":3083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./reader");(i.prototype=Object.create(n.prototype)).constructor=i;var s=e("./util/minimal");function i(e){n.call(this,e)}i._configure=function(){s.Buffer&&(i.prototype._slice=s.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/reader_buffer.js"}],[3074,{"./enum":3062,"./field":3063,"./namespace":3069,"./oneof":3071,"./util":3081},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=d;var n=e("./namespace");((d.prototype=Object.create(n.prototype)).constructor=d).className="Root";var s,i,o,a=e("./field"),c=e("./enum"),u=e("./oneof"),h=e("./util");function d(e){n.call(this,"",e),this.deferred=[],this.files=[]}function l(){}d.fromJSON=function(e,t){return t||(t=new d),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},d.prototype.resolvePath=h.path.resolve,d.prototype.fetch=h.fetch,d.prototype.load=function e(t,r,n){"function"==typeof r&&(n=r,r=undefined);var s=this;if(!n)return h.asPromise(e,s,t,r);var a=n===l;function c(e,t){if(n){var r=n;if(n=null,a)throw e;r(e,t)}}function u(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in o)return r}return null}function d(e,t){try{if(h.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),h.isString(t)){i.filename=e;var n,o=i(t,s,r),d=0;if(o.imports)for(;d<o.imports.length;++d)(n=u(o.imports[d])||s.resolvePath(e,o.imports[d]))&&p(n);if(o.weakImports)for(d=0;d<o.weakImports.length;++d)(n=u(o.weakImports[d])||s.resolvePath(e,o.weakImports[d]))&&p(n,!0)}else s.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}a||f||c(null,s)}function p(e,t){if(!(s.files.indexOf(e)>-1))if(s.files.push(e),e in o)a?d(e,o[e]):(++f,setTimeout((function(){--f,d(e,o[e])})));else if(a){var r;try{r=h.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}d(e,r)}else++f,s.fetch(e,(function(r,i){--f,n&&(r?t?f||c(null,s):c(r):d(e,i))}))}var f=0;h.isString(t)&&(t=[t]);for(var g,y=0;y<t.length;++y)(g=s.resolvePath("",t[y]))&&p(g);return a?s:(f||c(null,s),undefined)},d.prototype.loadSync=function(e,t){if(!h.isNode)throw Error("not supported");return this.load(e,t,l)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new a(t.fullName,t.id,t.type,t.rule,undefined,t.options);return n.declaringField=t,t.extensionField=n,r.add(n),!0}return!1}d.prototype._handleAdd=function(e){if(e instanceof a)e.extend===undefined||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof c)p.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof u)){if(e instanceof s)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);p.test(e.name)&&(e.parent[e.name]=e)}},d.prototype._handleRemove=function(e){if(e instanceof a){if(e.extend!==undefined)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)p.test(e.name)&&delete e.parent[e.name];else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);p.test(e.name)&&delete e.parent[e.name]}},d._configure=function(e,t,r){s=e,i=t,o=r}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/root.js"}],[3075,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/roots.js"}],[3076,{"./rpc/service":3077},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.Service=e("./rpc/service")}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/rpc.js"}],[3077,{"../util/minimal":3083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=s;var n=e("../util/minimal");function s(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(s.prototype=Object.create(n.EventEmitter.prototype)).constructor=s,s.prototype.rpcCall=function e(t,r,s,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return n.asPromise(e,a,t,r,s,i);if(!a.rpcImpl)return setTimeout((function(){o(Error("already ended"))}),0),undefined;try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return a.emit("error",e,t),o(e);if(null===r)return a.end(!0),undefined;if(!(r instanceof s))try{r=s[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",r,t),o(null,r)}))}catch(e){return a.emit("error",e,t),setTimeout((function(){o(e)}),0),undefined}},s.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/rpc/service.js"}],[3078,{"./method":3068,"./namespace":3069,"./rpc":3076,"./util":3081},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=a;var n=e("./namespace");((a.prototype=Object.create(n.prototype)).constructor=a).className="Service";var s=e("./method"),i=e("./util"),o=e("./rpc");function a(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var r=new a(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),i=0;i<n.length;++i)r.add(s.fromJSON(n[i],t.methods[n[i]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},a.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return i.toObject(["options",t&&t.options||undefined,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||undefined,"comment",r?this.comment:undefined])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=i.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof s?(this.methods[e.name]=e,e.parent=this,c(this)):n.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof s){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return n.prototype.remove.call(this,e)},a.prototype.create=function(e,t,r){for(var n,s=new o.Service(e,t,r),a=0;a<this.methodsArray.length;++a){var c=i.lcFirst((n=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");s[c]=i.codegen(["r","c"],i.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return s}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/service.js"}],[3079,{"./converter":3059,"./decoder":3060,"./encoder":3061,"./enum":3062,"./field":3063,"./mapfield":3066,"./message":3067,"./namespace":3069,"./oneof":3071,"./reader":3072,"./service":3078,"./util":3081,"./verifier":3084,"./wrappers":3085,"./writer":3086},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=b;var n=e("./namespace");((b.prototype=Object.create(n.prototype)).constructor=b).className="Type";var s=e("./enum"),i=e("./oneof"),o=e("./field"),a=e("./mapfield"),c=e("./service"),u=e("./message"),h=e("./reader"),d=e("./writer"),l=e("./util"),p=e("./encoder"),f=e("./decoder"),g=e("./verifier"),y=e("./converter"),m=e("./wrappers");function b(e,t){n.call(this,e,t),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function T(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(b.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=l.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=l.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=b.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof u||((e.prototype=new u).constructor=e,l.merge(e.prototype,t)),e.$type=e.prototype.$type=this,l.merge(e,u,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:l.oneOfGetter(this._oneofsArray[r].oneof),set:l.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),b.generateConstructor=function(e){for(var t,r=l.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",l.safeProp(t.name)):t.repeated&&r("this%s=[]",l.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},b.fromJSON=function(e,t){var r=new b(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var u=Object.keys(t.fields),h=0;h<u.length;++h)r.add((void 0!==t.fields[u[h]].keyType?a.fromJSON:o.fromJSON)(u[h],t.fields[u[h]]));if(t.oneofs)for(u=Object.keys(t.oneofs),h=0;h<u.length;++h)r.add(i.fromJSON(u[h],t.oneofs[u[h]]));if(t.nested)for(u=Object.keys(t.nested),h=0;h<u.length;++h){var d=t.nested[u[h]];r.add((d.id!==undefined?o.fromJSON:d.fields!==undefined?b.fromJSON:d.values!==undefined?s.fromJSON:d.methods!==undefined?c.fromJSON:n.fromJSON)(u[h],d))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},b.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return l.toObject(["options",t&&t.options||undefined,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",t&&t.nested||undefined,"comment",r?this.comment:undefined])},b.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return n.prototype.resolveAll.call(this)},b.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},b.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&e.extend===undefined){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),T(this)}return e instanceof i?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),T(this)):n.prototype.add.call(this,e)},b.prototype.remove=function(e){if(e instanceof o&&e.extend===undefined){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),T(this)}if(e instanceof i){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),T(this)}return n.prototype.remove.call(this,e)},b.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},b.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},b.prototype.create=function(e){return new this.ctor(e)},b.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=p(this)({Writer:d,types:t,util:l}),this.decode=f(this)({Reader:h,types:t,util:l}),this.verify=g(this)({types:t,util:l}),this.fromObject=y.fromObject(this)({types:t,util:l}),this.toObject=y.toObject(this)({types:t,util:l});var n=m[e];if(n){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(s),s.toObject=this.toObject,this.toObject=n.toObject.bind(s)}return this},b.prototype.encode=function(e,t){return this.setup().encode(e,t)},b.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},b.prototype.decode=function(e,t){return this.setup().decode(e,t)},b.prototype.decodeDelimited=function(e){return e instanceof h||(e=h.create(e)),this.decode(e,e.uint32())},b.prototype.verify=function(e){return this.setup().verify(e)},b.prototype.fromObject=function(e){return this.setup().fromObject(e)},b.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},b.d=function(e){return function(t){l.decorateType(t,e)}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/type.js"}],[3080,{"./util":3081},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r,s=e("./util"),i=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var r=0,n={};for(t|=0;r<e.length;)n[i[r+t]]=e[r++];return n}n.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",s.emptyArray,null]),n.long=o([0,0,0,1,1],7),n.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/types.js"}],[3081,{"./enum":3062,"./root":3074,"./roots":3075,"./type":3079,"./util/minimal":3083,"@protobufjs/codegen":1402,"@protobufjs/fetch":1404,"@protobufjs/path":1407},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=t.exports=e("./util/minimal"),o=e("./roots");i.codegen=e("@protobufjs/codegen"),i.fetch=e("@protobufjs/fetch"),i.path=e("@protobufjs/path"),i.fs=i.inquire("fs"),i.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},i.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],s=e[r++];s!==undefined&&(t[n]=s)}return t};var a=/\\/g,c=/"/g;i.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},i.safeProp=function(e){return!/^[$\w_]+$/.test(e)||i.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},i.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;i.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(u,(function(e,t){return t.toUpperCase()}))},i.compareFieldsById=function(e,t){return e.id-t.id},i.decorateType=function(t,r){if(t.$type)return r&&t.$type.name!==r&&(i.decorateRoot.remove(t.$type),t.$type.name=r,i.decorateRoot.add(t.$type)),t.$type;n||(n=e("./type"));var s=new n(r||t.name);return i.decorateRoot.add(s),s.ctor=t,Object.defineProperty(t,"$type",{value:s,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:s,enumerable:!1}),s};var h=0;i.decorateEnum=function(t){if(t.$type)return t.$type;s||(s=e("./enum"));var r=new s("Enum"+h++,t);return i.decorateRoot.add(r),Object.defineProperty(t,"$type",{value:r,enumerable:!1}),r},i.setProperty=function(e,t,r){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,r,n){var s=r.shift();if("__proto__"===s)return t;if(r.length>0)t[s]=e(t[s]||{},r,n);else{var i=t[s];i&&(n=[].concat(i).concat(n)),t[s]=n}return t}(e,t=t.split("."),r)},Object.defineProperty(i,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(e("./root")))}})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/util.js"}],[3082,{"../util/minimal":3083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=s;var n=e("../util/minimal");function s(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=s.zero=new s(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=s.zeroHash="\0\0\0\0\0\0\0\0";s.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new s(r,n)},s.from=function(e){if("number"==typeof e)return s.fromNumber(e);if(n.isString(e)){if(!n.Long)return s.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new s(e.low>>>0,e.high>>>0):i},s.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},s.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;s.fromHash=function(e){return e===o?i:new s((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},s.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},s.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},s.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},s.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/util/longbits.js"}],[3083,{"./longbits":3082,"@protobufjs/aspromise":1400,"@protobufjs/base64":1401,"@protobufjs/eventemitter":1403,"@protobufjs/float":1405,"@protobufjs/inquire":1406,"@protobufjs/pool":1408,"@protobufjs/utf8":1409},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r;function s(e,t,r){for(var n=Object.keys(t),s=0;s<n.length;++s)e[n[s]]!==undefined&&r||(e[n[s]]=t[n[s]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&s(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=e("@protobufjs/aspromise"),n.base64=e("@protobufjs/base64"),n.EventEmitter=e("@protobufjs/eventemitter"),n.float=e("@protobufjs/float"),n.inquire=e("@protobufjs/inquire"),n.utf8=e("@protobufjs/utf8"),n.pool=e("@protobufjs/pool"),n.LongBits=e("./longbits"),n.isNode=Boolean("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),n.global=n.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=s,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&this[e[r]]!==undefined&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/util/minimal.js"}],[3084,{"./enum":3062,"./util":3081},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){var t=s.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,n={};r.length&&t("var p={}");for(var c=0;c<e.fieldsArray.length;++c){var u=e._fieldsArray[c].resolve(),h="m"+s.safeProp(u.name);if(u.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",h,u.name),u.map)t("if(!util.isObject(%s))",h)("return%j",i(u,"object"))("var k=Object.keys(%s)",h)("for(var i=0;i<k.length;++i){"),a(t,u,"k[i]"),o(t,u,c,h+"[k[i]]")("}");else if(u.repeated)t("if(!Array.isArray(%s))",h)("return%j",i(u,"array"))("for(var i=0;i<%s.length;++i){",h),o(t,u,c,h+"[i]")("}");else{if(u.partOf){var d=s.safeProp(u.partOf.name);1===n[u.partOf.name]&&t("if(p%s===1)",d)("return%j",u.partOf.name+": multiple values"),n[u.partOf.name]=1,t("p%s=1",d)}o(t,u,c,h)}u.optional&&t("}")}return t("return null")};var n=e("./enum"),s=e("./util");function i(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function o(e,t,r,s){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",s)("default:")("return%j",i(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),a=0;a<o.length;++a)e("case %i:",t.resolvedType.values[o[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,s)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",s)("return%j",i(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",s,s,s,s)("return%j",i(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',s)("return%j",i(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',s)("return%j",i(t,"boolean"));break;case"string":e("if(!util.isString(%s))",s)("return%j",i(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',s,s,s)("return%j",i(t,"buffer"))}return e}function a(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",i(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",i(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",i(t,"boolean key"))}return e}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/verifier.js"}],[3085,{"./message":3067},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r,s=e("./message");n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var n="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="",n="";if(t&&t.json&&e.type_url&&e.value){n=e.type_url.substring(e.type_url.lastIndexOf("/")+1),r=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var i=this.lookup(n);i&&(e=i.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof s){var o=e.$type.toObject(e,t);return""===r&&(r="type.googleapis.com/"),n=r+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),o["@type"]=n,o}return this.toObject(e,t)}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/wrappers.js"}],[3086,{"./util/minimal":3083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=d;var n,s=e("./util/minimal"),i=s.LongBits,o=s.base64,a=s.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=undefined,this.val=r}function u(){}function h(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var l=function(){return s.Buffer?function(){return(d.create=function(){return new n})()}:function(){return new d}};function p(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=undefined,this.val=t}function g(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=l(),d.alloc=function(e){return new s.Array(e)},s.Array!==Array&&(d.alloc=s.pool(d.alloc,s.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(g,10,i.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=i.from(e);return this._push(g,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(g,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=i.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(s.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(s.float.writeDoubleLE,8,e)};var m=s.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(s.isString(e)){var r=d.alloc(t=o.length(e));o.decode(e,r,0),e=r}return this.uint32(t)._push(m,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new h(this),this.head=this.tail=new c(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){n=e,d.create=l(),n._configure()}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/writer.js"}],[3087,{"./util/minimal":3083,"./writer":3086},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./writer");(i.prototype=Object.create(n.prototype)).constructor=i;var s=e("./util/minimal");function i(){n.call(this)}function o(e,t,r){e.length<40?s.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=s._Buffer_allocUnsafe,i.writeBytesBuffer=s.Buffer&&s.Buffer.prototype instanceof Uint8Array&&"set"===s.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},i.prototype.bytes=function(e){s.isString(e)&&(e=s._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=s.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},i._configure()}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/writer_buffer.js"}],[31,{"fast-json-patch":2599,lodash:2954},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.generateHistoryEntry=o,r.migrateFromSnapshotsToDiffs=function(e){return e.map(((t,r)=>0===r?t:o(e[r-1],t)))},r.replayHistory=function(e){return(0,i.cloneDeep)(e).reduce(((e,t)=>s.default.applyPatch(e,t).newDocument))},r.snapshotFromTxMeta=function(e){const t={...e};return delete t.history,(0,i.cloneDeep)(t)};var n,s=(n=e("fast-json-patch"))&&n.__esModule?n:{default:n},i=e("lodash");function o(e,t,r){const n=s.default.compare(e,t);return n[0]&&(r&&(n[0].note=r),n[0].timestamp=Date.now()),n}}}},{package:"$root$",file:"app/scripts/controllers/transactions/lib/tx-state-history-helpers.js"}],[32,{"../../../../../shared/constants/transaction":3426,"../../../../../shared/modules/hexstring-utils":3444,"../../../../../shared/modules/transaction.utils":3453,"../../../lib/util":81,"@ethersproject/abi":399,"eth-rpc-errors":2286,"human-standard-token-abi":2709},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getFinalStates=function(){return[c.TransactionStatus.rejected,c.TransactionStatus.confirmed,c.TransactionStatus.failed,c.TransactionStatus.dropped]},r.normalizeAndValidateTxParams=function(e,t=!0){const r=l(e,t);return y(r),r},r.normalizeTxParams=l,r.normalizeTxReceiptGasUsed=function(e){return"string"==typeof e?e:e.toString(16)},r.validateConfirmedExternalTransaction=void 0,r.validateFrom=b,r.validateInputData=m,r.validateRecipient=T,r.validateTxParams=y;var n,s=e("eth-rpc-errors"),i=e("@ethersproject/abi"),o=(n=e("human-standard-token-abi"))&&n.__esModule?n:{default:n},a=e("../../../lib/util"),c=e("../../../../../shared/constants/transaction"),u=e("../../../../../shared/modules/transaction.utils"),h=e("../../../../../shared/modules/hexstring-utils");const d={from:a.addHexPrefix,to:(e,t)=>t?(0,a.addHexPrefix)(e).toLowerCase():(0,a.addHexPrefix)(e),nonce:a.addHexPrefix,value:a.addHexPrefix,data:a.addHexPrefix,gas:a.addHexPrefix,gasPrice:a.addHexPrefix,maxFeePerGas:a.addHexPrefix,maxPriorityFeePerGas:a.addHexPrefix,type:a.addHexPrefix,estimateSuggested:e=>e,estimateUsed:e=>e};function l(e,t=!0){const r={};for(const n in d)e[n]&&(r[n]=d[n](e[n],t));return r}function p(e,t,r){if(void 0!==e[r])throw s.ethErrors.rpc.invalidParams(`Invalid transaction params: specified ${t} but also included ${r}, these cannot be mixed`)}function f(e,t){if("string"!=typeof e[t])throw s.ethErrors.rpc.invalidParams(`Invalid transaction params: ${t} is not a string. got: (${e[t]})`)}function g(e,t){switch(t){case"maxFeePerGas":case"maxPriorityFeePerGas":if(e.type&&e.type!==c.TransactionEnvelopeType.feeMarket)throw s.ethErrors.rpc.invalidParams(`Invalid transaction envelope type: specified type "${e.type}" but including maxFeePerGas and maxPriorityFeePerGas requires type: "${c.TransactionEnvelopeType.feeMarket}"`);break;default:if(e.type&&e.type===c.TransactionEnvelopeType.feeMarket)throw s.ethErrors.rpc.invalidParams(`Invalid transaction envelope type: specified type "${e.type}" but included a gasPrice instead of maxFeePerGas and maxPriorityFeePerGas`)}}function y(e,t=!0){if(!e||"object"!=typeof e||Array.isArray(e))throw s.ethErrors.rpc.invalidParams("Invalid transaction params: must be an object.");if(!e.to&&!e.data)throw s.ethErrors.rpc.invalidParams('Invalid transaction params: must specify "data" for contract deployments, or "to" (and optionally "data") for all other types of transactions.');if((0,u.isEIP1559Transaction)({txParams:e})&&!t)throw s.ethErrors.rpc.invalidParams("Invalid transaction params: params specify an EIP-1559 transaction but the current network does not support EIP-1559");Object.entries(e).forEach((([t,r])=>{switch(t){case"from":b(e);break;case"to":T(e);break;case"gasPrice":g(e,"gasPrice"),p(e,"gasPrice","maxFeePerGas"),p(e,"gasPrice","maxPriorityFeePerGas"),f(e,"gasPrice");break;case"maxFeePerGas":g(e,"maxFeePerGas"),p(e,"maxFeePerGas","gasPrice"),f(e,"maxFeePerGas");break;case"maxPriorityFeePerGas":g(e,"maxPriorityFeePerGas"),p(e,"maxPriorityFeePerGas","gasPrice"),f(e,"maxPriorityFeePerGas");break;case"value":if(f(e,"value"),r.toString().includes("-"))throw s.ethErrors.rpc.invalidParams(`Invalid transaction value "${r}": not a positive number.`);if(r.toString().includes("."))throw s.ethErrors.rpc.invalidParams(`Invalid transaction value of "${r}": number must be in wei.`);if(!r.match(/^0x[a-fA-F0-9]+$/u))throw s.ethErrors.rpc.invalidParams(`Invalid transaction value of "${r}": not a valid hex string.`);break;case"chainId":if("number"!=typeof r&&"string"!=typeof r)throw s.ethErrors.rpc.invalidParams(`Invalid transaction params: ${t} is not a Number or hex string. got: (${r})`);break;case"data":m(r),f(e,"data");break;default:f(e,t)}}))}function m(e){if(null!==e){const t=new i.Interface(o.default);try{t.parseTransaction({data:e})}catch(e){if(e.message.match(/BUFFER_OVERRUN/))throw s.ethErrors.rpc.invalidParams("Invalid transaction params: data out-of-bounds, BUFFER_OVERRUN.")}}}function b(e){if("string"!=typeof e.from)throw s.ethErrors.rpc.invalidParams(`Invalid "from" address "${e.from}": not a string.`);if(!(0,h.isValidHexAddress)(e.from,{allowNonPrefixed:!1}))throw s.ethErrors.rpc.invalidParams('Invalid "from" address.')}function T(e){if("0x"===e.to||null===e.to){if(!e.data)throw s.ethErrors.rpc.invalidParams('Invalid "to" address.');delete e.to}else if(e.to!==undefined&&!(0,h.isValidHexAddress)(e.to,{allowNonPrefixed:!1}))throw s.ethErrors.rpc.invalidParams('Invalid "to" address.');return e}r.validateConfirmedExternalTransaction=({txMeta:e,pendingTransactions:t,confirmedTransactions:r}={})=>{if(!e||!e.txParams)throw s.ethErrors.rpc.invalidParams('"txMeta" or "txMeta.txParams" is missing');if(e.status!==c.TransactionStatus.confirmed)throw s.ethErrors.rpc.invalidParams('External transaction status should be "confirmed"');const n=e.txParams.nonce;if(t&&t.length>0){if(t.find((e=>{var t;return(null===(t=e.txParams)||void 0===t?void 0:t.nonce)===n})))throw s.ethErrors.rpc.invalidParams("External transaction nonce should not be in pending txs")}if(r&&r.length>0){if(r.find((e=>{var t;return(null===(t=e.txParams)||void 0===t?void 0:t.nonce)===n})))throw s.ethErrors.rpc.invalidParams("External transaction nonce should not be in confirmed txs")}}}}},{package:"$root$",file:"app/scripts/controllers/transactions/lib/util.js"}],[3253,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(r=t.exports=function(e){return String(e).replace(r.expr,"")}).expr=/\/+$/}}},{package:"remove-trailing-slash",file:"node_modules/remove-trailing-slash/index.js"}],[3263,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{hasOwnProperty:n}=Object.prototype,s=f();s.configure=f,s.stringify=s,s.default=s,r.stringify=s,r.configure=f,t.exports=s;const i=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function o(e){return e.length<5e3&&!i.test(e)?`"${e}"`:JSON.stringify(e)}function a(e){if(e.length>200)return e.sort();for(let t=1;t<e.length;t++){const r=e[t];let n=t;for(;0!==n&&e[n-1]>r;)e[n]=e[n-1],n--;e[n]=r}return e}const c=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function u(e){return c.call(e)!==undefined&&0!==e.length}function h(e,t,r){e.length<r&&(r=e.length);const n=","===t?"":" ";let s=`"0":${n}${e[0]}`;for(let i=1;i<r;i++)s+=`${t}"${i}":${n}${e[i]}`;return s}function d(e,t){let r;if(n.call(e,t)&&(r=e[t],"boolean"!=typeof r))throw new TypeError(`The "${t}" argument must be of type boolean`);return r===undefined||r}function l(e,t){let r;if(n.call(e,t)){if(r=e[t],"number"!=typeof r)throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(r<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return r===undefined?Infinity:r}function p(e){return 1===e?"1 item":`${e} items`}function f(e){const t=function(e){if(n.call(e,"strict")){const t=e.strict;if("boolean"!=typeof t)throw new TypeError('The "strict" argument must be of type boolean');if(t)return e=>{let t="Object can not safely be stringified. Received type "+typeof e;throw"function"!=typeof e&&(t+=` (${e.toString()})`),new Error(t)}}}(e={...e});t&&(e.bigint===undefined&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));const r=function(e){if(n.call(e,"circularValue")){const t=e.circularValue;if("string"==typeof t)return`"${t}"`;if(null==t)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}(e),s=d(e,"bigint"),i=d(e,"deterministic"),c=l(e,"maximumDepth"),f=l(e,"maximumBreadth");function g(e,n,h,d,l,y){let m=n[e];switch("object"==typeof m&&null!==m&&"function"==typeof m.toJSON&&(m=m.toJSON(e)),m=d.call(n,e,m),typeof m){case"string":return o(m);case"object":{if(null===m)return"null";if(-1!==h.indexOf(m))return r;let e="",t=",";const n=y;if(Array.isArray(m)){if(0===m.length)return"[]";if(c<h.length+1)return'"[Array]"';h.push(m),""!==l&&(e+=`\n${y+=l}`,t=`,\n${y}`);const r=Math.min(m.length,f);let s=0;for(;s<r-1;s++){const r=g(String(s),m,h,d,l,y);e+=r!==undefined?r:"null",e+=t}const i=g(String(s),m,h,d,l,y);if(e+=i!==undefined?i:"null",m.length-1>f){e+=`${t}"... ${p(m.length-f-1)} not stringified"`}return""!==l&&(e+=`\n${n}`),h.pop(),`[${e}]`}let s=Object.keys(m);const b=s.length;if(0===b)return"{}";if(c<h.length+1)return'"[Object]"';let T="",w="";""!==l&&(t=`,\n${y+=l}`,T=" ");const v=Math.min(b,f);i&&!u(m)&&(s=a(s)),h.push(m);for(let r=0;r<v;r++){const n=s[r],i=g(n,m,h,d,l,y);i!==undefined&&(e+=`${w}${o(n)}:${T}${i}`,w=t)}if(b>f){e+=`${w}"...":${T}"${p(b-f)} not stringified"`,w=t}return""!==l&&w.length>1&&(e=`\n${y}${e}\n${n}`),h.pop(),`{${e}}`}case"number":return isFinite(m)?String(m):t?t(m):"null";case"boolean":return!0===m?"true":"false";case"undefined":return undefined;case"bigint":if(s)return String(m);default:return t?t(m):undefined}}function y(e,n,i,a,u,h){switch("object"==typeof n&&null!==n&&"function"==typeof n.toJSON&&(n=n.toJSON(e)),typeof n){case"string":return o(n);case"object":{if(null===n)return"null";if(-1!==i.indexOf(n))return r;const e=h;let t="",s=",";if(Array.isArray(n)){if(0===n.length)return"[]";if(c<i.length+1)return'"[Array]"';i.push(n),""!==u&&(t+=`\n${h+=u}`,s=`,\n${h}`);const r=Math.min(n.length,f);let o=0;for(;o<r-1;o++){const e=y(String(o),n[o],i,a,u,h);t+=e!==undefined?e:"null",t+=s}const d=y(String(o),n[o],i,a,u,h);if(t+=d!==undefined?d:"null",n.length-1>f){t+=`${s}"... ${p(n.length-f-1)} not stringified"`}return""!==u&&(t+=`\n${e}`),i.pop(),`[${t}]`}i.push(n);let d="";""!==u&&(s=`,\n${h+=u}`,d=" ");let l="";for(const e of a){const r=y(e,n[e],i,a,u,h);r!==undefined&&(t+=`${l}${o(e)}:${d}${r}`,l=s)}return""!==u&&l.length>1&&(t=`\n${h}${t}\n${e}`),i.pop(),`{${t}}`}case"number":return isFinite(n)?String(n):t?t(n):"null";case"boolean":return!0===n?"true":"false";case"undefined":return undefined;case"bigint":if(s)return String(n);default:return t?t(n):undefined}}function m(e,n,d,l,g){switch(typeof n){case"string":return o(n);case"object":{if(null===n)return"null";if("function"==typeof n.toJSON){if("object"!=typeof(n=n.toJSON(e)))return m(e,n,d,l,g);if(null===n)return"null"}if(-1!==d.indexOf(n))return r;const t=g;if(Array.isArray(n)){if(0===n.length)return"[]";if(c<d.length+1)return'"[Array]"';d.push(n);let e=`\n${g+=l}`;const r=`,\n${g}`,s=Math.min(n.length,f);let i=0;for(;i<s-1;i++){const t=m(String(i),n[i],d,l,g);e+=t!==undefined?t:"null",e+=r}const o=m(String(i),n[i],d,l,g);if(e+=o!==undefined?o:"null",n.length-1>f){e+=`${r}"... ${p(n.length-f-1)} not stringified"`}return e+=`\n${t}`,d.pop(),`[${e}]`}let s=Object.keys(n);const y=s.length;if(0===y)return"{}";if(c<d.length+1)return'"[Object]"';const b=`,\n${g+=l}`;let T="",w="",v=Math.min(y,f);u(n)&&(T+=h(n,b,f),s=s.slice(n.length),v-=n.length,w=b),i&&(s=a(s)),d.push(n);for(let e=0;e<v;e++){const t=s[e],r=m(t,n[t],d,l,g);r!==undefined&&(T+=`${w}${o(t)}: ${r}`,w=b)}if(y>f){T+=`${w}"...": "${p(y-f)} not stringified"`,w=b}return""!==w&&(T=`\n${g}${T}\n${t}`),d.pop(),`{${T}}`}case"number":return isFinite(n)?String(n):t?t(n):"null";case"boolean":return!0===n?"true":"false";case"undefined":return undefined;case"bigint":if(s)return String(n);default:return t?t(n):undefined}}function b(e,n,d){switch(typeof n){case"string":return o(n);case"object":{if(null===n)return"null";if("function"==typeof n.toJSON){if("object"!=typeof(n=n.toJSON(e)))return b(e,n,d);if(null===n)return"null"}if(-1!==d.indexOf(n))return r;let t="";if(Array.isArray(n)){if(0===n.length)return"[]";if(c<d.length+1)return'"[Array]"';d.push(n);const e=Math.min(n.length,f);let r=0;for(;r<e-1;r++){const e=b(String(r),n[r],d);t+=e!==undefined?e:"null",t+=","}const s=b(String(r),n[r],d);if(t+=s!==undefined?s:"null",n.length-1>f){t+=`,"... ${p(n.length-f-1)} not stringified"`}return d.pop(),`[${t}]`}let s=Object.keys(n);const l=s.length;if(0===l)return"{}";if(c<d.length+1)return'"[Object]"';let g="",y=Math.min(l,f);u(n)&&(t+=h(n,",",f),s=s.slice(n.length),y-=n.length,g=","),i&&(s=a(s)),d.push(n);for(let e=0;e<y;e++){const r=s[e],i=b(r,n[r],d);i!==undefined&&(t+=`${g}${o(r)}:${i}`,g=",")}if(l>f){t+=`${g}"...":"${p(l-f)} not stringified"`}return d.pop(),`{${t}}`}case"number":return isFinite(n)?String(n):t?t(n):"null";case"boolean":return!0===n?"true":"false";case"undefined":return undefined;case"bigint":if(s)return String(n);default:return t?t(n):undefined}}return function(e,t,r){if(arguments.length>1){let n="";if("number"==typeof r?n=" ".repeat(Math.min(r,10)):"string"==typeof r&&(n=r.slice(0,10)),null!=t){if("function"==typeof t)return g("",{"":e},[],t,n,"");if(Array.isArray(t))return y("",e,[],function(e){const t=new Set;for(const r of e)"string"!=typeof r&&"number"!=typeof r||t.add(String(r));return t}(t),n,"")}if(0!==n.length)return m("",e,[],n,"")}return b("",e,[])}}}}},{package:"@metamask/eth-json-rpc-middleware>safe-stable-stringify",file:"node_modules/safe-stable-stringify/index.js"}],[3271,{buffer:2065,pbkdf2:3041},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("pbkdf2").pbkdf2Sync,s=2147483647;function i(e,t,n,s,i){if(r.isBuffer(e)&&r.isBuffer(n))e.copy(n,s,t,t+i);else for(;i--;)n[s++]=e[t++]}t.exports=function(e,t,o,a,c,u,h){if(0===o||0!=(o&o-1))throw Error("N must be > 0 and a power of 2");if(o>s/128/a)throw Error("Parameter N is too large");if(a>s/128/c)throw Error("Parameter r is too large");var d,l=new r(256*a),p=new r(128*a*o),f=new Int32Array(16),g=new Int32Array(16),y=new r(64),m=n(e,t,1,128*c*a,"sha256");if(h){var b=c*o*2,T=0;d=function(){++T%1e3==0&&h({current:T,total:b,percent:T/b*100})}}for(var w=0;w<c;w++)v(m,128*w*a,a,o,p,l);return n(e,m,1,u,"sha256");function v(e,t,r,n,s,i){var o,a=128*r;for(e.copy(i,0,t,t+a),o=0;o<n;o++)i.copy(s,o*a,0,0+a),k(i,0,a,r),d&&d();for(o=0;o<n;o++){var c=0+64*(2*r-1);E(s,(i.readUInt32LE(c)&n-1)*a,i,0,a),k(i,0,a,r),d&&d()}i.copy(e,t,0,0+a)}function k(e,t,r,n){var s;for(i(e,t+64*(2*n-1),y,0,64),s=0;s<2*n;s++)E(e,64*s,y,0,64),S(y),i(y,0,e,r+64*s,64);for(s=0;s<n;s++)i(e,r+2*s*64,e,t+64*s,64);for(s=0;s<n;s++)i(e,r+64*(2*s+1),e,t+64*(s+n),64)}function _(e,t){return e<<t|e>>>32-t}function S(e){var t;for(t=0;t<16;t++)f[t]=(255&e[4*t+0])<<0,f[t]|=(255&e[4*t+1])<<8,f[t]|=(255&e[4*t+2])<<16,f[t]|=(255&e[4*t+3])<<24;for(i(f,0,g,0,16),t=8;t>0;t-=2)g[4]^=_(g[0]+g[12],7),g[8]^=_(g[4]+g[0],9),g[12]^=_(g[8]+g[4],13),g[0]^=_(g[12]+g[8],18),g[9]^=_(g[5]+g[1],7),g[13]^=_(g[9]+g[5],9),g[1]^=_(g[13]+g[9],13),g[5]^=_(g[1]+g[13],18),g[14]^=_(g[10]+g[6],7),g[2]^=_(g[14]+g[10],9),g[6]^=_(g[2]+g[14],13),g[10]^=_(g[6]+g[2],18),g[3]^=_(g[15]+g[11],7),g[7]^=_(g[3]+g[15],9),g[11]^=_(g[7]+g[3],13),g[15]^=_(g[11]+g[7],18),g[1]^=_(g[0]+g[3],7),g[2]^=_(g[1]+g[0],9),g[3]^=_(g[2]+g[1],13),g[0]^=_(g[3]+g[2],18),g[6]^=_(g[5]+g[4],7),g[7]^=_(g[6]+g[5],9),g[4]^=_(g[7]+g[6],13),g[5]^=_(g[4]+g[7],18),g[11]^=_(g[10]+g[9],7),g[8]^=_(g[11]+g[10],9),g[9]^=_(g[8]+g[11],13),g[10]^=_(g[9]+g[8],18),g[12]^=_(g[15]+g[14],7),g[13]^=_(g[12]+g[15],9),g[14]^=_(g[13]+g[12],13),g[15]^=_(g[14]+g[13],18);for(t=0;t<16;++t)f[t]=g[t]+f[t];for(t=0;t<16;t++){var r=4*t;e[r+0]=f[t]>>0&255,e[r+1]=f[t]>>8&255,e[r+2]=f[t]>>16&255,e[r+3]=f[t]>>24&255}}function E(e,t,r,n,s){for(var i=0;i<s;i++)r[n+i]^=e[t+i]}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethereumjs-wallet>scryptsy",file:"node_modules/scryptsy/lib/scrypt.js"}],[33,{"../../../../shared/constants/transaction":3426,"./tx-state-manager":35,"@metamask/safe-event-emitter":1320,"ethjs-query":2383,loglevel:2966},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=c(e("@metamask/safe-event-emitter")),s=c(e("loglevel")),i=c(e("ethjs-query")),o=e("../../../../shared/constants/transaction"),a=e("./tx-state-manager");function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class h extends n.default{constructor(e){super(),u(this,"DROPPED_BUFFER_COUNT",3),u(this,"droppedBlocksBufferByHash",new Map),this.query=e.query||new i.default(e.provider),this.nonceTracker=e.nonceTracker,this.getPendingTransactions=e.getPendingTransactions,this.getCompletedTransactions=e.getCompletedTransactions,this.publishTransaction=e.publishTransaction,this.approveTransaction=e.approveTransaction,this.confirmTransaction=e.confirmTransaction}async updatePendingTxs(){const e=await this.nonceTracker.getGlobalLock();try{const e=this.getPendingTransactions();await Promise.all(e.map((e=>this._checkPendingTx(e))))}catch(e){s.default.error("PendingTransactionTracker - Error updating pending transactions"),s.default.error(e)}e.releaseLock()}async resubmitPendingTxs(e){const t=this.getPendingTransactions();if(t.length)for(const s of t)try{await this._resubmitTx(s,e)}catch(e){var r,n;const t=(null===(r=e.value)||void 0===r||null===(n=r.message)||void 0===n?void 0:n.toLowerCase())||e.message.toLowerCase();if(t.includes("replacement transaction underpriced")||t.includes("known transaction")||t.includes("gas price too low to replace")||t.includes("transaction with the same hash was already imported")||t.includes("gateway timeout")||t.includes("nonce too low"))return;s.warning={error:t,message:a.ERROR_SUBMITTING},this.emit("tx:warning",s,e)}}async _resubmitTx(e,t){e.firstRetryBlockNumber||this.emit("tx:block-update",e,t);const r=e.firstRetryBlockNumber||t,n=Number.parseInt(t,16)-Number.parseInt(r,16),s=e.retryCount||0;if(n<Math.min(50,Math.pow(2,s)))return undefined;if(!("rawTx"in e))return this.approveTransaction(e.id);const{rawTx:i}=e,o=await this.publishTransaction(i);return this.emit("tx:retry",e),o}async _checkPendingTx(e){const t=e.hash,r=e.id;if(e.status!==o.TransactionStatus.submitted)return;if(!t){const e=new Error("We had an error while submitting this transaction, please try again.");return e.name="NoTxHashError",void this.emit("tx:failed",r,e)}if(await this._checkIfNonceIsTaken(e))this.emit("tx:dropped",r);else{try{const e=await this.query.getTransactionReceipt(t);if(null!=e&&e.blockNumber){const{baseFeePerGas:t,timestamp:n}=await this.query.getBlockByHash(null==e?void 0:e.blockHash,!1);return void this.emit("tx:confirmed",r,e,t,n)}}catch(t){return e.warning={error:t.message,message:"There was a problem loading this transaction."},void this.emit("tx:warning",e,t)}await this._checkIfTxWasDropped(e)&&this.emit("tx:dropped",r)}}async _checkIfTxWasDropped(e){const{hash:t,txParams:{nonce:r,from:n}}=e,s=await this.query.getTransactionCount(n);if(parseInt(r,16)>=s.toNumber())return!1;this.droppedBlocksBufferByHash.has(t)||this.droppedBlocksBufferByHash.set(t,0);const i=this.droppedBlocksBufferByHash.get(t);return i<this.DROPPED_BUFFER_COUNT?(this.droppedBlocksBufferByHash.set(t,i+1),!1):(this.droppedBlocksBufferByHash.delete(t),!0)}async _checkIfNonceIsTaken(e){const t=e.txParams.from;return this.getCompletedTransactions(t).some((t=>!(t.id===e.id)&&t.txParams.nonce===e.txParams.nonce))}}r.default=h}}},{package:"$root$",file:"app/scripts/controllers/transactions/pending-tx-tracker.js"}],[3337,{_process:3050,stream:2068},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("stream");function s(e,t,s){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var i=!1,o=!1,a=[],c=!1,u=new n;function h(){for(;a.length&&!u.paused;){var e=a.shift();if(null===e)return u.emit("end");u.emit("data",e)}}return u.readable=u.writable=!0,u.paused=!1,u.autoDestroy=!(s&&!1===s.autoDestroy),u.write=function(t){return e.call(this,t),!u.paused},u.queue=u.push=function(e){return c||(null===e&&(c=!0),a.push(e),h()),u},u.on("end",(function(){u.readable=!1,!u.writable&&u.autoDestroy&&r.nextTick((function(){u.destroy()}))})),u.end=function(e){if(!i)return i=!0,arguments.length&&u.write(e),u.writable=!1,t.call(u),!u.readable&&u.autoDestroy&&u.destroy(),u},u.destroy=function(){if(!o)return o=!0,i=!0,a.length=0,u.writable=u.readable=!1,u.emit("close"),u},u.pause=function(){if(!u.paused)return u.paused=!0,u},u.resume=function(){return u.paused&&(u.paused=!1,u.emit("resume")),h(),u.paused||u.emit("drain"),u},u}t.exports=s,s.through=s}).call(this)}).call(this,e("_process"))}}},{package:"debounce-stream>through",file:"node_modules/through/index.js"}],[3342,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){if(e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray)return new DataView(e.buffer,e.byteOffset,e.byteLength);if(e instanceof ArrayBuffer)return new DataView(e);throw new TypeError("Expected `data` to be an ArrayBuffer, Buffer, Int8Array, Uint8Array or Uint8ClampedArray")}}}},{package:"base32-encode>to-data-view",file:"node_modules/to-data-view/index.js"}],[3345,{buffer:2064},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){var r,n;r=this,n=function(){var t={};function r(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}return t.decodeUTF8=function(e){if("string"!=typeof e)throw new TypeError("expected string");var t,r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(t=0;t<r.length;t++)n[t]=r.charCodeAt(t);return n},t.encodeUTF8=function(e){var t,r=[];for(t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(r.join("")))},"undefined"==typeof atob?void 0!==e.from?(t.encodeBase64=function(t){return e.from(t).toString("base64")},t.decodeBase64=function(t){return r(t),new Uint8Array(Array.prototype.slice.call(e.from(t,"base64"),0))}):(t.encodeBase64=function(t){return new e(t).toString("base64")},t.decodeBase64=function(t){return r(t),new Uint8Array(Array.prototype.slice.call(new e(t,"base64"),0))}):(t.encodeBase64=function(e){var t,r=[],n=e.length;for(t=0;t<n;t++)r.push(String.fromCharCode(e[t]));return btoa(r.join(""))},t.decodeBase64=function(e){r(e);var t,n=atob(e),s=new Uint8Array(n.length);for(t=0;t<n.length;t++)s[t]=n.charCodeAt(t);return s}),t},void 0!==t&&t.exports?t.exports=n():(r.nacl||(r.nacl={}),r.nacl.util=n())}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-sig-util>tweetnacl-util",file:"node_modules/tweetnacl-util/nacl-util.js"}],[3346,{crypto:2064},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){!function(t){var r=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},n=function(){throw new Error("no PRNG")},s=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=r(),a=r([1]),c=r([56129,1]),u=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function g(e,t,r,n,s){var i,o=0;for(i=0;i<s;i++)o|=e[t+i]^r[n+i];return(1&o-1>>>8)-1}function y(e,t,r,n){return g(e,t,r,n,16)}function m(e,t,r,n){return g(e,t,r,n,32)}function b(e,t,r,n){!function(e,t,r,n){for(var s,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,h=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,l=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,b=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,T=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,v=i,k=o,_=a,S=c,E=u,x=h,I=d,P=l,A=p,C=f,O=g,R=y,M=m,D=b,j=T,N=w,B=0;B<20;B+=2)v^=(s=(M^=(s=(A^=(s=(E^=(s=v+M|0)<<7|s>>>25)+v|0)<<9|s>>>23)+E|0)<<13|s>>>19)+A|0)<<18|s>>>14,x^=(s=(k^=(s=(D^=(s=(C^=(s=x+k|0)<<7|s>>>25)+x|0)<<9|s>>>23)+C|0)<<13|s>>>19)+D|0)<<18|s>>>14,O^=(s=(I^=(s=(_^=(s=(j^=(s=O+I|0)<<7|s>>>25)+O|0)<<9|s>>>23)+j|0)<<13|s>>>19)+_|0)<<18|s>>>14,N^=(s=(R^=(s=(P^=(s=(S^=(s=N+R|0)<<7|s>>>25)+N|0)<<9|s>>>23)+S|0)<<13|s>>>19)+P|0)<<18|s>>>14,v^=(s=(S^=(s=(_^=(s=(k^=(s=v+S|0)<<7|s>>>25)+v|0)<<9|s>>>23)+k|0)<<13|s>>>19)+_|0)<<18|s>>>14,x^=(s=(E^=(s=(P^=(s=(I^=(s=x+E|0)<<7|s>>>25)+x|0)<<9|s>>>23)+I|0)<<13|s>>>19)+P|0)<<18|s>>>14,O^=(s=(C^=(s=(A^=(s=(R^=(s=O+C|0)<<7|s>>>25)+O|0)<<9|s>>>23)+R|0)<<13|s>>>19)+A|0)<<18|s>>>14,N^=(s=(j^=(s=(D^=(s=(M^=(s=N+j|0)<<7|s>>>25)+N|0)<<9|s>>>23)+M|0)<<13|s>>>19)+D|0)<<18|s>>>14;v=v+i|0,k=k+o|0,_=_+a|0,S=S+c|0,E=E+u|0,x=x+h|0,I=I+d|0,P=P+l|0,A=A+p|0,C=C+f|0,O=O+g|0,R=R+y|0,M=M+m|0,D=D+b|0,j=j+T|0,N=N+w|0,e[0]=v>>>0&255,e[1]=v>>>8&255,e[2]=v>>>16&255,e[3]=v>>>24&255,e[4]=k>>>0&255,e[5]=k>>>8&255,e[6]=k>>>16&255,e[7]=k>>>24&255,e[8]=_>>>0&255,e[9]=_>>>8&255,e[10]=_>>>16&255,e[11]=_>>>24&255,e[12]=S>>>0&255,e[13]=S>>>8&255,e[14]=S>>>16&255,e[15]=S>>>24&255,e[16]=E>>>0&255,e[17]=E>>>8&255,e[18]=E>>>16&255,e[19]=E>>>24&255,e[20]=x>>>0&255,e[21]=x>>>8&255,e[22]=x>>>16&255,e[23]=x>>>24&255,e[24]=I>>>0&255,e[25]=I>>>8&255,e[26]=I>>>16&255,e[27]=I>>>24&255,e[28]=P>>>0&255,e[29]=P>>>8&255,e[30]=P>>>16&255,e[31]=P>>>24&255,e[32]=A>>>0&255,e[33]=A>>>8&255,e[34]=A>>>16&255,e[35]=A>>>24&255,e[36]=C>>>0&255,e[37]=C>>>8&255,e[38]=C>>>16&255,e[39]=C>>>24&255,e[40]=O>>>0&255,e[41]=O>>>8&255,e[42]=O>>>16&255,e[43]=O>>>24&255,e[44]=R>>>0&255,e[45]=R>>>8&255,e[46]=R>>>16&255,e[47]=R>>>24&255,e[48]=M>>>0&255,e[49]=M>>>8&255,e[50]=M>>>16&255,e[51]=M>>>24&255,e[52]=D>>>0&255,e[53]=D>>>8&255,e[54]=D>>>16&255,e[55]=D>>>24&255,e[56]=j>>>0&255,e[57]=j>>>8&255,e[58]=j>>>16&255,e[59]=j>>>24&255,e[60]=N>>>0&255,e[61]=N>>>8&255,e[62]=N>>>16&255,e[63]=N>>>24&255}(e,t,r,n)}function T(e,t,r,n){!function(e,t,r,n){for(var s,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,h=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,l=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,b=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,T=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,v=0;v<20;v+=2)i^=(s=(m^=(s=(p^=(s=(u^=(s=i+m|0)<<7|s>>>25)+i|0)<<9|s>>>23)+u|0)<<13|s>>>19)+p|0)<<18|s>>>14,h^=(s=(o^=(s=(b^=(s=(f^=(s=h+o|0)<<7|s>>>25)+h|0)<<9|s>>>23)+f|0)<<13|s>>>19)+b|0)<<18|s>>>14,g^=(s=(d^=(s=(a^=(s=(T^=(s=g+d|0)<<7|s>>>25)+g|0)<<9|s>>>23)+T|0)<<13|s>>>19)+a|0)<<18|s>>>14,w^=(s=(y^=(s=(l^=(s=(c^=(s=w+y|0)<<7|s>>>25)+w|0)<<9|s>>>23)+c|0)<<13|s>>>19)+l|0)<<18|s>>>14,i^=(s=(c^=(s=(a^=(s=(o^=(s=i+c|0)<<7|s>>>25)+i|0)<<9|s>>>23)+o|0)<<13|s>>>19)+a|0)<<18|s>>>14,h^=(s=(u^=(s=(l^=(s=(d^=(s=h+u|0)<<7|s>>>25)+h|0)<<9|s>>>23)+d|0)<<13|s>>>19)+l|0)<<18|s>>>14,g^=(s=(f^=(s=(p^=(s=(y^=(s=g+f|0)<<7|s>>>25)+g|0)<<9|s>>>23)+y|0)<<13|s>>>19)+p|0)<<18|s>>>14,w^=(s=(T^=(s=(b^=(s=(m^=(s=w+T|0)<<7|s>>>25)+w|0)<<9|s>>>23)+m|0)<<13|s>>>19)+b|0)<<18|s>>>14;e[0]=i>>>0&255,e[1]=i>>>8&255,e[2]=i>>>16&255,e[3]=i>>>24&255,e[4]=h>>>0&255,e[5]=h>>>8&255,e[6]=h>>>16&255,e[7]=h>>>24&255,e[8]=g>>>0&255,e[9]=g>>>8&255,e[10]=g>>>16&255,e[11]=g>>>24&255,e[12]=w>>>0&255,e[13]=w>>>8&255,e[14]=w>>>16&255,e[15]=w>>>24&255,e[16]=d>>>0&255,e[17]=d>>>8&255,e[18]=d>>>16&255,e[19]=d>>>24&255,e[20]=l>>>0&255,e[21]=l>>>8&255,e[22]=l>>>16&255,e[23]=l>>>24&255,e[24]=p>>>0&255,e[25]=p>>>8&255,e[26]=p>>>16&255,e[27]=p>>>24&255,e[28]=f>>>0&255,e[29]=f>>>8&255,e[30]=f>>>16&255,e[31]=f>>>24&255}(e,t,r,n)}var w=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function v(e,t,r,n,s,i,o){var a,c,u=new Uint8Array(16),h=new Uint8Array(64);for(c=0;c<16;c++)u[c]=0;for(c=0;c<8;c++)u[c]=i[c];for(;s>=64;){for(b(h,u,o,w),c=0;c<64;c++)e[t+c]=r[n+c]^h[c];for(a=1,c=8;c<16;c++)a=a+(255&u[c])|0,u[c]=255&a,a>>>=8;s-=64,t+=64,n+=64}if(s>0)for(b(h,u,o,w),c=0;c<s;c++)e[t+c]=r[n+c]^h[c];return 0}function k(e,t,r,n,s){var i,o,a=new Uint8Array(16),c=new Uint8Array(64);for(o=0;o<16;o++)a[o]=0;for(o=0;o<8;o++)a[o]=n[o];for(;r>=64;){for(b(c,a,s,w),o=0;o<64;o++)e[t+o]=c[o];for(i=1,o=8;o<16;o++)i=i+(255&a[o])|0,a[o]=255&i,i>>>=8;r-=64,t+=64}if(r>0)for(b(c,a,s,w),o=0;o<r;o++)e[t+o]=c[o];return 0}function _(e,t,r,n,s){var i=new Uint8Array(32);T(i,n,s,w);for(var o=new Uint8Array(8),a=0;a<8;a++)o[a]=n[a+16];return k(e,t,r,o,i)}function S(e,t,r,n,s,i,o){var a=new Uint8Array(32);T(a,i,o,w);for(var c=new Uint8Array(8),u=0;u<8;u++)c[u]=i[u+16];return v(e,t,r,n,s,c,a)}var E=function(e){var t,r,n,s,i,o,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),s=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|s<<9),i=255&e[8]|(255&e[9])<<8,this.r[4]=255&(s>>>4|i<<12),this.r[5]=i>>>1&8190,o=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(i>>>14|o<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(o>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function x(e,t,r,n,s,i){var o=new E(i);return o.update(r,n,s),o.finish(e,t),0}function I(e,t,r,n,s,i){var o=new Uint8Array(16);return x(o,0,r,n,s,i),y(e,t,o,0)}function P(e,t,r,n,s){var i;if(r<32)return-1;for(S(e,0,t,0,r,n,s),x(e,16,e,32,r-32,e),i=0;i<16;i++)e[i]=0;return 0}function A(e,t,r,n,s){var i,o=new Uint8Array(32);if(r<32)return-1;if(_(o,0,32,n,s),0!==I(t,16,t,32,r-32,o))return-1;for(S(e,0,t,0,r,n,s),i=0;i<32;i++)e[i]=0;return 0}function C(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function O(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function R(e,t,r){for(var n,s=~(r-1),i=0;i<16;i++)n=s&(e[i]^t[i]),e[i]^=n,t[i]^=n}function M(e,t){var n,s,i,o=r(),a=r();for(n=0;n<16;n++)a[n]=t[n];for(O(a),O(a),O(a),s=0;s<2;s++){for(o[0]=a[0]-65517,n=1;n<15;n++)o[n]=a[n]-65535-(o[n-1]>>16&1),o[n-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,R(a,o,1-i)}for(n=0;n<16;n++)e[2*n]=255&a[n],e[2*n+1]=a[n]>>8}function D(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return M(r,e),M(n,t),m(r,0,n,0)}function j(e){var t=new Uint8Array(32);return M(t,e),1&t[0]}function N(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function B(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function q(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function F(e,t,r){var n,s,i=0,o=0,a=0,c=0,u=0,h=0,d=0,l=0,p=0,f=0,g=0,y=0,m=0,b=0,T=0,w=0,v=0,k=0,_=0,S=0,E=0,x=0,I=0,P=0,A=0,C=0,O=0,R=0,M=0,D=0,j=0,N=r[0],B=r[1],q=r[2],F=r[3],U=r[4],L=r[5],K=r[6],$=r[7],G=r[8],H=r[9],z=r[10],Y=r[11],W=r[12],V=r[13],J=r[14],Q=r[15];i+=(n=t[0])*N,o+=n*B,a+=n*q,c+=n*F,u+=n*U,h+=n*L,d+=n*K,l+=n*$,p+=n*G,f+=n*H,g+=n*z,y+=n*Y,m+=n*W,b+=n*V,T+=n*J,w+=n*Q,o+=(n=t[1])*N,a+=n*B,c+=n*q,u+=n*F,h+=n*U,d+=n*L,l+=n*K,p+=n*$,f+=n*G,g+=n*H,y+=n*z,m+=n*Y,b+=n*W,T+=n*V,w+=n*J,v+=n*Q,a+=(n=t[2])*N,c+=n*B,u+=n*q,h+=n*F,d+=n*U,l+=n*L,p+=n*K,f+=n*$,g+=n*G,y+=n*H,m+=n*z,b+=n*Y,T+=n*W,w+=n*V,v+=n*J,k+=n*Q,c+=(n=t[3])*N,u+=n*B,h+=n*q,d+=n*F,l+=n*U,p+=n*L,f+=n*K,g+=n*$,y+=n*G,m+=n*H,b+=n*z,T+=n*Y,w+=n*W,v+=n*V,k+=n*J,_+=n*Q,u+=(n=t[4])*N,h+=n*B,d+=n*q,l+=n*F,p+=n*U,f+=n*L,g+=n*K,y+=n*$,m+=n*G,b+=n*H,T+=n*z,w+=n*Y,v+=n*W,k+=n*V,_+=n*J,S+=n*Q,h+=(n=t[5])*N,d+=n*B,l+=n*q,p+=n*F,f+=n*U,g+=n*L,y+=n*K,m+=n*$,b+=n*G,T+=n*H,w+=n*z,v+=n*Y,k+=n*W,_+=n*V,S+=n*J,E+=n*Q,d+=(n=t[6])*N,l+=n*B,p+=n*q,f+=n*F,g+=n*U,y+=n*L,m+=n*K,b+=n*$,T+=n*G,w+=n*H,v+=n*z,k+=n*Y,_+=n*W,S+=n*V,E+=n*J,x+=n*Q,l+=(n=t[7])*N,p+=n*B,f+=n*q,g+=n*F,y+=n*U,m+=n*L,b+=n*K,T+=n*$,w+=n*G,v+=n*H,k+=n*z,_+=n*Y,S+=n*W,E+=n*V,x+=n*J,I+=n*Q,p+=(n=t[8])*N,f+=n*B,g+=n*q,y+=n*F,m+=n*U,b+=n*L,T+=n*K,w+=n*$,v+=n*G,k+=n*H,_+=n*z,S+=n*Y,E+=n*W,x+=n*V,I+=n*J,P+=n*Q,f+=(n=t[9])*N,g+=n*B,y+=n*q,m+=n*F,b+=n*U,T+=n*L,w+=n*K,v+=n*$,k+=n*G,_+=n*H,S+=n*z,E+=n*Y,x+=n*W,I+=n*V,P+=n*J,A+=n*Q,g+=(n=t[10])*N,y+=n*B,m+=n*q,b+=n*F,T+=n*U,w+=n*L,v+=n*K,k+=n*$,_+=n*G,S+=n*H,E+=n*z,x+=n*Y,I+=n*W,P+=n*V,A+=n*J,C+=n*Q,y+=(n=t[11])*N,m+=n*B,b+=n*q,T+=n*F,w+=n*U,v+=n*L,k+=n*K,_+=n*$,S+=n*G,E+=n*H,x+=n*z,I+=n*Y,P+=n*W,A+=n*V,C+=n*J,O+=n*Q,m+=(n=t[12])*N,b+=n*B,T+=n*q,w+=n*F,v+=n*U,k+=n*L,_+=n*K,S+=n*$,E+=n*G,x+=n*H,I+=n*z,P+=n*Y,A+=n*W,C+=n*V,O+=n*J,R+=n*Q,b+=(n=t[13])*N,T+=n*B,w+=n*q,v+=n*F,k+=n*U,_+=n*L,S+=n*K,E+=n*$,x+=n*G,I+=n*H,P+=n*z,A+=n*Y,C+=n*W,O+=n*V,R+=n*J,M+=n*Q,T+=(n=t[14])*N,w+=n*B,v+=n*q,k+=n*F,_+=n*U,S+=n*L,E+=n*K,x+=n*$,I+=n*G,P+=n*H,A+=n*z,C+=n*Y,O+=n*W,R+=n*V,M+=n*J,D+=n*Q,w+=(n=t[15])*N,o+=38*(k+=n*q),a+=38*(_+=n*F),c+=38*(S+=n*U),u+=38*(E+=n*L),h+=38*(x+=n*K),d+=38*(I+=n*$),l+=38*(P+=n*G),p+=38*(A+=n*H),f+=38*(C+=n*z),g+=38*(O+=n*Y),y+=38*(R+=n*W),m+=38*(M+=n*V),b+=38*(D+=n*J),T+=38*(j+=n*Q),i=(n=(i+=38*(v+=n*B))+(s=1)+65535)-65536*(s=Math.floor(n/65536)),o=(n=o+s+65535)-65536*(s=Math.floor(n/65536)),a=(n=a+s+65535)-65536*(s=Math.floor(n/65536)),c=(n=c+s+65535)-65536*(s=Math.floor(n/65536)),u=(n=u+s+65535)-65536*(s=Math.floor(n/65536)),h=(n=h+s+65535)-65536*(s=Math.floor(n/65536)),d=(n=d+s+65535)-65536*(s=Math.floor(n/65536)),l=(n=l+s+65535)-65536*(s=Math.floor(n/65536)),p=(n=p+s+65535)-65536*(s=Math.floor(n/65536)),f=(n=f+s+65535)-65536*(s=Math.floor(n/65536)),g=(n=g+s+65535)-65536*(s=Math.floor(n/65536)),y=(n=y+s+65535)-65536*(s=Math.floor(n/65536)),m=(n=m+s+65535)-65536*(s=Math.floor(n/65536)),b=(n=b+s+65535)-65536*(s=Math.floor(n/65536)),T=(n=T+s+65535)-65536*(s=Math.floor(n/65536)),w=(n=w+s+65535)-65536*(s=Math.floor(n/65536)),i=(n=(i+=s-1+37*(s-1))+(s=1)+65535)-65536*(s=Math.floor(n/65536)),o=(n=o+s+65535)-65536*(s=Math.floor(n/65536)),a=(n=a+s+65535)-65536*(s=Math.floor(n/65536)),c=(n=c+s+65535)-65536*(s=Math.floor(n/65536)),u=(n=u+s+65535)-65536*(s=Math.floor(n/65536)),h=(n=h+s+65535)-65536*(s=Math.floor(n/65536)),d=(n=d+s+65535)-65536*(s=Math.floor(n/65536)),l=(n=l+s+65535)-65536*(s=Math.floor(n/65536)),p=(n=p+s+65535)-65536*(s=Math.floor(n/65536)),f=(n=f+s+65535)-65536*(s=Math.floor(n/65536)),g=(n=g+s+65535)-65536*(s=Math.floor(n/65536)),y=(n=y+s+65535)-65536*(s=Math.floor(n/65536)),m=(n=m+s+65535)-65536*(s=Math.floor(n/65536)),b=(n=b+s+65535)-65536*(s=Math.floor(n/65536)),T=(n=T+s+65535)-65536*(s=Math.floor(n/65536)),w=(n=w+s+65535)-65536*(s=Math.floor(n/65536)),i+=s-1+37*(s-1),e[0]=i,e[1]=o,e[2]=a,e[3]=c,e[4]=u,e[5]=h,e[6]=d,e[7]=l,e[8]=p,e[9]=f,e[10]=g,e[11]=y,e[12]=m,e[13]=b,e[14]=T,e[15]=w}function U(e,t){F(e,t,t)}function L(e,t){var n,s=r();for(n=0;n<16;n++)s[n]=t[n];for(n=253;n>=0;n--)U(s,s),2!==n&&4!==n&&F(s,s,t);for(n=0;n<16;n++)e[n]=s[n]}function K(e,t){var n,s=r();for(n=0;n<16;n++)s[n]=t[n];for(n=250;n>=0;n--)U(s,s),1!==n&&F(s,s,t);for(n=0;n<16;n++)e[n]=s[n]}function $(e,t,n){var s,i,o=new Uint8Array(32),a=new Float64Array(80),u=r(),h=r(),d=r(),l=r(),p=r(),f=r();for(i=0;i<31;i++)o[i]=t[i];for(o[31]=127&t[31]|64,o[0]&=248,N(a,n),i=0;i<16;i++)h[i]=a[i],l[i]=u[i]=d[i]=0;for(u[0]=l[0]=1,i=254;i>=0;--i)R(u,h,s=o[i>>>3]>>>(7&i)&1),R(d,l,s),B(p,u,d),q(u,u,d),B(d,h,l),q(h,h,l),U(l,p),U(f,u),F(u,d,u),F(d,h,p),B(p,u,d),q(u,u,d),U(h,u),q(d,l,f),F(u,d,c),B(u,u,l),F(d,d,u),F(u,l,f),F(l,h,a),U(h,p),R(u,h,s),R(d,l,s);for(i=0;i<16;i++)a[i+16]=u[i],a[i+32]=d[i],a[i+48]=h[i],a[i+64]=l[i];var g=a.subarray(32),y=a.subarray(16);return L(g,g),F(y,y,g),M(e,y),0}function G(e,t){return $(e,t,i)}function H(e,t){return n(t,32),G(e,t)}function z(e,t,r){var n=new Uint8Array(32);return $(n,r,t),T(e,s,n,w)}E.prototype.blocks=function(e,t,r){for(var n,s,i,o,a,c,u,h,d,l,p,f,g,y,m,b,T,w,v,k=this.fin?0:2048,_=this.h[0],S=this.h[1],E=this.h[2],x=this.h[3],I=this.h[4],P=this.h[5],A=this.h[6],C=this.h[7],O=this.h[8],R=this.h[9],M=this.r[0],D=this.r[1],j=this.r[2],N=this.r[3],B=this.r[4],q=this.r[5],F=this.r[6],U=this.r[7],L=this.r[8],K=this.r[9];r>=16;)l=d=0,l+=(_+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*M,l+=(S+=8191&(n>>>13|(s=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*K),l+=(E+=8191&(s>>>10|(i=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*L),l+=(x+=8191&(i>>>7|(o=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*U),d=(l+=(I+=8191&(o>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*F))>>>13,l&=8191,l+=(P+=a>>>1&8191)*(5*q),l+=(A+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*B),l+=(C+=8191&(c>>>11|(u=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*N),l+=(O+=8191&(u>>>8|(h=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*j),p=d+=(l+=(R+=h>>>5|k)*(5*D))>>>13,p+=_*D,p+=S*M,p+=E*(5*K),p+=x*(5*L),d=(p+=I*(5*U))>>>13,p&=8191,p+=P*(5*F),p+=A*(5*q),p+=C*(5*B),p+=O*(5*N),d+=(p+=R*(5*j))>>>13,p&=8191,f=d,f+=_*j,f+=S*D,f+=E*M,f+=x*(5*K),d=(f+=I*(5*L))>>>13,f&=8191,f+=P*(5*U),f+=A*(5*F),f+=C*(5*q),f+=O*(5*B),g=d+=(f+=R*(5*N))>>>13,g+=_*N,g+=S*j,g+=E*D,g+=x*M,d=(g+=I*(5*K))>>>13,g&=8191,g+=P*(5*L),g+=A*(5*U),g+=C*(5*F),g+=O*(5*q),y=d+=(g+=R*(5*B))>>>13,y+=_*B,y+=S*N,y+=E*j,y+=x*D,d=(y+=I*M)>>>13,y&=8191,y+=P*(5*K),y+=A*(5*L),y+=C*(5*U),y+=O*(5*F),m=d+=(y+=R*(5*q))>>>13,m+=_*q,m+=S*B,m+=E*N,m+=x*j,d=(m+=I*D)>>>13,m&=8191,m+=P*M,m+=A*(5*K),m+=C*(5*L),m+=O*(5*U),b=d+=(m+=R*(5*F))>>>13,b+=_*F,b+=S*q,b+=E*B,b+=x*N,d=(b+=I*j)>>>13,b&=8191,b+=P*D,b+=A*M,b+=C*(5*K),b+=O*(5*L),T=d+=(b+=R*(5*U))>>>13,T+=_*U,T+=S*F,T+=E*q,T+=x*B,d=(T+=I*N)>>>13,T&=8191,T+=P*j,T+=A*D,T+=C*M,T+=O*(5*K),w=d+=(T+=R*(5*L))>>>13,w+=_*L,w+=S*U,w+=E*F,w+=x*q,d=(w+=I*B)>>>13,w&=8191,w+=P*N,w+=A*j,w+=C*D,w+=O*M,v=d+=(w+=R*(5*K))>>>13,v+=_*K,v+=S*L,v+=E*U,v+=x*F,d=(v+=I*q)>>>13,v&=8191,v+=P*B,v+=A*N,v+=C*j,v+=O*D,_=l=8191&(d=(d=((d+=(v+=R*M)>>>13)<<2)+d|0)+(l&=8191)|0),S=p+=d>>>=13,E=f&=8191,x=g&=8191,I=y&=8191,P=m&=8191,A=b&=8191,C=T&=8191,O=w&=8191,R=v&=8191,t+=16,r-=16;this.h[0]=_,this.h[1]=S,this.h[2]=E,this.h[3]=x,this.h[4]=I,this.h[5]=P,this.h[6]=A,this.h[7]=C,this.h[8]=O,this.h[9]=R},E.prototype.finish=function(e,t){var r,n,s,i,o=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=r,r=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,o[0]=this.h[0]+5,r=o[0]>>>13,o[0]&=8191,i=1;i<10;i++)o[i]=this.h[i]+r,r=o[i]>>>13,o[i]&=8191;for(o[9]-=8192,n=(1^r)-1,i=0;i<10;i++)o[i]&=n;for(n=~n,i=0;i<10;i++)this.h[i]=this.h[i]&n|o[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),s=this.h[0]+this.pad[0],this.h[0]=65535&s,i=1;i<8;i++)s=(this.h[i]+this.pad[i]|0)+(s>>>16)|0,this.h[i]=65535&s;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},E.prototype.update=function(e,t,r){var n,s;if(this.leftover){for((s=16-this.leftover)>r&&(s=r),n=0;n<s;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=s,t+=s,this.leftover+=s,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(s=r-r%16,this.blocks(e,t,s),t+=s,r-=s),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var Y=P,W=A;var V=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function J(e,t,r,n){for(var s,i,o,a,c,u,h,d,l,p,f,g,y,m,b,T,w,v,k,_,S,E,x,I,P,A,C=new Int32Array(16),O=new Int32Array(16),R=e[0],M=e[1],D=e[2],j=e[3],N=e[4],B=e[5],q=e[6],F=e[7],U=t[0],L=t[1],K=t[2],$=t[3],G=t[4],H=t[5],z=t[6],Y=t[7],W=0;n>=128;){for(k=0;k<16;k++)_=8*k+W,C[k]=r[_+0]<<24|r[_+1]<<16|r[_+2]<<8|r[_+3],O[k]=r[_+4]<<24|r[_+5]<<16|r[_+6]<<8|r[_+7];for(k=0;k<80;k++)if(s=R,i=M,o=D,a=j,c=N,u=B,h=q,F,l=U,p=L,f=K,g=$,y=G,m=H,b=z,Y,x=65535&(E=Y),I=E>>>16,P=65535&(S=F),A=S>>>16,x+=65535&(E=(G>>>14|N<<18)^(G>>>18|N<<14)^(N>>>9|G<<23)),I+=E>>>16,P+=65535&(S=(N>>>14|G<<18)^(N>>>18|G<<14)^(G>>>9|N<<23)),A+=S>>>16,x+=65535&(E=G&H^~G&z),I+=E>>>16,P+=65535&(S=N&B^~N&q),A+=S>>>16,S=V[2*k],x+=65535&(E=V[2*k+1]),I+=E>>>16,P+=65535&S,A+=S>>>16,S=C[k%16],I+=(E=O[k%16])>>>16,P+=65535&S,A+=S>>>16,P+=(I+=(x+=65535&E)>>>16)>>>16,x=65535&(E=v=65535&x|I<<16),I=E>>>16,P=65535&(S=w=65535&P|(A+=P>>>16)<<16),A=S>>>16,x+=65535&(E=(U>>>28|R<<4)^(R>>>2|U<<30)^(R>>>7|U<<25)),I+=E>>>16,P+=65535&(S=(R>>>28|U<<4)^(U>>>2|R<<30)^(U>>>7|R<<25)),A+=S>>>16,I+=(E=U&L^U&K^L&K)>>>16,P+=65535&(S=R&M^R&D^M&D),A+=S>>>16,d=65535&(P+=(I+=(x+=65535&E)>>>16)>>>16)|(A+=P>>>16)<<16,T=65535&x|I<<16,x=65535&(E=g),I=E>>>16,P=65535&(S=a),A=S>>>16,I+=(E=v)>>>16,P+=65535&(S=w),A+=S>>>16,M=s,D=i,j=o,N=a=65535&(P+=(I+=(x+=65535&E)>>>16)>>>16)|(A+=P>>>16)<<16,B=c,q=u,F=h,R=d,L=l,K=p,$=f,G=g=65535&x|I<<16,H=y,z=m,Y=b,U=T,k%16==15)for(_=0;_<16;_++)S=C[_],x=65535&(E=O[_]),I=E>>>16,P=65535&S,A=S>>>16,S=C[(_+9)%16],x+=65535&(E=O[(_+9)%16]),I+=E>>>16,P+=65535&S,A+=S>>>16,w=C[(_+1)%16],x+=65535&(E=((v=O[(_+1)%16])>>>1|w<<31)^(v>>>8|w<<24)^(v>>>7|w<<25)),I+=E>>>16,P+=65535&(S=(w>>>1|v<<31)^(w>>>8|v<<24)^w>>>7),A+=S>>>16,w=C[(_+14)%16],I+=(E=((v=O[(_+14)%16])>>>19|w<<13)^(w>>>29|v<<3)^(v>>>6|w<<26))>>>16,P+=65535&(S=(w>>>19|v<<13)^(v>>>29|w<<3)^w>>>6),A+=S>>>16,A+=(P+=(I+=(x+=65535&E)>>>16)>>>16)>>>16,C[_]=65535&P|A<<16,O[_]=65535&x|I<<16;x=65535&(E=U),I=E>>>16,P=65535&(S=R),A=S>>>16,S=e[0],I+=(E=t[0])>>>16,P+=65535&S,A+=S>>>16,A+=(P+=(I+=(x+=65535&E)>>>16)>>>16)>>>16,e[0]=R=65535&P|A<<16,t[0]=U=65535&x|I<<16,x=65535&(E=L),I=E>>>16,P=65535&(S=M),A=S>>>16,S=e[1],I+=(E=t[1])>>>16,P+=65535&S,A+=S>>>16,A+=(P+=(I+=(x+=65535&E)>>>16)>>>16)>>>16,e[1]=M=65535&P|A<<16,t[1]=L=65535&x|I<<16,x=65535&(E=K),I=E>>>16,P=65535&(S=D),A=S>>>16,S=e[2],I+=(E=t[2])>>>16,P+=65535&S,A+=S>>>16,A+=(P+=(I+=(x+=65535&E)>>>16)>>>16)>>>16,e[2]=D=65535&P|A<<16,t[2]=K=65535&x|I<<16,x=65535&(E=$),I=E>>>16,P=65535&(S=j),A=S>>>16,S=e[3],I+=(E=t[3])>>>16,P+=65535&S,A+=S>>>16,A+=(P+=(I+=(x+=65535&E)>>>16)>>>16)>>>16,e[3]=j=65535&P|A<<16,t[3]=$=65535&x|I<<16,x=65535&(E=G),I=E>>>16,P=65535&(S=N),A=S>>>16,S=e[4],I+=(E=t[4])>>>16,P+=65535&S,A+=S>>>16,A+=(P+=(I+=(x+=65535&E)>>>16)>>>16)>>>16,e[4]=N=65535&P|A<<16,t[4]=G=65535&x|I<<16,x=65535&(E=H),I=E>>>16,P=65535&(S=B),A=S>>>16,S=e[5],I+=(E=t[5])>>>16,P+=65535&S,A+=S>>>16,A+=(P+=(I+=(x+=65535&E)>>>16)>>>16)>>>16,e[5]=B=65535&P|A<<16,t[5]=H=65535&x|I<<16,x=65535&(E=z),I=E>>>16,P=65535&(S=q),A=S>>>16,S=e[6],I+=(E=t[6])>>>16,P+=65535&S,A+=S>>>16,A+=(P+=(I+=(x+=65535&E)>>>16)>>>16)>>>16,e[6]=q=65535&P|A<<16,t[6]=z=65535&x|I<<16,x=65535&(E=Y),I=E>>>16,P=65535&(S=F),A=S>>>16,S=e[7],I+=(E=t[7])>>>16,P+=65535&S,A+=S>>>16,A+=(P+=(I+=(x+=65535&E)>>>16)>>>16)>>>16,e[7]=F=65535&P|A<<16,t[7]=Y=65535&x|I<<16,W+=128,n-=128}return n}function Q(e,t,r){var n,s=new Int32Array(8),i=new Int32Array(8),o=new Uint8Array(256),a=r;for(s[0]=1779033703,s[1]=3144134277,s[2]=1013904242,s[3]=2773480762,s[4]=1359893119,s[5]=2600822924,s[6]=528734635,s[7]=1541459225,i[0]=4089235720,i[1]=2227873595,i[2]=4271175723,i[3]=1595750129,i[4]=2917565137,i[5]=725511199,i[6]=4215389547,i[7]=327033209,J(s,i,t,r),r%=128,n=0;n<r;n++)o[n]=t[a-r+n];for(o[r]=128,o[(r=256-128*(r<112?1:0))-9]=0,f(o,r-8,a/536870912|0,a<<3),J(s,i,o,r),n=0;n<8;n++)f(e,8*n,s[n],i[n]);return 0}function Z(e,t){var n=r(),s=r(),i=r(),o=r(),a=r(),c=r(),u=r(),d=r(),l=r();q(n,e[1],e[0]),q(l,t[1],t[0]),F(n,n,l),B(s,e[0],e[1]),B(l,t[0],t[1]),F(s,s,l),F(i,e[3],t[3]),F(i,i,h),F(o,e[2],t[2]),B(o,o,o),q(a,s,n),q(c,o,i),B(u,o,i),B(d,s,n),F(e[0],a,c),F(e[1],d,u),F(e[2],u,c),F(e[3],a,d)}function X(e,t,r){var n;for(n=0;n<4;n++)R(e[n],t[n],r)}function ee(e,t){var n=r(),s=r(),i=r();L(i,t[2]),F(n,t[0],i),F(s,t[1],i),M(e,s),e[31]^=j(n)<<7}function te(e,t,r){var n,s;for(C(e[0],o),C(e[1],a),C(e[2],a),C(e[3],o),s=255;s>=0;--s)X(e,t,n=r[s/8|0]>>(7&s)&1),Z(t,e),Z(e,e),X(e,t,n)}function re(e,t){var n=[r(),r(),r(),r()];C(n[0],d),C(n[1],l),C(n[2],a),F(n[3],d,l),te(e,n,t)}function ne(e,t,s){var i,o=new Uint8Array(64),a=[r(),r(),r(),r()];for(s||n(t,32),Q(o,t,32),o[0]&=248,o[31]&=127,o[31]|=64,re(a,o),ee(e,a),i=0;i<32;i++)t[i+32]=e[i];return 0}var se=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ie(e,t){var r,n,s,i;for(n=63;n>=32;--n){for(r=0,s=n-32,i=n-12;s<i;++s)t[s]+=r-16*t[n]*se[s-(n-32)],r=Math.floor((t[s]+128)/256),t[s]-=256*r;t[s]+=r,t[n]=0}for(r=0,s=0;s<32;s++)t[s]+=r-(t[31]>>4)*se[s],r=t[s]>>8,t[s]&=255;for(s=0;s<32;s++)t[s]-=r*se[s];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function oe(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;ie(e,r)}function ae(e,t,n,s){var i,o,a=new Uint8Array(64),c=new Uint8Array(64),u=new Uint8Array(64),h=new Float64Array(64),d=[r(),r(),r(),r()];Q(a,s,32),a[0]&=248,a[31]&=127,a[31]|=64;var l=n+64;for(i=0;i<n;i++)e[64+i]=t[i];for(i=0;i<32;i++)e[32+i]=a[32+i];for(Q(u,e.subarray(32),n+32),oe(u),re(d,u),ee(e,d),i=32;i<64;i++)e[i]=s[i];for(Q(c,e,n+64),oe(c),i=0;i<64;i++)h[i]=0;for(i=0;i<32;i++)h[i]=u[i];for(i=0;i<32;i++)for(o=0;o<32;o++)h[i+o]+=c[i]*a[o];return ie(e.subarray(32),h),l}function ce(e,t,n,s){var i,c=new Uint8Array(32),h=new Uint8Array(64),d=[r(),r(),r(),r()],l=[r(),r(),r(),r()];if(n<64)return-1;if(function(e,t){var n=r(),s=r(),i=r(),c=r(),h=r(),d=r(),l=r();return C(e[2],a),N(e[1],t),U(i,e[1]),F(c,i,u),q(i,i,e[2]),B(c,e[2],c),U(h,c),U(d,h),F(l,d,h),F(n,l,i),F(n,n,c),K(n,n),F(n,n,i),F(n,n,c),F(n,n,c),F(e[0],n,c),U(s,e[0]),F(s,s,c),D(s,i)&&F(e[0],e[0],p),U(s,e[0]),F(s,s,c),D(s,i)?-1:(j(e[0])===t[31]>>7&&q(e[0],o,e[0]),F(e[3],e[0],e[1]),0)}(l,s))return-1;for(i=0;i<n;i++)e[i]=t[i];for(i=0;i<32;i++)e[i+32]=s[i];if(Q(h,e,n),oe(h),te(d,l,h),re(l,t.subarray(32)),Z(d,l),ee(c,d),n-=64,m(t,0,c,0)){for(i=0;i<n;i++)e[i]=0;return-1}for(i=0;i<n;i++)e[i]=t[i+64];return n}var ue=32,he=24,de=16,le=32,pe=32,fe=he,ge=64,ye=32,me=64;function be(e,t){if(e.length!==ue)throw new Error("bad key size");if(t.length!==he)throw new Error("bad nonce size")}function Te(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function we(e){for(var t=0;t<e.length;t++)e[t]=0}t.lowlevel={crypto_core_hsalsa20:T,crypto_stream_xor:S,crypto_stream:_,crypto_stream_salsa20_xor:v,crypto_stream_salsa20:k,crypto_onetimeauth:x,crypto_onetimeauth_verify:I,crypto_verify_16:y,crypto_verify_32:m,crypto_secretbox:P,crypto_secretbox_open:A,crypto_scalarmult:$,crypto_scalarmult_base:G,crypto_box_beforenm:z,crypto_box_afternm:Y,crypto_box:function(e,t,r,n,s,i){var o=new Uint8Array(32);return z(o,s,i),Y(e,t,r,n,o)},crypto_box_open:function(e,t,r,n,s,i){var o=new Uint8Array(32);return z(o,s,i),W(e,t,r,n,o)},crypto_box_keypair:H,crypto_hash:Q,crypto_sign:ae,crypto_sign_keypair:ne,crypto_sign_open:ce,crypto_secretbox_KEYBYTES:ue,crypto_secretbox_NONCEBYTES:he,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:de,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:le,crypto_box_SECRETKEYBYTES:pe,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:fe,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:ge,crypto_sign_PUBLICKEYBYTES:ye,crypto_sign_SECRETKEYBYTES:me,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:r,D:u,L:se,pack25519:M,unpack25519:N,M:F,A:B,S:U,Z:q,pow2523:K,add:Z,set25519:C,modL:ie,scalarmult:te,scalarbase:re},t.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},t.secretbox=function(e,t,r){Te(e,t,r),be(r,t);for(var n=new Uint8Array(32+e.length),s=new Uint8Array(n.length),i=0;i<e.length;i++)n[i+32]=e[i];return P(s,n,n.length,t,r),s.subarray(de)},t.secretbox.open=function(e,t,r){Te(e,t,r),be(r,t);for(var n=new Uint8Array(de+e.length),s=new Uint8Array(n.length),i=0;i<e.length;i++)n[i+de]=e[i];return n.length<32||0!==A(s,n,n.length,t,r)?null:s.subarray(32)},t.secretbox.keyLength=ue,t.secretbox.nonceLength=he,t.secretbox.overheadLength=de,t.scalarMult=function(e,t){if(Te(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return $(r,e,t),r},t.scalarMult.base=function(e){if(Te(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return G(t,e),t},t.scalarMult.scalarLength=32,t.scalarMult.groupElementLength=32,t.box=function(e,r,n,s){var i=t.box.before(n,s);return t.secretbox(e,r,i)},t.box.before=function(e,t){Te(e,t),function(e,t){if(e.length!==le)throw new Error("bad public key size");if(t.length!==pe)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return z(r,e,t),r},t.box.after=t.secretbox,t.box.open=function(e,r,n,s){var i=t.box.before(n,s);return t.secretbox.open(e,r,i)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var e=new Uint8Array(le),t=new Uint8Array(pe);return H(e,t),{publicKey:e,secretKey:t}},t.box.keyPair.fromSecretKey=function(e){if(Te(e),e.length!==pe)throw new Error("bad secret key size");var t=new Uint8Array(le);return G(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},t.box.publicKeyLength=le,t.box.secretKeyLength=pe,t.box.sharedKeyLength=32,t.box.nonceLength=fe,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(e,t){if(Te(e,t),t.length!==me)throw new Error("bad secret key size");var r=new Uint8Array(ge+e.length);return ae(r,e,e.length,t),r},t.sign.open=function(e,t){if(Te(e,t),t.length!==ye)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=ce(r,e,e.length,t);if(n<0)return null;for(var s=new Uint8Array(n),i=0;i<s.length;i++)s[i]=r[i];return s},t.sign.detached=function(e,r){for(var n=t.sign(e,r),s=new Uint8Array(ge),i=0;i<s.length;i++)s[i]=n[i];return s},t.sign.detached.verify=function(e,t,r){if(Te(e,t,r),t.length!==ge)throw new Error("bad signature size");if(r.length!==ye)throw new Error("bad public key size");var n,s=new Uint8Array(ge+e.length),i=new Uint8Array(ge+e.length);for(n=0;n<ge;n++)s[n]=t[n];for(n=0;n<e.length;n++)s[n+ge]=e[n];return ce(i,s,s.length,r)>=0},t.sign.keyPair=function(){var e=new Uint8Array(ye),t=new Uint8Array(me);return ne(e,t),{publicKey:e,secretKey:t}},t.sign.keyPair.fromSecretKey=function(e){if(Te(e),e.length!==me)throw new Error("bad secret key size");for(var t=new Uint8Array(ye),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},t.sign.keyPair.fromSeed=function(e){if(Te(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(ye),r=new Uint8Array(me),n=0;n<32;n++)r[n]=e[n];return ne(t,r,!0),{publicKey:t,secretKey:r}},t.sign.publicKeyLength=ye,t.sign.secretKeyLength=me,t.sign.seedLength=32,t.sign.signatureLength=ge,t.hash=function(e){Te(e);var t=new Uint8Array(64);return Q(t,e,e.length),t},t.hash.hashLength=64,t.verify=function(e,t){return Te(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===g(e,0,t,0,e.length))},t.setPRNG=function(e){n=e},function(){var r="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(r&&r.getRandomValues){t.setPRNG((function(e,t){var n,s=new Uint8Array(t);for(n=0;n<t;n+=65536)r.getRandomValues(s.subarray(n,n+Math.min(t-n,65536)));for(n=0;n<t;n++)e[n]=s[n];we(s)}))}else void 0!==e&&(r=e("crypto"))&&r.randomBytes&&t.setPRNG((function(e,t){var n,s=r.randomBytes(t);for(n=0;n<t;n++)e[n]=s[n];we(s)}))}()}(void 0!==t&&t.exports?t.exports:self.nacl=self.nacl||{})}}},{package:"eth-sig-util>tweetnacl",file:"node_modules/tweetnacl/nacl-fast.js"}],[3347,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/concat.js"}],[3348,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/equals.js"}],[3349,{multibase:2979},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{encoding:n}=e("multibase"),s=new TextEncoder;t.exports=function(e,t="utf8"){return"utf8"===t||"utf-8"===t?s.encode(e):"ascii"===t?function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(e):n(t).decode(e)}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/from-string.js"}],[3350,{multibase:2979},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{encoding:n}=e("multibase"),s=new TextDecoder("utf8");t.exports=function(e,t="utf8"){return"utf8"===t||"utf-8"===t?s.decode(e):"ascii"===t?function(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}(e):n(t).encode(e)}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/to-string.js"}],[3384,{util:2071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.TextEncoder="undefined"!=typeof TextEncoder?TextEncoder:e("util").TextEncoder,r.TextDecoder="undefined"!=typeof TextDecoder?TextDecoder:e("util").TextDecoder}}},{package:"@ensdomains/content-hash>multihashes>web-encoding",file:"node_modules/web-encoding/src/lib.js"}],[3394,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){!function(e,n){"object"==typeof r&&void 0!==t?n(r):"function"==typeof define&&define.amd?define(["exports"],n):n(e.WHATWGFetch={})}(this,(function(e){var t="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==t&&t,r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(r.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function o(e){return"string"!=typeof e&&(e=String(e)),e}function a(e){var t={next:function(){var t=e.shift();return{done:t===undefined,value:t}}};return r.iterable&&(t[Symbol.iterator]=function(){return t}),t}function c(e){this.map={},e instanceof c?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function u(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function d(e){var t=new FileReader,r=h(t);return t.readAsArrayBuffer(e),r}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:r.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:r.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():r.arrayBuffer&&r.blob&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||s(e))?this._bodyArrayBuffer=l(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=u(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(d)}),this.text=function(){var e,t,r,n=u(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=h(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(e,t){e=i(e),t=o(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},c.prototype.delete=function(e){delete this.map[i(e)]},c.prototype.get=function(e){return e=i(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},c.prototype.set=function(e,t){this.map[i(e)]=o(t)},c.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},c.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),a(e)},c.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),a(e)},c.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),a(e)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var f=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(e,t){if(!(this instanceof g))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,s=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),f.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(s),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function y(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),s=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(s))}})),t}function m(e,t){if(!(this instanceof m))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=t.status===undefined?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText===undefined?"":""+t.statusText,this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},p.call(g.prototype),p.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];m.redirect=function(e,t){if(-1===b.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function T(n,s){return new Promise((function(i,a){var u=new g(n,s);if(u.signal&&u.signal.aborted)return a(new e.DOMException("Aborted","AbortError"));var h=new XMLHttpRequest;function d(){h.abort()}h.onload=function(){var e,t,r={status:h.status,statusText:h.statusText,headers:(e=h.getAllResponseHeaders()||"",t=new c,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var s=r.join(":").trim();t.append(n,s)}})),t)};r.url="responseURL"in h?h.responseURL:r.headers.get("X-Request-URL");var n="response"in h?h.response:h.responseText;setTimeout((function(){i(new m(n,r))}),0)},h.onerror=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},h.ontimeout=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},h.onabort=function(){setTimeout((function(){a(new e.DOMException("Aborted","AbortError"))}),0)},h.open(u.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(t){return e}}(u.url),!0),"include"===u.credentials?h.withCredentials=!0:"omit"===u.credentials&&(h.withCredentials=!1),"responseType"in h&&(r.blob?h.responseType="blob":r.arrayBuffer&&u.headers.get("Content-Type")&&-1!==u.headers.get("Content-Type").indexOf("application/octet-stream")&&(h.responseType="arraybuffer")),!s||"object"!=typeof s.headers||s.headers instanceof c?u.headers.forEach((function(e,t){h.setRequestHeader(t,e)})):Object.getOwnPropertyNames(s.headers).forEach((function(e){h.setRequestHeader(e,o(s.headers[e]))})),u.signal&&(u.signal.addEventListener("abort",d),h.onreadystatechange=function(){4===h.readyState&&u.signal.removeEventListener("abort",d)}),h.send(void 0===u._bodyInit?null:u._bodyInit)}))}T.polyfill=!0,t.fetch||(t.fetch=T,t.Headers=c,t.Request=g,t.Response=m),e.Headers=c,e.Request=g,e.Response=m,e.fetch=T,Object.defineProperty(e,"__esModule",{value:!0})}))}}},{package:"@metamask/smart-transactions-controller>isomorphic-fetch>whatwg-fetch",file:"node_modules/whatwg-fetch/dist/fetch.umd.js"}],[34,{"../../../../shared/modules/conversion.utils":3440,"../../lib/util":81,"ethereumjs-util":2340,"ethjs-query":2383,lodash:2954,loglevel:2966},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(e("ethjs-query")),s=u(e("loglevel")),i=e("ethereumjs-util"),o=e("lodash"),a=e("../../lib/util"),c=e("../../../../shared/modules/conversion.utils");function u(e){return e&&e.__esModule?e:{default:e}}r.default=class{constructor(e){this.query=new n.default(e)}async analyzeGasUsage(e){const t=await this.query.getBlockByNumber("latest",!1),r=(0,a.hexToBn)(t.gasLimit),n=(0,a.BnMultiplyByFraction)(r,19,20);let i,o=(0,c.bnToHex)(n);try{o=await this.estimateTxGas(e)}catch(e){s.default.warn(e),i={reason:e.message,errorKey:e.errorKey,debug:{blockNumber:t.number,blockGasLimit:t.gasLimit}}}return{blockGasLimit:t.gasLimit,estimatedGasHex:o,simulationFails:i}}async estimateTxGas(e){const t=(0,o.cloneDeep)(e.txParams);return delete t.gasPrice,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,await this.query.estimateGas(t)}addGasBuffer(e,t,r=1.5){const n=(0,a.hexToBn)(e),s=(0,a.hexToBn)(t).muln(.9),i=n.muln(r);return n.gt(s)?(0,c.bnToHex)(n):i.lt(s)?(0,c.bnToHex)(i):(0,c.bnToHex)(s)}async getBufferedGasLimit(e,t){const{blockGasLimit:r,estimatedGasHex:n,simulationFails:s}=await this.analyzeGasUsage(e);return{gasLimit:this.addGasBuffer((0,i.addHexPrefix)(n),r,t),simulationFails:s}}}}}},{package:"$root$",file:"app/scripts/controllers/transactions/tx-gas-utils.js"}],[3407,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM=r.AUTO_LOCK_TIMEOUT_ALARM=void 0;r.AUTO_LOCK_TIMEOUT_ALARM="AUTO_LOCK_TIMEOUT_ALARM";r.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM="METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM"}}},{package:"$root$",file:"shared/constants/alarms.js"}],[3420,{"./time":3424},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME=r.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER=r.FALLBACK_SMART_TRANSACTIONS_DEADLINE=void 0;const n=10*e("./time").SECOND;r.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME=n;r.FALLBACK_SMART_TRANSACTIONS_DEADLINE=180;r.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER=2}}},{package:"$root$",file:"shared/constants/smartTransactions.js"}],[3423,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ACTION_QUEUE_METRICS_E2E_TEST=void 0;r.ACTION_QUEUE_METRICS_E2E_TEST="action_queue_metrics_e2e_test"}}},{package:"$root$",file:"shared/constants/test-flags.js"}],[35,{"../../../../shared/constants/app":3409,"../../../../shared/constants/network":3417,"../../../../shared/constants/transaction":3426,"../../../../shared/modules/random-id":3448,"../../../../shared/modules/transaction.utils":3453,"../../metamask-controller":82,"./lib/tx-state-history-helpers":31,"./lib/util":32,"@metamask/obs-store":1301,"@metamask/safe-event-emitter":1320,lodash:2954,loglevel:2966},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ERROR_SUBMITTING=void 0;var n=g(e("@metamask/safe-event-emitter")),s=e("@metamask/obs-store"),i=g(e("loglevel")),o=e("lodash"),a=g(e("../../../../shared/modules/random-id")),c=e("../../../../shared/constants/transaction"),u=e("../../metamask-controller"),h=e("../../../../shared/modules/transaction.utils"),d=e("../../../../shared/constants/app"),l=e("../../../../shared/constants/network"),p=e("./lib/tx-state-history-helpers"),f=e("./lib/util");function g(e){return e&&e.__esModule?e:{default:e}}const y="There was an error when resubmitting this transaction.";r.ERROR_SUBMITTING=y;class m extends n.default{constructor({initState:e,txHistoryLimit:t,getNetworkId:r,getNetworkStatus:n,getCurrentChainId:i}){super(),this.store=new s.ObservableStore({transactions:{},...e}),this.txHistoryLimit=t,this.getNetworkId=r,this.getNetworkStatus=n,this.getCurrentChainId=i}generateTxMeta(e={}){var t;const r=this.getNetworkId(),n=this.getNetworkStatus(),s=this.getCurrentChainId();if(n!==l.NetworkStatus.Available)throw new Error("MetaMask is having trouble connecting to the network");let i=null;return e.txParams&&"string"==typeof e.origin&&e.origin!==d.ORIGIN_METAMASK&&(void 0!==e.txParams.gasPrice?i={gasPrice:e.txParams.gasPrice}:void 0===e.txParams.maxFeePerGas&&void 0===e.txParams.maxPriorityFeePerGas||(i={maxPriorityFeePerGas:e.txParams.maxPriorityFeePerGas,maxFeePerGas:e.txParams.maxFeePerGas}),void 0!==e.txParams.gas&&(i={...i,gas:e.txParams.gas})),{id:(0,a.default)(),time:(new Date).getTime(),status:c.TransactionStatus.unapproved,metamaskNetworkId:r,originalGasEstimate:null===(t=e.txParams)||void 0===t?void 0:t.gas,userEditedGasLimit:!1,chainId:s,loadingDefaults:!0,dappSuggestedGasFees:i,sendFlowHistory:[],...e}}getUnapprovedTxList(){const e=this.getCurrentChainId(),t=this.getNetworkId();return(0,o.pickBy)(this.store.getState().transactions,(r=>r.status===c.TransactionStatus.unapproved&&(0,h.transactionMatchesNetwork)(r,e,t)))}getApprovedTransactions(e){const t={status:c.TransactionStatus.approved};return e&&(t.from=e),this.getTransactions({searchCriteria:t})}getPendingTransactions(e){const t={status:c.TransactionStatus.submitted};return e&&(t.from=e),this.getTransactions({searchCriteria:t})}getConfirmedTransactions(e){const t={status:c.TransactionStatus.confirmed};return e&&(t.from=e),this.getTransactions({searchCriteria:t})}getTransactionWithActionId(e){return(0,o.values)((0,o.pickBy)(this.store.getState().transactions,(t=>t.actionId===e)))[0]}addTransaction(e){e.txParams&&(e.txParams=(0,f.normalizeAndValidateTxParams)(e.txParams,!1)),this.once(`${e.id}:signed`,(()=>{this.removeAllListeners(`${e.id}:rejected`)})),this.once(`${e.id}:rejected`,(()=>{this.removeAllListeners(`${e.id}:signed`)})),e.history=[];const t=(0,p.snapshotFromTxMeta)(e);e.history.push(t);const r=this.getTransactions({filterToCurrentNetwork:!1}),{txHistoryLimit:n}=this,s=new Set,i=r.reverse().filter((e=>{const{nonce:t,from:r}=e.txParams,{chainId:i,metamaskNetworkId:o,status:a}=e,c=`${t}-${i??o}-${r}`;return!s.has(c)&&(!(s.size<n-1||!1===(0,f.getFinalStates)().includes(a))||(s.add(c),!1))})).map((e=>e.id));return this._deleteTransactions(i),this._addTransactionsToState([e]),e}addExternalTransaction(e){var t;const r=null==e||null===(t=e.txParams)||void 0===t?void 0:t.from,n=this.getConfirmedTransactions(r),s=this.getPendingTransactions(r);return(0,f.validateConfirmedExternalTransaction)({txMeta:e,pendingTransactions:s,confirmedTransactions:n}),this._addTransactionsToState([e]),e}getTransaction(e){const{transactions:t}=this.store.getState();return t[e]}updateTransaction(e,t){if(e.txParams)try{e.txParams=(0,f.normalizeAndValidateTxParams)(e.txParams,!1)}catch(t){if(e.warning.message!==y)throw t;return void this.setTxStatusFailed(e.id,t)}this._updateTransactionHistory(e,t)}_updateTransactionHistory(e,t){const r=(0,p.snapshotFromTxMeta)(e),n=(0,p.replayHistory)(e.history),s=(0,p.generateHistoryEntry)(n,r,t);s.length&&e.history.push(s);const i=e.id;this.store.updateState({transactions:{...this.store.getState().transactions,[i]:e}})}getTransactions({searchCriteria:e={},initialList:t,filterToCurrentNetwork:r=!0,limit:n}={}){const s=this.getCurrentChainId(),i=this.getNetworkId(),a=(0,o.mapValues)(e,(e=>"function"==typeof e?e:t=>t===e)),c=t?(0,o.keyBy)(t,"id"):this.store.getState().transactions,u=(0,o.sortBy)((0,o.pickBy)(c,(e=>{if(r&&!1===(0,h.transactionMatchesNetwork)(e,s,i))return!1;for(const[t,r]of Object.entries(a))if(t in e.txParams){if(!1===r(e.txParams[t]))return!1}else if(!1===r(e[t]))return!1;return!0})),"time");if(n!==undefined){const e=new Set,t=[];for(let r=u.length-1;r>-1;r--){const s=u[r],{nonce:i}=s.txParams;if(!e.has(i)){if(!(e.size<n))continue;e.add(i)}t.unshift(s)}return t}return u}setTxStatusRejected(e){this._setTransactionStatus(e,c.TransactionStatus.rejected),this._deleteTransaction(e)}setTxStatusUnapproved(e){this._setTransactionStatus(e,c.TransactionStatus.unapproved)}setTxStatusApproved(e){this._setTransactionStatus(e,c.TransactionStatus.approved)}setTxStatusSigned(e){this._setTransactionStatus(e,c.TransactionStatus.signed)}setTxStatusSubmitted(e){const t=this.getTransaction(e);t.submittedTime=(new Date).getTime(),this.updateTransaction(t,"txStateManager - add submitted time stamp"),this._setTransactionStatus(e,c.TransactionStatus.submitted)}setTxStatusConfirmed(e){this._setTransactionStatus(e,c.TransactionStatus.confirmed)}setTxStatusDropped(e){this._setTransactionStatus(e,c.TransactionStatus.dropped)}setTxStatusFailed(e,t){var r;const n=t||new Error("Internal metamask failure"),s=this.getTransaction(e);s.err={message:(null===(r=n.message)||void 0===r?void 0:r.toString())||n.toString(),rpc:n.value,stack:n.stack},this._updateTransactionHistory(s,"transactions:tx-state-manager#fail - add error"),this._setTransactionStatus(e,c.TransactionStatus.failed)}wipeTransactions(e){const{transactions:t}=this.store.getState(),r=this.getCurrentChainId(),n=this.getNetworkId();this.store.updateState({transactions:(0,o.omitBy)(t,(t=>t.txParams.from===e&&(0,h.transactionMatchesNetwork)(t,r,n)))})}clearUnapprovedTxs(){this.store.updateState({transactions:(0,o.omitBy)(this.store.getState().transactions,(e=>e.status===c.TransactionStatus.unapproved))})}_setTransactionStatus(e,t){const r=this.getTransaction(e);if(r){r.status=t;try{this._updateTransactionHistory(r,`txStateManager: setting status to ${t}`),this.emit(`${r.id}:${t}`,e),this.emit("tx:status-update",e,t),[c.TransactionStatus.submitted,c.TransactionStatus.rejected,c.TransactionStatus.failed].includes(t)&&this.emit(`${r.id}:finished`,r),this.emit(u.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}catch(e){i.default.error(e)}}}_addTransactionsToState(e){this.store.updateState({transactions:e.reduce(((e,t)=>(e[t.id]=t,e)),this.store.getState().transactions)})}_deleteTransaction(e){const{transactions:t}=this.store.getState();delete t[e],this.store.updateState({transactions:t})}_deleteTransactions(e){const{transactions:t}=this.store.getState();e.forEach((e=>{delete t[e]})),this.store.updateState({transactions:t})}}r.default=m}}},{package:"$root$",file:"app/scripts/controllers/transactions/tx-state-manager.js"}],[36,{"../../shared/constants/app":3409,"./lib/util":81,"webextension-polyfill":3393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.onMessageReceived=r.checkForMultipleVersionsRunning=void 0;var n,s=(n=e("webextension-polyfill"))&&n.__esModule?n:{default:n},i=e("../../shared/constants/app"),o=e("./lib/util");const a="isRunning";r.onMessageReceived=e=>{e===a&&console.warn("Warning! You have multiple instances of MetaMask running!")};r.checkForMultipleVersionsRunning=async()=>{if((0,o.getPlatform)()!==i.PLATFORM_CHROME&&(0,o.getPlatform)()!==i.PLATFORM_FIREFOX)return;const e=(0,o.getPlatform)()===i.PLATFORM_CHROME?i.CHROME_BUILD_IDS:i.FIREFOX_BUILD_IDS,t=s.default.runtime.id;for(const r of e)if(r!==t)try{await s.default.runtime.sendMessage(r,a)}catch(e){}}}}},{package:"$root$",file:"app/scripts/detect-multiple-instances.js"}],[37,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={config:{}};r.default=n}}},{package:"$root$",file:"app/scripts/first-time-state.js"}],[38,{"@metamask/base-controller":1099,"@metamask/obs-store":1301},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/obs-store"),s=e("@metamask/base-controller");function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends n.ObservableStore{constructor({config:e,controllerMessenger:t,state:r,persist:n}){super(r),i(this,"config",{}),this.persist=n,this.controllerMessenger=t,e&&this.updateStructure(e)}updateStructure(e){this.config=e,this.removeAllListeners();for(const t of Object.keys(e)){if(!e[t])throw new Error(`Undefined '${t}'`);const r=e[t];r.subscribe?e[t].subscribe((e=>{this.updateState({[t]:e})})):this.controllerMessenger.subscribe(`${r.name}:stateChange`,(r=>{let n=r;this.persist&&(n=(0,s.getPersistentState)(r,e[t].metadata)),this.updateState({[t]:n})}))}}getFlatState(){if(!this.config)return{};let e={};for(const t of Object.keys(this.config)){const r=this.config[t],n=r.getState?r.getState():r.state;e={...e,...n}}return e}}r.default=o}}},{package:"$root$",file:"app/scripts/lib/ComposableObservableStore.js"}],[39,{"../../../shared/constants/network":3417,"../constants/contracts":5,"./util":81,"@ethersproject/contracts":423,"@ethersproject/providers":462,"@metamask/obs-store":1301,"eth-query":2282,loglevel:2966,pify:3047,"single-call-balance-checker-abi":3331},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=p(e("eth-query")),s=e("@metamask/obs-store"),i=p(e("loglevel")),o=p(e("pify")),a=e("@ethersproject/providers"),c=e("@ethersproject/contracts"),u=p(e("single-call-balance-checker-abi")),h=e("../../../shared/constants/network"),d=e("../constants/contracts"),l=e("./util");function p(e){return e&&e.__esModule?e:{default:e}}r.default=class{constructor(e={}){const t={accounts:{},currentBlockGasLimit:""};this.store=new s.ObservableStore({...t,...e.initState}),this.resetState=()=>{this.store.updateState(t)},this._provider=e.provider,this._query=(0,o.default)(new n.default(this._provider)),this._blockTracker=e.blockTracker,this._currentBlockNumber=this._blockTracker.getCurrentBlock(),this._blockTracker.once("latest",(e=>{this._currentBlockNumber=e})),this._updateForBlock=this._updateForBlock.bind(this),this.getCurrentChainId=e.getCurrentChainId,this.getNetworkIdentifier=e.getNetworkIdentifier,this.preferencesController=e.preferencesController,this.onboardingController=e.onboardingController,this.onboardingController.store.subscribe((0,l.previousValueComparator)((async(e,t)=>{const{completedOnboarding:r}=e,{completedOnboarding:n}=t;!r&&n&&this._updateAccounts()}),this.onboardingController.store.getState())),this.preferencesController.store.subscribe((0,l.previousValueComparator)((async(e,t)=>{const{selectedAddress:r}=e,{selectedAddress:n,useMultiAccountBalanceChecker:s}=t;r===n||s||this._updateAccounts()}),this.onboardingController.store.getState())),this.ethersProvider=new a.Web3Provider(this._provider)}start(){this._blockTracker.removeListener("latest",this._updateForBlock),this._blockTracker.addListener("latest",this._updateForBlock),this._updateAccounts()}stop(){this._blockTracker.removeListener("latest",this._updateForBlock)}syncWithAddresses(e){const{accounts:t}=this.store.getState(),r=Object.keys(t),n=[];e.forEach((e=>{r.includes(e)||n.push(e)}));const s=[];r.forEach((t=>{e.includes(t)||s.push(t)})),this.addAccounts(n),this.removeAccount(s)}addAccounts(e){const{accounts:t}=this.store.getState();e.forEach((e=>{t[e]={}})),this.store.updateState({accounts:t}),this._currentBlockNumber&&this._updateAccounts()}removeAccount(e){const{accounts:t}=this.store.getState();e.forEach((e=>{delete t[e]})),this.store.updateState({accounts:t})}clearAccounts(){this.store.updateState({accounts:{}})}async _updateForBlock(e){this._currentBlockNumber=e;const t=await this._query.getBlockByNumber(e,!1);if(!t)return;const r=t.gasLimit;this.store.updateState({currentBlockGasLimit:r});try{await this._updateAccounts()}catch(e){i.default.error(e)}}async _updateAccounts(){const{completedOnboarding:e}=this.onboardingController.store.getState();if(!e)return;const{useMultiAccountBalanceChecker:t}=this.preferencesController.store.getState();let r=[];if(t){const{accounts:e}=this.store.getState();r=Object.keys(e)}else{r=[this.preferencesController.getSelectedAddress()]}const n=this.getCurrentChainId(),s=this.getNetworkIdentifier();if(s===h.LOCALHOST_RPC_URL||"http://127.0.0.1:8545"===s)await Promise.all(r.map(this._updateAccount.bind(this)));else switch(n){case h.CHAIN_IDS.MAINNET:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS);break;case h.CHAIN_IDS.GOERLI:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS_GOERLI);break;case h.CHAIN_IDS.SEPOLIA:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS_SEPOLIA);break;case h.CHAIN_IDS.BSC:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS_BSC);break;case h.CHAIN_IDS.OPTIMISM:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS_OPTIMISM);break;case h.CHAIN_IDS.POLYGON:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS_POLYGON);break;case h.CHAIN_IDS.AVALANCHE:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS_AVALANCHE);break;case h.CHAIN_IDS.FANTOM:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS_FANTOM);break;case h.CHAIN_IDS.ARBITRUM:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS_ARBITRUM);break;default:await Promise.all(r.map(this._updateAccount.bind(this)))}}async _updateAccount(e){const{useMultiAccountBalanceChecker:t}=this.preferencesController.store.getState();let r="0x0";try{r=await this._query.getBalance(e)}catch(e){var n,s;if("eth_getBalance"!==(null===(n=e.data)||void 0===n||null===(s=n.request)||void 0===s?void 0:s.method))throw e}const i={address:e,balance:r},{accounts:o}=this.store.getState();if(!o[e])return;let a=o;t||(a={},Object.keys(o).forEach((t=>{e!==t&&(a[t]={address:t,balance:null})}))),a[e]=i,this.store.updateState({accounts:a})}async _updateAccountsViaBalanceChecker(e,t){const{accounts:r}=this.store.getState(),n={};Object.keys(r).forEach((t=>{e.includes(t)||(n[t]={address:t,balance:null})})),this.ethersProvider=new a.Web3Provider(this._provider);const s=await new c.Contract(t,u.default,this.ethersProvider),o=["0x0000000000000000000000000000000000000000"];try{const t=await s.balances(e,o);e.forEach(((e,r)=>{const s=t[r]?t[r].toHexString():"0x0";n[e]={address:e,balance:s}})),this.store.updateState({accounts:n})}catch(t){i.default.warn("MetaMask - Account Tracker single call balance fetch failed",t),Promise.all(e.map(this._updateAccount.bind(this)))}}}}}},{package:"$root$",file:"app/scripts/lib/account-tracker.js"}],[40,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){let{name:t}=e;t=t===undefined?"Error":String(t);let r=e.message;r=r===undefined?"":String(r),""===t?e.stack=e.message:""===r?e.stack=e.name:e.stack||(e.stack=`${e.name}: ${e.message}`);return e}}}},{package:"$root$",file:"app/scripts/lib/cleanErrorStack.js"}],[41,{loglevel:2966},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){const e=[];return function(t,r,n,i){return e.indexOf(t.id)>=0?(s.default.info(`RPC request with id ${t.id} already seen.`),i()):(e.push(t.id),n())}};var n,s=(n=e("loglevel"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"app/scripts/lib/createDupeReqFilterMiddleware.js"}],[42,{loglevel:2966},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){n((n=>{r.error&&s.default.error("Error in RPC response:\n",r),t.isMetamaskInternal||(s.default.info(`RPC (${e.origin}):`,t,"->",r),n())}))}};var n,s=(n=e("loglevel"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"app/scripts/lib/createLoggerMiddleware.js"}],[43,{"../../../shared/modules/mv3.utils":3445,"eth-rpc-errors":2286},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors"),s=e("../../../shared/modules/mv3.utils");var i=(e,t,r,i)=>async o=>{if(t._writableState.ended)return;if(!e[o.method])return void t.write({jsonrpc:"2.0",error:n.ethErrors.rpc.methodNotFound({message:`${o.method} not found`}),id:o.id});let a,c;try{a=await e[o.method](...o.params)}catch(e){c=e}finally{s.isManifestV3&&r&&"getState"!==o.method&&i.set(r.getState())}t._writableState.ended?c&&console.error(c):c?t.write({jsonrpc:"2.0",error:(0,n.serializeError)(c,{shouldIncludeStack:!0}),id:o.id}):t.write({jsonrpc:"2.0",result:a,id:o.id})};r.default=i}}},{package:"$root$",file:"app/scripts/lib/createMetaRPCHandler.js"}],[44,{"./middleware/pending":59,"@metamask/eth-json-rpc-middleware":1150,"json-rpc-engine":2746},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({version:e,getAccounts:t,processTransaction:r,processEthSignMessage:o,processTypedMessage:a,processTypedMessageV3:c,processTypedMessageV4:u,processPersonalMessage:h,processDecryptMessage:d,processEncryptionPublicKey:l,getPendingNonce:p,getPendingTransactionByHash:f}){return(0,n.mergeMiddleware)([(0,n.createScaffoldMiddleware)({eth_syncing:!1,web3_clientVersion:`MetaMask/v${e}`}),(0,s.createWalletMiddleware)({getAccounts:t,processTransaction:r,processEthSignMessage:o,processTypedMessage:a,processTypedMessageV3:c,processTypedMessageV4:u,processPersonalMessage:h,processDecryptMessage:d,processEncryptionPublicKey:l}),(0,i.createPendingNonceMiddleware)({getPendingNonce:p}),(0,i.createPendingTxMiddleware)({getPendingTransactionByHash:f})])};var n=e("json-rpc-engine"),s=e("@metamask/eth-json-rpc-middleware"),i=e("./middleware/pending")}}},{package:"$root$",file:"app/scripts/lib/createMetamaskMiddleware.js"}],[45,{loglevel:2966,"webextension-polyfill":3393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({location:e,registerOnboarding:t}){return async function(r,i,o,a){try{if("wallet_registerOnboarding"!==r.method)return void o();r.tabId&&r.tabId!==s.default.tabs.TAB_ID_NONE?await t(e,r.tabId):n.default.debug(`'wallet_registerOnboarding' message from ${e} ignored due to missing tabId`),i.result=!0,a()}catch(e){a(e)}}};var n=i(e("loglevel")),s=i(e("webextension-polyfill"));function i(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"app/scripts/lib/createOnboardingMiddleware.js"}],[46,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){t.origin=e.origin,n()}}}}},{package:"$root$",file:"app/scripts/lib/createOriginMiddleware.js"}],[47,{"../../../shared/constants/app":3409,"../../../shared/constants/metametrics":3416,"../../../shared/constants/time":3424,"../../../shared/constants/transaction":3426,"@metamask/controller-utils":1104,"eth-rpc-errors":2286,"ethereumjs-util":2340},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({trackEvent:e,getMetricsState:t,rateLimitSeconds:r=300,securityProviderRequest:f}){return async function(g,y,m){const{origin:b,method:T}=g,w=d[T]??h.RATE_LIMITED,v=w===h.RATE_LIMITED&&void 0!==p[T],k=!0===t().participateInMetaMetrics,_=l[T],S={},E=b!==o.ORIGIN_METAMASK&&w!==h.BLOCKED&&!1===v&&!0===k;if(E){const t=_?_.REQUESTED:u.MetaMetricsEventName.ProviderMethodCalled;if(t===u.MetaMetricsEventName.SignatureRequested){var x,I;let e,t;var P,A,C,O;if(S.signature_type=T,(0,i.isValidAddress)(null==g||null===(x=g.params)||void 0===x?void 0:x[1]))e=null==g||null===(P=g.params)||void 0===P?void 0:P[0],t=null==g||null===(A=g.params)||void 0===A?void 0:A[1];else e=null==g||null===(C=g.params)||void 0===C?void 0:C[1],t=null==g||null===(O=g.params)||void 0===O?void 0:O[0];const r={msgParams:{...null==g||null===(I=g.params)||void 0===I?void 0:I[2],from:t,data:e,origin:b},status:a.TransactionStatus.unapproved,type:g.method};try{const t=await f(r,g.method);if(1===(null==t?void 0:t.flagAsDangerous)?S.ui_customizations=[u.MetaMetricsEventUiCustomization.FlaggedAsMalicious]:2===(null==t?void 0:t.flagAsDangerous)&&(S.ui_customizations=[u.MetaMetricsEventUiCustomization.FlaggedAsSafetyUnknown]),T===o.MESSAGE_TYPE.PERSONAL_SIGN){const{isSIWEMessage:t}=(0,s.detectSIWE)({data:e});t&&(S.ui_customizations=(S.ui_customizations||[]).concat(u.MetaMetricsEventUiCustomization.Siwe))}}catch(e){console.warn(`createRPCMethodTrackingMiddleware: Error calling securityProviderRequest - ${e}`)}}else S.method=T;e({event:t,category:u.MetaMetricsEventCategory.InpageProvider,referrer:{url:b},properties:S}),p[T]=setTimeout((()=>{delete p[T]}),c.SECOND*r)}m((async t=>{var r,s;if(!1===E||void 0===_)return t();let i;return T===o.MESSAGE_TYPE.ETH_SIGN&&(null===(r=y.error)||void 0===r?void 0:r.code)===n.errorCodes.rpc.methodNotFound?(i=_.FAILED,S.error=y.error):i=(null===(s=y.error)||void 0===s?void 0:s.code)===n.errorCodes.provider.userRejectedRequest?_.REJECTED:_.APPROVED,e({event:i,category:u.MetaMetricsEventCategory.InpageProvider,referrer:{url:b},properties:S}),t()}))}};var n=e("eth-rpc-errors"),s=e("@metamask/controller-utils"),i=e("ethereumjs-util"),o=e("../../../shared/constants/app"),a=e("../../../shared/constants/transaction"),c=e("../../../shared/constants/time"),u=e("../../../shared/constants/metametrics");const h={RATE_LIMITED:"rate_limited",BLOCKED:"blocked",NON_RATE_LIMITED:"non_rate_limited"},d={[o.MESSAGE_TYPE.ETH_SIGN]:h.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:h.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:h.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:h.NON_RATE_LIMITED,[o.MESSAGE_TYPE.PERSONAL_SIGN]:h.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_DECRYPT]:h.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:h.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:h.RATE_LIMITED,[o.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:h.RATE_LIMITED,[o.MESSAGE_TYPE.SEND_METADATA]:h.BLOCKED,[o.MESSAGE_TYPE.GET_PROVIDER_STATE]:h.BLOCKED},l={[o.MESSAGE_TYPE.ETH_SIGN]:{APPROVED:u.MetaMetricsEventName.SignatureApproved,FAILED:u.MetaMetricsEventName.SignatureFailed,REJECTED:u.MetaMetricsEventName.SignatureRejected,REQUESTED:u.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:{APPROVED:u.MetaMetricsEventName.SignatureApproved,REJECTED:u.MetaMetricsEventName.SignatureRejected,REQUESTED:u.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:{APPROVED:u.MetaMetricsEventName.SignatureApproved,REJECTED:u.MetaMetricsEventName.SignatureRejected,REQUESTED:u.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:{APPROVED:u.MetaMetricsEventName.SignatureApproved,REJECTED:u.MetaMetricsEventName.SignatureRejected,REQUESTED:u.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.PERSONAL_SIGN]:{APPROVED:u.MetaMetricsEventName.SignatureApproved,REJECTED:u.MetaMetricsEventName.SignatureRejected,REQUESTED:u.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.ETH_DECRYPT]:{APPROVED:u.MetaMetricsEventName.DecryptionApproved,REJECTED:u.MetaMetricsEventName.DecryptionRejected,REQUESTED:u.MetaMetricsEventName.DecryptionRequested},[o.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:{APPROVED:u.MetaMetricsEventName.EncryptionPublicKeyApproved,REJECTED:u.MetaMetricsEventName.EncryptionPublicKeyRejected,REQUESTED:u.MetaMetricsEventName.EncryptionPublicKeyRequested},[o.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:{APPROVED:u.MetaMetricsEventName.PermissionsApproved,REJECTED:u.MetaMetricsEventName.PermissionsRejected,REQUESTED:u.MetaMetricsEventName.PermissionsRequested},[o.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:{APPROVED:u.MetaMetricsEventName.PermissionsApproved,REJECTED:u.MetaMetricsEventName.PermissionsRejected,REQUESTED:u.MetaMetricsEventName.PermissionsRequested}},p={}}}},{package:"$root$",file:"app/scripts/lib/createRPCMethodTrackingMiddleware.js"}],[48,{"promise-to-callback":3051,"readable-stream":3243},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return new o(e,t)};var n,s=e("readable-stream"),i=(n=e("promise-to-callback"))&&n.__esModule?n:{default:n};class o extends s.Writable{constructor(e,t){super({objectMode:!0,...t}),this._asyncWriteFn=e}_write(e,t,r){(0,i.default)(this._asyncWriteFn(e,t))(r)}}}}},{package:"$root$",file:"app/scripts/lib/createStreamSink.js"}],[49,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){t.tabId=e.tabId,n()}}}}},{package:"$root$",file:"app/scripts/lib/createTabIdMiddleware.js"}],[5,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SINGLE_CALL_BALANCES_ADDRESS_SEPOLIA=r.SINGLE_CALL_BALANCES_ADDRESS_POLYGON=r.SINGLE_CALL_BALANCES_ADDRESS_OPTIMISM=r.SINGLE_CALL_BALANCES_ADDRESS_GOERLI=r.SINGLE_CALL_BALANCES_ADDRESS_FANTOM=r.SINGLE_CALL_BALANCES_ADDRESS_BSC=r.SINGLE_CALL_BALANCES_ADDRESS_AVALANCHE=r.SINGLE_CALL_BALANCES_ADDRESS_ARBITRUM=r.SINGLE_CALL_BALANCES_ADDRESS=void 0;r.SINGLE_CALL_BALANCES_ADDRESS="0xb1f8e55c7f64d203c1400b9d8555d050f94adf39";r.SINGLE_CALL_BALANCES_ADDRESS_GOERLI="0x9788C4E93f9002a7ad8e72633b11E8d1ecd51f9b";r.SINGLE_CALL_BALANCES_ADDRESS_SEPOLIA="";r.SINGLE_CALL_BALANCES_ADDRESS_BSC="0x2352c63A83f9Fd126af8676146721Fa00924d7e4";r.SINGLE_CALL_BALANCES_ADDRESS_OPTIMISM="0xB1c568e9C3E6bdaf755A60c7418C269eb11524FC";r.SINGLE_CALL_BALANCES_ADDRESS_POLYGON="0x2352c63A83f9Fd126af8676146721Fa00924d7e4";r.SINGLE_CALL_BALANCES_ADDRESS_AVALANCHE="0xD023D153a0DFa485130ECFdE2FAA7e612EF94818";r.SINGLE_CALL_BALANCES_ADDRESS_FANTOM="0x07f697424ABe762bB808c109860c04eA488ff92B";r.SINGLE_CALL_BALANCES_ADDRESS_ARBITRUM="0x151E24A486D7258dd7C33Fb67E4bB01919B7B32c"}}},{package:"$root$",file:"app/scripts/constants/contracts.ts"}],[50,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=[{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"resolver",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"label",type:"bytes32"},{name:"owner",type:"address"}],name:"setSubnodeOwner",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"ttl",type:"uint64"}],name:"setTTL",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"ttl",outputs:[{name:"",type:"uint64"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"resolver",type:"address"}],name:"setResolver",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"owner",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"label",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"ttl",type:"uint64"}],name:"NewTTL",type:"event"}];r.default=n}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/registry.js"}],[51,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=[{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes32"}],name:"setContent",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"content",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"},{name:"value",type:"string"}],name:"setText",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"setPubkey",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes"}],name:"setContenthash",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"}],name:"text",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],name:"setABI",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"name",type:"string"}],name:"setName",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"contenthash",outputs:[{name:"",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"pubkey",outputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"addr",type:"address"}],name:"setAddr",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"ensAddr",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"contentType",type:"uint256"}],name:"ABIChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"x",type:"bytes32"},{indexed:!1,name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"indexedKey",type:"string"},{indexed:!1,name:"key",type:"string"}],name:"TextChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"}];r.default=n}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/resolver.js"}],[52,{"./contracts/registry":50,"./contracts/resolver":51,"@ensdomains/content-hash":291,"eth-ens-namehash":2263,"ethjs-contract":2379,"ethjs-query":2383},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=async function({provider:e,name:t}){const r=new s.default(e),u=n.default.hash(t),d=new i.default(r),l=Number.parseInt(await r.net_version(),10),p=function(e){switch(e){case 1:case 3:case 4:case 5:case 6:return"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";default:return null}}(l);if(!p)throw new Error(`EnsIpfsResolver - no known ens-ipfs registry for chainId "${l}"`);const f=d(a.default).at(p),g=(await f.resolver(u))[0];if(h(g))throw new Error(`EnsIpfsResolver - no resolver found for name "${t}"`);const y=d(c.default).at(g),m=await y.supportsInterface("0xbc1c58d1"),b=await y.supportsInterface("0xd8389dc5");if(m[0]){const e=(await y.contenthash(u))[0];let t=o.default.decode(e);const r=o.default.getCodec(e);return"ipfs-ns"!==r&&"ipns-ns"!==r||(t=o.default.helpers.cidV0ToV1Base32(t)),{type:r,hash:t}}if(b[0]){const e=(await y.content(u))[0];if(h(e))throw new Error(`EnsIpfsResolver - no content ID found for name "${t}"`);return{type:"swarm-ns",hash:e.slice(2)}}throw new Error(`EnsIpfsResolver - the resolver for name "${t}" is not standard, it should either supports contenthash() or content()`)};var n=u(e("eth-ens-namehash")),s=u(e("ethjs-query")),i=u(e("ethjs-contract")),o=u(e("@ensdomains/content-hash")),a=u(e("./contracts/registry")),c=u(e("./contracts/resolver"));function u(e){return e&&e.__esModule?e:{default:e}}function h(e){return[undefined,null,"0x","0x0","0x0000000000000000000000000000000000000000000000000000000000000000"].includes(e)}}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/resolver.js"}],[521,{"@ethereumjs/tx":364,"@ethereumjs/util":377,"@keystonehq/bc-ur-registry-eth":526,buffer:2065,hdkey:2705,rlp:550,uuid:3359},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(r,"__esModule",{value:!0});var s=n(e("hdkey")),i=e("@ethereumjs/util"),o=n(e("rlp")),a=e("@ethereumjs/tx"),c=e("@keystonehq/bc-ur-registry-eth"),u=e("uuid");const h="QR Hardware Wallet Device",d="m",l="0/*";var p,f;!function(e){e.hd="hd",e.pubkey="pubkey"}(p||(p={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(f||(f={}));class g{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type=h,this.requestSignature=async(e,t,r,n)=>{const s=await this.getInteraction().requestSignature(t,r,n),i=s.getRequestId(),o=s.getSignature();if(i){if(u.stringify(i)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId")}return{r:o.slice(0,32),s:o.slice(32,64),v:o.slice(64)}},this.__readCryptoHDKey=e=>{var t,r;const n=`m/${e.getOrigin().getPath()}`,s=null==(t=e.getOrigin().getSourceFingerprint())?void 0:t.toString("hex"),i=(null==(r=e.getChildren())?void 0:r.getPath())||l,o=e.getName();if(e.getNote()===f.standard?this.keyringAccount=f.standard:e.getNote()===f.ledger_legacy&&(this.keyringAccount=f.ledger_legacy),!s)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const a=e.getBip32Key();this.xfp=s,this.xpub=a,this.hdPath=n,this.childrenPath=i,o!==undefined&&""!==o&&(this.name=o),this.initialized=!0},this.__readCryptoAccount=e=>{var t,r;const n=null==(t=e.getMasterFingerprint())?void 0:t.toString("hex");if(!n)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=n,this.initialized=!0;let s=!1;const o=e.getOutputDescriptors();if(!o||0===o.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(o.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null==(r=e.getOutputDescriptors())||r.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),r=`M/${t.getOrigin().getPath()}`,n="0x"+i.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===f.ledger_live&&(this.keyringAccount=f.ledger_live),this.paths[i.toChecksumAddress(n)]===undefined&&(s=!0),this.paths[i.toChecksumAddress(n)]=r}}catch(e){throw new Error(`KeystoneError#invalid_data: ${e}`)}})),s},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=async e=>{this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex(d,e);n.push({address:t,balance:null,index:e}),this.indexes[i.toChecksumAddress(t)]=e}return n},this.__getLedgerLivePage=async e=>{const t=(this.page+e-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex(d,e);n.push({address:t,balance:null,index:e})}return this.page+=e,n},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===p.hd){this.checkKeyring(),this.hdk||(this.hdk=s.fromExtendedKey(this.xpub));const r=this.childrenPath.replace("*",String(t)).replace(/\*/g,"0"),n=this.hdk.derive(`${e}/${r}`),o="0x"+i.publicToAddress(n.publicKey,!0).toString("hex");return i.toChecksumAddress(o)}{const e=Object.keys(this.paths)[t];if(e)return i.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=p.hd,this.keyringAccount=f.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath=l,this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();this.syncKeyring(e)}syncKeyring(e){e.getRegistryType().getType()===c.extend.RegistryTypes.CRYPTO_HDKEY.getType()?(this.keyringMode=p.hd,this.__readCryptoHDKey(e)):(this.keyringMode=p.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||p.hd,this.keyringAccount=e.keyringAccount||f.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||l)}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}async addAccounts(e=1){const t=this.unlockedAccount,r=t+e,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex(d,e);n.push(t),this.page=0,this.unlockedAccount++}return this.accounts=this.accounts.concat(n),this.accounts}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===p.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){const n=0===r.type?c.DataType.transaction:c.DataType.typedTransaction;let s;s=0===r.type?t.from(o.encode(r.getMessageToSign(!1))):r.getMessageToSign(!1);const i=await this._pathFromAddress(e),h=Number(r.common.chainId()),d=u.v4(),l=c.EthSignRequest.constructETHRequest(s,n,i,this.xfp,d,h),{r:p,s:f,v:g}=await this.requestSignature(d,l,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature');return a.TransactionFactory.fromTxData({...r.toJSON(),type:r.type,r:p,s:f,v:g},{common:r.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,r){const n=i.stripHexPrefix(r),s=await this._pathFromAddress(e),o=u.v4(),a=c.EthSignRequest.constructETHRequest(t.from(n,"hex"),c.DataType.personalMessage,s,this.xfp,o,undefined,e),{r:h,s:d,v:l}=await this.requestSignature(o,a,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([h,d,l]).toString("hex")}async signTypedData(e,r){const n=await this._pathFromAddress(e),s=u.v4(),i=c.EthSignRequest.constructETHRequest(t.from(JSON.stringify(r),"utf-8"),c.DataType.typedData,n,this.xfp,s,undefined,e),{r:o,s:a,v:h}=await this.requestSignature(s,i,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([o,a,h]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===p.hd){const t=i.toChecksumAddress(e);let r=this.indexes[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex(d,e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",r.toString()).replace(/\*/g,"0")}`}{const t=i.toChecksumAddress(e),r=this.paths[t];if(void 0===r)throw new Error("Unknown address");return r}}}g.type=h,r.BaseKeyring=g}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/base-eth-keyring.cjs.development.js"}],[522,{"@ethereumjs/tx":364,"@ethereumjs/util":377,"@keystonehq/bc-ur-registry-eth":526,buffer:2065,hdkey:2705,rlp:550,uuid:3359},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(r,"__esModule",{value:!0});var s,i,o=n(e("hdkey")),a=e("@ethereumjs/util"),c=n(e("rlp")),u=e("@ethereumjs/tx"),h=e("@keystonehq/bc-ur-registry-eth"),d=e("uuid");!function(e){e.hd="hd",e.pubkey="pubkey"}(s||(s={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(i||(i={}));class l{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type="QR Hardware Wallet Device",this.requestSignature=async(e,t,r,n)=>{const s=await this.getInteraction().requestSignature(t,r,n),i=s.getRequestId(),o=s.getSignature();if(i&&d.stringify(i)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId");return{r:o.slice(0,32),s:o.slice(32,64),v:o.slice(64)}},this.__readCryptoHDKey=e=>{var t,r;const n="m/"+e.getOrigin().getPath(),s=null==(t=e.getOrigin().getSourceFingerprint())?void 0:t.toString("hex"),o=(null==(r=e.getChildren())?void 0:r.getPath())||"0/*",a=e.getName();if(e.getNote()===i.standard?this.keyringAccount=i.standard:e.getNote()===i.ledger_legacy&&(this.keyringAccount=i.ledger_legacy),!s)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const c=e.getBip32Key();this.xfp=s,this.xpub=c,this.hdPath=n,this.childrenPath=o,void 0!==a&&""!==a&&(this.name=a),this.initialized=!0},this.__readCryptoAccount=e=>{var t,r;const n=null==(t=e.getMasterFingerprint())?void 0:t.toString("hex");if(!n)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=n,this.initialized=!0;let s=!1;const o=e.getOutputDescriptors();if(!o||0===o.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(o.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null==(r=e.getOutputDescriptors())||r.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),r="M/"+t.getOrigin().getPath(),n="0x"+a.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===i.ledger_live&&(this.keyringAccount=i.ledger_live),void 0===this.paths[a.toChecksumAddress(n)]&&(s=!0),this.paths[a.toChecksumAddress(n)]=r}}catch(e){throw new Error("KeystoneError#invalid_data: "+e)}})),s},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=async e=>{this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex("m",e);n.push({address:t,balance:null,index:e}),this.indexes[a.toChecksumAddress(t)]=e}return n},this.__getLedgerLivePage=async e=>{const t=(this.page+e-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex("m",e);n.push({address:t,balance:null,index:e})}return this.page+=e,n},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===s.hd){this.checkKeyring(),this.hdk||(this.hdk=o.fromExtendedKey(this.xpub));const r=this.childrenPath.replace("*",String(t)).replace(/\*/g,"0"),n=this.hdk.derive(`${e}/${r}`),s="0x"+a.publicToAddress(n.publicKey,!0).toString("hex");return a.toChecksumAddress(s)}{const e=Object.keys(this.paths)[t];if(e)return a.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=s.hd,this.keyringAccount=i.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath="0/*",this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();this.syncKeyring(e)}syncKeyring(e){e.getRegistryType().getType()===h.extend.RegistryTypes.CRYPTO_HDKEY.getType()?(this.keyringMode=s.hd,this.__readCryptoHDKey(e)):(this.keyringMode=s.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||s.hd,this.keyringAccount=e.keyringAccount||i.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||"0/*")}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}async addAccounts(e=1){const t=this.unlockedAccount,r=t+e,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex("m",e);n.push(t),this.page=0,this.unlockedAccount++}return this.accounts=this.accounts.concat(n),this.accounts}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===s.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){const n=0===r.type?h.DataType.transaction:h.DataType.typedTransaction;let s;s=0===r.type?t.from(c.encode(r.getMessageToSign(!1))):r.getMessageToSign(!1);const i=await this._pathFromAddress(e),o=Number(r.common.chainId()),a=d.v4(),l=h.EthSignRequest.constructETHRequest(s,n,i,this.xfp,a,o),{r:p,s:f,v:g}=await this.requestSignature(a,l,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature');return u.TransactionFactory.fromTxData({...r.toJSON(),type:r.type,r:p,s:f,v:g},{common:r.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,r){const n=a.stripHexPrefix(r),s=await this._pathFromAddress(e),i=d.v4(),o=h.EthSignRequest.constructETHRequest(t.from(n,"hex"),h.DataType.personalMessage,s,this.xfp,i,void 0,e),{r:c,s:u,v:l}=await this.requestSignature(i,o,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([c,u,l]).toString("hex")}async signTypedData(e,r){const n=await this._pathFromAddress(e),s=d.v4(),i=h.EthSignRequest.constructETHRequest(t.from(JSON.stringify(r),"utf-8"),h.DataType.typedData,n,this.xfp,s,void 0,e),{r:o,s:a,v:c}=await this.requestSignature(s,i,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([o,a,c]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===s.hd){const t=a.toChecksumAddress(e);let r=this.indexes[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex("m",e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",r.toString()).replace(/\*/g,"0")}`}{const t=a.toChecksumAddress(e),r=this.paths[t];if(void 0===r)throw new Error("Unknown address");return r}}}l.type="QR Hardware Wallet Device",r.BaseKeyring=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/base-eth-keyring.cjs.production.min.js"}],[523,{"./base-eth-keyring.cjs.development.js":521,"./base-eth-keyring.cjs.production.min.js":522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./base-eth-keyring.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/index.js"}],[524,{"@ethereumjs/util":377,"@keystonehq/bc-ur-registry":543,buffer:2065,hdkey:2705,uuid:3359},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("@keystonehq/bc-ur-registry"),i=e("uuid"),o=(n=e("hdkey"))&&"object"==typeof n&&"default"in n?n.default:n,a=e("@ethereumjs/util");const c={ETH_SIGN_REQUEST:new s.RegistryType("eth-sign-request",401),ETH_SIGNATURE:new s.RegistryType("eth-signature",402),ETH_NFT_ITEM:new s.RegistryType("eth-nft-item",403)},{decodeToDataItem:u,RegistryTypes:h}=s.extend;var d,l;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(d||(d={})),(l=r.DataType||(r.DataType={}))[l.transaction=1]="transaction",l[l.typedData=2]="typedData",l[l.personalMessage=3]="personalMessage",l[l.typedTransaction=4]="typedTransaction";class p extends s.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSourceFingerprint=()=>this.derivationPath.getSourceFingerprint(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[d.requestId]=new s.DataItem(this.requestId,h.UUID.getTag())),this.address&&(e[d.address]=this.address),this.chainId&&(e[d.chainId]=this.chainId),this.origin&&(e[d.origin]=this.origin),e[d.signData]=this.signData,e[d.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[d.derivationPath]=t,new s.DataItem(e)},this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin}static constructETHRequest(e,r,n,o,a,c,u,h){const d=n.replace(/[m|M]\//,"").split("/"),l=new s.CryptoKeypath(d.map((e=>{const t=parseInt(e.replace("'",""));let r=!1;return e.endsWith("'")&&(r=!0),new s.PathComponent({index:t,hardened:r})})),t.from(o,"hex"));return new p({requestId:a?t.from(i.parse(a)):undefined,signData:e,dataType:r,derivationPath:l,chainId:c,address:u?t.from(u.replace("0x",""),"hex"):undefined,origin:h||undefined})}}p.fromDataItem=e=>{const t=e.getData(),r=t[d.signData],n=t[d.dataType],i=s.CryptoKeypath.fromDataItem(t[d.derivationPath]),o=t[d.chainId]?t[d.chainId]:undefined,a=t[d.address]?t[d.address]:undefined,c=t[d.requestId]?t[d.requestId].getData():undefined,u=t[d.origin]?t[d.origin]:undefined;return new p({requestId:c,signData:r,dataType:n,chainId:o,derivationPath:i,address:a,origin:u})},p.fromCBOR=e=>{const t=u(e);return p.fromDataItem(t)};const{RegistryTypes:f,decodeToDataItem:g}=s.extend;var y;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature",e[e.origin=3]="origin"}(y||(y={}));class m extends s.RegistryItem{constructor(e,t,r){super(),this.getRegistryType=()=>c.ETH_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};return this.requestId&&(e[y.requestId]=new s.DataItem(this.requestId,f.UUID.getTag())),this.origin&&(e[y.origin]=this.origin),e[y.signature]=this.signature,new s.DataItem(e)},this.signature=e,this.requestId=t,this.origin=r}}m.fromDataItem=e=>{const t=e.getData(),r=t[y.signature],n=t[y.requestId]?t[y.requestId].getData():undefined;return new m(r,n,t[y.origin])},m.fromCBOR=e=>{const t=g(e);return m.fromDataItem(t)};const{decodeToDataItem:b}=s.extend;var T;!function(e){e[e.chainId=1]="chainId",e[e.contractAddress=2]="contractAddress",e[e.contractName=3]="contractName",e[e.name=4]="name",e[e.mediaData=5]="mediaData"}(T||(T={}));class w extends s.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_NFT_ITEM,this.getChainId=()=>this.chainId,this.getName=()=>this.name,this.getmediaData=()=>this.mediaData,this.getContractAddress=()=>this.contractAddress,this.getContractName=()=>this.contractName,this.toDataItem=()=>{const e={};return e[T.chainId]=this.chainId,e[T.name]=this.name,e[T.contractAddress]=this.contractAddress,e[T.contractName]=this.contractName,e[T.mediaData]=this.mediaData,new s.DataItem(e)},this.chainId=e.chainId,this.name=e.name,this.contractAddress=e.contractAddress,this.contractName=e.contractName,this.mediaData=e.mediaData}static constructETHNFTItem(e,t,r,n,s){return new w({chainId:e,contractAddress:t,contractName:r,mediaData:s,name:n})}}w.fromDataItem=e=>{const t=e.getData(),r=t[T.chainId],n=t[T.name],s=t[T.mediaData],i=t[T.contractAddress],o=t[T.contractName];return new w({chainId:r,name:n,contractAddress:i,contractName:o,mediaData:s})},w.fromCBOR=e=>{const t=b(e);return w.fromDataItem(t)};const v=(e,t)=>{const r=o.fromExtendedKey(e).derive(t),n="0x"+a.publicToAddress(r.publicKey,!0).toString("hex");return a.toChecksumAddress(n)};s.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(s).forEach((function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})})),r.ETHNFTItem=w,r.ETHSignature=m,r.EthSignRequest=p,r.findHDPathFromAddress=(e,t,r,n)=>{for(let s=0;s<r;s++){const r=v(t,`M/0/${s}`);if(e.toLowerCase()==r.toLowerCase())return`${n}/0/${s}`}return null},r.generateAddressFromXpub=v}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry-eth/dist/bc-ur-registry-eth.cjs.development.js"}],[525,{"@ethereumjs/util":377,"@keystonehq/bc-ur-registry":543,buffer:2065,hdkey:2705,uuid:3359},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("@keystonehq/bc-ur-registry"),i=e("uuid"),o=(n=e("hdkey"))&&"object"==typeof n&&"default"in n?n.default:n,a=e("@ethereumjs/util");const c={ETH_SIGN_REQUEST:new s.RegistryType("eth-sign-request",401),ETH_SIGNATURE:new s.RegistryType("eth-signature",402),ETH_NFT_ITEM:new s.RegistryType("eth-nft-item",403)},{decodeToDataItem:u,RegistryTypes:h}=s.extend;var d,l;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(d||(d={})),(l=r.DataType||(r.DataType={}))[l.transaction=1]="transaction",l[l.typedData=2]="typedData",l[l.personalMessage=3]="personalMessage",l[l.typedTransaction=4]="typedTransaction";class p extends s.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSourceFingerprint=()=>this.derivationPath.getSourceFingerprint(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[d.requestId]=new s.DataItem(this.requestId,h.UUID.getTag())),this.address&&(e[d.address]=this.address),this.chainId&&(e[d.chainId]=this.chainId),this.origin&&(e[d.origin]=this.origin),e[d.signData]=this.signData,e[d.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[d.derivationPath]=t,new s.DataItem(e)},this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin}static constructETHRequest(e,r,n,o,a,c,u,h){const d=n.replace(/[m|M]\//,"").split("/"),l=new s.CryptoKeypath(d.map((e=>{const t=parseInt(e.replace("'",""));let r=!1;return e.endsWith("'")&&(r=!0),new s.PathComponent({index:t,hardened:r})})),t.from(o,"hex"));return new p({requestId:a?t.from(i.parse(a)):void 0,signData:e,dataType:r,derivationPath:l,chainId:c,address:u?t.from(u.replace("0x",""),"hex"):void 0,origin:h||void 0})}}p.fromDataItem=e=>{const t=e.getData(),r=t[d.signData],n=t[d.dataType],i=s.CryptoKeypath.fromDataItem(t[d.derivationPath]),o=t[d.chainId]?t[d.chainId]:void 0,a=t[d.address]?t[d.address]:void 0,c=t[d.requestId]?t[d.requestId].getData():void 0;return new p({requestId:c,signData:r,dataType:n,chainId:o,derivationPath:i,address:a,origin:t[d.origin]?t[d.origin]:void 0})},p.fromCBOR=e=>{const t=u(e);return p.fromDataItem(t)};const{RegistryTypes:f,decodeToDataItem:g}=s.extend;var y;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature",e[e.origin=3]="origin"}(y||(y={}));class m extends s.RegistryItem{constructor(e,t,r){super(),this.getRegistryType=()=>c.ETH_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};return this.requestId&&(e[y.requestId]=new s.DataItem(this.requestId,f.UUID.getTag())),this.origin&&(e[y.origin]=this.origin),e[y.signature]=this.signature,new s.DataItem(e)},this.signature=e,this.requestId=t,this.origin=r}}m.fromDataItem=e=>{const t=e.getData(),r=t[y.signature],n=t[y.requestId]?t[y.requestId].getData():void 0;return new m(r,n,t[y.origin])},m.fromCBOR=e=>{const t=g(e);return m.fromDataItem(t)};const{decodeToDataItem:b}=s.extend;var T;!function(e){e[e.chainId=1]="chainId",e[e.contractAddress=2]="contractAddress",e[e.contractName=3]="contractName",e[e.name=4]="name",e[e.mediaData=5]="mediaData"}(T||(T={}));class w extends s.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_NFT_ITEM,this.getChainId=()=>this.chainId,this.getName=()=>this.name,this.getmediaData=()=>this.mediaData,this.getContractAddress=()=>this.contractAddress,this.getContractName=()=>this.contractName,this.toDataItem=()=>{const e={};return e[T.chainId]=this.chainId,e[T.name]=this.name,e[T.contractAddress]=this.contractAddress,e[T.contractName]=this.contractName,e[T.mediaData]=this.mediaData,new s.DataItem(e)},this.chainId=e.chainId,this.name=e.name,this.contractAddress=e.contractAddress,this.contractName=e.contractName,this.mediaData=e.mediaData}static constructETHNFTItem(e,t,r,n,s){return new w({chainId:e,contractAddress:t,contractName:r,mediaData:s,name:n})}}w.fromDataItem=e=>{const t=e.getData();return new w({chainId:t[T.chainId],name:t[T.name],contractAddress:t[T.contractAddress],contractName:t[T.contractName],mediaData:t[T.mediaData]})},w.fromCBOR=e=>{const t=b(e);return w.fromDataItem(t)};const v=(e,t)=>{const r=o.fromExtendedKey(e).derive(t),n="0x"+a.publicToAddress(r.publicKey,!0).toString("hex");return a.toChecksumAddress(n)};s.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(s).forEach((function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})})),r.ETHNFTItem=w,r.ETHSignature=m,r.EthSignRequest=p,r.findHDPathFromAddress=(e,t,r,n)=>{for(let s=0;s<r;s++){const r=v(t,"M/0/"+s);if(e.toLowerCase()==r.toLowerCase())return`${n}/0/${s}`}return null},r.generateAddressFromXpub=v}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry-eth/dist/bc-ur-registry-eth.cjs.production.min.js"}],[526,{"./bc-ur-registry-eth.cjs.development.js":524,"./bc-ur-registry-eth.cjs.production.min.js":525},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./bc-ur-registry-eth.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry-eth/dist/index.js"}],[527,{"./RegistryItem":538,"./RegistryType":539,"./lib":546},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Bytes=void 0;const n=e("./lib"),s=e("./RegistryItem"),i=e("./RegistryType");class o extends s.RegistryItem{constructor(e){super(),this.bytes=e,this.getRegistryType=()=>i.RegistryTypes.BYTES,this.getData=()=>this.bytes,this.toDataItem=()=>new n.DataItem(this.bytes)}}r.Bytes=o,o.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][Bytes][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new o(t)},o.fromCBOR=e=>{const t=(0,n.decodeToDataItem)(e);return o.fromDataItem(t)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/Bytes.js"}],[528,{".":543,"./RegistryItem":538,"./RegistryType":539,"./lib":546,buffer:2065},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoAccount=void 0;const n=e("."),s=e("./lib"),i=e("./RegistryItem"),o=e("./RegistryType");var a;!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.outputDescriptors=2]="outputDescriptors"}(a||(a={}));class c extends i.RegistryItem{constructor(e,t){super(),this.masterFingerprint=e,this.outputDescriptors=t,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_ACCOUNT,this.getMasterFingerprint=()=>this.masterFingerprint,this.getOutputDescriptors=()=>this.outputDescriptors,this.toDataItem=()=>{const e={};return this.masterFingerprint&&(e[a.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.outputDescriptors&&(e[a.outputDescriptors]=this.outputDescriptors.map((e=>e.toDataItem()))),new s.DataItem(e)}}}r.CryptoAccount=c,c.fromDataItem=e=>{const r=e.getData(),s=t.alloc(4),i=r[a.masterFingerprint];i&&s.writeUInt32BE(i,0);const o=r[a.outputDescriptors].map((e=>n.CryptoOutput.fromDataItem(e)));return new c(s,o)},c.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoAccount.js"}],[529,{"./RegistryItem":538,"./RegistryType":539,"./lib":546},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoCoinInfo=r.Network=r.Type=void 0;const n=e("./lib"),s=e("./RegistryItem"),i=e("./RegistryType");var o,a,c;!function(e){e.type="1",e.network="2"}(o||(o={})),function(e){e[e.bitcoin=0]="bitcoin"}(a=r.Type||(r.Type={})),function(e){e[e.mainnet=0]="mainnet",e[e.testnet=1]="testnet"}(c=r.Network||(r.Network={}));class u extends s.RegistryItem{constructor(e,t){super(),this.type=e,this.network=t,this.getRegistryType=()=>i.RegistryTypes.CRYPTO_COIN_INFO,this.getType=()=>this.type||a.bitcoin,this.getNetwork=()=>this.network||c.mainnet,this.toDataItem=()=>{const e={};return this.type&&(e[o.type]=this.type),this.network&&(e[o.network]=this.network),new n.DataItem(e)}}}r.CryptoCoinInfo=u,u.fromDataItem=e=>{const t=e.getData(),r=t[o.type],n=t[o.network];return new u(r,n)},u.fromCBOR=e=>{const t=(0,n.decodeToDataItem)(e);return u.fromDataItem(t)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoCoinInfo.js"}],[53,{"../../../../shared/modules/fetch-with-timeout":3442,"./resolver":52,"base32-encode":1972,"base64-js":1973,"webextension-polyfill":3393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({provider:e,getCurrentChainId:t,getIpfsGateway:r}){const o=h.map((e=>`*://*.${e}/*`));return i.default.webRequest.onErrorOccurred.addListener(c,{urls:o,types:["main_frame"]}),{remove(){i.default.webRequest.onErrorOccurred.removeListener(c)}};async function c(o){const{tabId:c,url:d}=o;if(-1===c||"0x1"!==t())return;const{hostname:l,pathname:p,search:f,hash:g}=new URL(d),y=l.split("."),m=y[y.length-1];h.includes(m)&&async function({tabId:t,name:o,pathname:c,search:h,fragment:d}){const l=r();i.default.tabs.update(t,{url:"loading.html"});let p=`https://app.ens.domains/name/${o}`;try{const{type:t,hash:r}=await(0,a.default)({provider:e,name:o});if("ipfs-ns"===t||"ipns-ns"===t){const e=`https://${r}.${t.slice(0,4)}.${l}${c}${h||""}${d||""}`;try{200===(await u(e,{method:"HEAD"})).status&&(p=e)}catch(e){console.warn(e)}}else if("swarm-ns"===t)p=`https://swarm-gateways.net/bzz:/${r}${c}${h||""}${d||""}`;else if("onion"===t||"onion3"===t)p=`http://${r}.onion${c}${h||""}${d||""}`;else if("zeronet"===t)p=`http://127.0.0.1:43110/${r}${c}${h||""}${d||""}`;else if("skynet-ns"===t){const e=r.padEnd(r.length+4-r.length%4,"="),t=s.default.toByteArray(e),i={padding:!1};p=`https://${(0,n.default)(t,"RFC4648-HEX",i).toLowerCase()}.siasky.net${c}${h||""}${d||""}`}}catch(e){console.warn(e)}finally{i.default.tabs.update(t,{url:p})}}({tabId:c,name:l,pathname:p,search:f,fragment:g})}};var n=c(e("base32-encode")),s=c(e("base64-js")),i=c(e("webextension-polyfill")),o=c(e("../../../../shared/modules/fetch-with-timeout")),a=c(e("./resolver"));function c(e){return e&&e.__esModule?e:{default:e}}const u=(0,o.default)(),h=["eth"]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/setup.js"}],[530,{"./RegistryItem":538,"./RegistryType":539,"./lib":546},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoECKey=void 0;const n=e("./lib"),s=e("./RegistryItem"),i=e("./RegistryType");var o;!function(e){e[e.curve=1]="curve",e[e.private=2]="private",e[e.data=3]="data"}(o||(o={}));class a extends s.RegistryItem{constructor(e){super(),this.isECKey=()=>!0,this.getCurve=()=>this.curve||0,this.isPrivateKey=()=>this.privateKey||!1,this.getData=()=>this.data,this.getRegistryType=()=>i.RegistryTypes.CRYPTO_ECKEY,this.toDataItem=()=>{const e={};return this.curve&&(e[o.curve]=this.curve),this.privateKey!==undefined&&(e[o.private]=this.privateKey),e[o.data]=this.data,new n.DataItem(e)},this.getOutputDescriptorContent=()=>this.data.toString("hex"),this.data=e.data,this.curve=e.curve,this.privateKey=e.privateKey||undefined}}r.CryptoECKey=a,a.fromDataItem=e=>{const t=e.getData(),r=t[o.curve],n=t[o.private],s=t[o.data];if(!s)throw new Error(`#[ur-registry][CryptoECKey][fn.fromDataItem]: decoded [dataItem][#data.data] is undefined: ${e}`);return new a({data:s,curve:r,privateKey:n})},a.fromCBOR=e=>{const t=(0,n.decodeToDataItem)(e);return a.fromDataItem(t)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoECKey.js"}],[531,{"./CryptoCoinInfo":529,"./CryptoKeypath":532,"./RegistryItem":538,"./RegistryType":539,"./lib":546,bs58check:2074,buffer:2065},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoHDKey=void 0;const n=e("bs58check"),s=e("./CryptoCoinInfo"),i=e("./CryptoKeypath"),o=e("./lib"),a=e("./RegistryItem"),c=e("./RegistryType");var u;!function(e){e[e.is_master=1]="is_master",e[e.is_private=2]="is_private",e[e.key_data=3]="key_data",e[e.chain_code=4]="chain_code",e[e.use_info=5]="use_info",e[e.origin=6]="origin",e[e.children=7]="children",e[e.parent_fingerprint=8]="parent_fingerprint",e[e.name=9]="name",e[e.note=10]="note"}(u||(u={}));class h extends a.RegistryItem{constructor(e){super(),this.isECKey=()=>!1,this.getKey=()=>this.key,this.getChainCode=()=>this.chainCode,this.isMaster=()=>this.master,this.isPrivateKey=()=>!!this.privateKey,this.getUseInfo=()=>this.useInfo,this.getOrigin=()=>this.origin,this.getChildren=()=>this.children,this.getParentFingerprint=()=>this.parentFingerprint,this.getName=()=>this.name,this.getNote=()=>this.note,this.getBip32Key=()=>{var e,r,s;let i,o,a=0,c=t.alloc(4).fill(0);if(this.isMaster())i=t.from("0488ADE4","hex"),o=0,a=0;else{o=(null===(e=this.getOrigin())||void 0===e?void 0:e.getComponents().length)||(null===(r=this.getOrigin())||void 0===r?void 0:r.getDepth());const n=null===(s=this.getOrigin())||void 0===s?void 0:s.getComponents(),u=n[n.length-1];u&&(a=u.isHardened()?u.getIndex()+2147483648:u.getIndex(),this.getParentFingerprint()&&(c=this.getParentFingerprint())),i=this.isPrivateKey()?t.from("0488ADE4","hex"):t.from("0488B21E","hex")}const u=t.alloc(1);u.writeUInt8(o,0);const h=t.alloc(4);h.writeUInt32BE(a,0);const d=this.getChainCode(),l=this.getKey();return(0,n.encode)(t.concat([i,u,c,h,d,l]))},this.getRegistryType=()=>c.RegistryTypes.CRYPTO_HDKEY,this.getOutputDescriptorContent=()=>{var e,t,r,n,s,i,o;let a="";return this.getOrigin()&&(null===(e=this.getOrigin())||void 0===e?void 0:e.getSourceFingerprint())&&(null===(t=this.getOrigin())||void 0===t?void 0:t.getPath())&&(a+=`${null===(n=null===(r=this.getOrigin())||void 0===r?void 0:r.getSourceFingerprint())||void 0===n?void 0:n.toString("hex")}/${null===(s=this.getOrigin())||void 0===s?void 0:s.getPath()}`),a+=this.getBip32Key(),this.getChildren()&&(null===(i=this.getChildren())||void 0===i?void 0:i.getPath())&&(a+=`/${null===(o=this.getChildren())||void 0===o?void 0:o.getPath()}`),a},this.setupMasterKey=e=>{this.master=!0,this.key=e.key,this.chainCode=e.chainCode},this.setupDeriveKey=e=>{this.master=!1,this.privateKey=e.isPrivateKey,this.key=e.key,this.chainCode=e.chainCode,this.useInfo=e.useInfo,this.origin=e.origin,this.children=e.children,this.parentFingerprint=e.parentFingerprint,this.name=e.name,this.note=e.note},this.toDataItem=()=>{const e={};if(this.master)e[u.is_master]=!0,e[u.key_data]=this.key,e[u.chain_code]=this.chainCode;else{if(this.privateKey!==undefined&&(e[u.is_private]=this.privateKey),e[u.key_data]=this.key,this.chainCode&&(e[u.chain_code]=this.chainCode),this.useInfo){const t=this.useInfo.toDataItem();t.setTag(this.useInfo.getRegistryType().getTag()),e[u.use_info]=t}if(this.origin){const t=this.origin.toDataItem();t.setTag(this.origin.getRegistryType().getTag()),e[u.origin]=t}if(this.children){const t=this.children.toDataItem();t.setTag(this.children.getRegistryType().getTag()),e[u.children]=t}this.parentFingerprint&&(e[u.parent_fingerprint]=this.parentFingerprint.readUInt32BE(0)),this.name!==undefined&&(e[u.name]=this.name),this.note!==undefined&&(e[u.note]=this.note)}return new o.DataItem(e)},e.isMaster?this.setupMasterKey(e):this.setupDeriveKey(e)}}r.CryptoHDKey=h,h.fromDataItem=e=>{const r=e.getData(),n=!!r[u.is_master],o=r[u.is_private],a=r[u.key_data],c=r[u.chain_code],d=r[u.use_info]?s.CryptoCoinInfo.fromDataItem(r[u.use_info]):undefined,l=r[u.origin]?i.CryptoKeypath.fromDataItem(r[u.origin]):undefined,p=r[u.children]?i.CryptoKeypath.fromDataItem(r[u.children]):undefined,f=r[u.parent_fingerprint];let g=undefined;f&&(g=t.alloc(4),g.writeUInt32BE(f,0));const y=r[u.name],m=r[u.note];return new h({isMaster:n,isPrivateKey:o,key:a,chainCode:c,useInfo:d,origin:l,children:p,parentFingerprint:g,name:y,note:m})},h.fromCBOR=e=>{const t=(0,o.decodeToDataItem)(e);return h.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoHDKey.js"}],[532,{"./PathComponent":537,"./RegistryItem":538,"./RegistryType":539,"./lib":546,buffer:2065},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoKeypath=void 0;const n=e("./lib"),s=e("./PathComponent"),i=e("./RegistryItem"),o=e("./RegistryType");var a;!function(e){e[e.components=1]="components",e[e.source_fingerprint=2]="source_fingerprint",e[e.depth=3]="depth"}(a||(a={}));class c extends i.RegistryItem{constructor(e=[],t,r){super(),this.components=e,this.sourceFingerprint=t,this.depth=r,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_KEYPATH,this.getPath=()=>{if(0===this.components.length)return undefined;return this.components.map((e=>`${e.isWildcard()?"*":e.getIndex()}${e.isHardened()?"'":""}`)).join("/")},this.getComponents=()=>this.components,this.getSourceFingerprint=()=>this.sourceFingerprint,this.getDepth=()=>this.depth,this.toDataItem=()=>{const e={},t=[];return this.components&&this.components.forEach((e=>{e.isWildcard()?t.push([]):t.push(e.getIndex()),t.push(e.isHardened())})),e[a.components]=t,this.sourceFingerprint&&(e[a.source_fingerprint]=this.sourceFingerprint.readUInt32BE(0)),this.depth!==undefined&&(e[a.depth]=this.depth),new n.DataItem(e)}}}r.CryptoKeypath=c,c.fromDataItem=e=>{const r=e.getData(),n=[],i=r[a.components];if(i)for(let e=0;e<i.length;e+=2){const t=i[e+1],r=i[e];"number"==typeof r?n.push(new s.PathComponent({index:r,hardened:t})):n.push(new s.PathComponent({hardened:t}))}const o=r[a.source_fingerprint];let u;o&&(u=t.alloc(4),u.writeUInt32BE(o,0));const h=r[a.depth];return new c(n,u,h)},c.fromCBOR=e=>{const t=(0,n.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoKeypath.js"}],[533,{"./CryptoECKey":530,"./CryptoHDKey":531,"./MultiKey":536,"./RegistryItem":538,"./RegistryType":539,"./ScriptExpression":540,"./lib":546},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoOutput=void 0;const n=e("./CryptoECKey"),s=e("./CryptoHDKey"),i=e("./lib"),o=e("./MultiKey"),a=e("./RegistryItem"),c=e("./RegistryType"),u=e("./ScriptExpression");class h extends a.RegistryItem{constructor(e,t){super(),this.scriptExpressions=e,this.cryptoKey=t,this.getRegistryType=()=>c.RegistryTypes.CRYPTO_OUTPUT,this.getCryptoKey=()=>this.cryptoKey,this.getHDKey=()=>this.cryptoKey instanceof s.CryptoHDKey?this.cryptoKey:undefined,this.getECKey=()=>this.cryptoKey instanceof n.CryptoECKey?this.cryptoKey:undefined,this.getMultiKey=()=>this.cryptoKey instanceof o.MultiKey?this.cryptoKey:undefined,this.getScriptExpressions=()=>this.scriptExpressions,this._toOutputDescriptor=e=>e>=this.scriptExpressions.length?this.cryptoKey.getOutputDescriptorContent():`${this.scriptExpressions[e].getExpression()}(${this._toOutputDescriptor(e+1)})`,this.toString=()=>this._toOutputDescriptor(0),this.toDataItem=()=>{let e=this.cryptoKey.toDataItem();(this.cryptoKey instanceof n.CryptoECKey||this.cryptoKey instanceof s.CryptoHDKey)&&e.setTag(this.cryptoKey.getRegistryType().getTag());return[...this.scriptExpressions].reverse().forEach((t=>{const r=t.getTag();e.getTag()===undefined?e.setTag(r):e=new i.DataItem(e,r)})),e}}}r.CryptoOutput=h,h.fromDataItem=e=>{const t=[];let r=e;for(;;){let e=r.getTag();const n=u.ScriptExpression.fromTag(e);if(!n)break;if(t.push(n),!(r.getData()instanceof i.DataItem))break;r=r.getData(),e=r.getTag()}const a=t.length;if(a>0&&(t[a-1].getExpression()===u.ScriptExpressions.MULTISIG.getExpression()||t[a-1].getExpression()===u.ScriptExpressions.SORTED_MULTISIG.getExpression())){const e=o.MultiKey.fromDataItem(r);return new h(t,e)}if(r.getTag()===c.RegistryTypes.CRYPTO_HDKEY.getTag()){const e=s.CryptoHDKey.fromDataItem(r);return new h(t,e)}{const e=n.CryptoECKey.fromDataItem(r);return new h(t,e)}},h.fromCBOR=e=>{const t=(0,i.decodeToDataItem)(e);return h.fromDataItem(t)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoOutput.js"}],[534,{"./RegistryItem":538,"./RegistryType":539,"./lib":546},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoPSBT=void 0;const n=e("./lib"),s=e("./RegistryItem"),i=e("./RegistryType");class o extends s.RegistryItem{constructor(e){super(),this.psbt=e,this.getRegistryType=()=>i.RegistryTypes.CRYPTO_PSBT,this.getPSBT=()=>this.psbt,this.toDataItem=()=>new n.DataItem(this.psbt)}}r.CryptoPSBT=o,o.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][CryptoPSBT][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new o(t)},o.fromCBOR=e=>{const t=(0,n.decodeToDataItem)(e);return o.fromDataItem(t)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoPSBT.js"}],[535,{"..":543,"../RegistryType":539,"../errors":541,"@ngraveio/bc-ur":1379},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.URRegistryDecoder=void 0;const n=e("@ngraveio/bc-ur"),s=e(".."),i=e("../RegistryType"),o=e("../errors");class a extends n.URDecoder{constructor(){super(...arguments),this.resultRegistryType=()=>{const e=this.resultUR();switch(e.type){case i.RegistryTypes.BYTES.getType():return s.Bytes.fromCBOR(e.cbor);case i.RegistryTypes.CRYPTO_HDKEY.getType():return s.CryptoHDKey.fromCBOR(e.cbor);case i.RegistryTypes.CRYPTO_KEYPATH.getType():return s.CryptoKeypath.fromCBOR(e.cbor);case i.RegistryTypes.CRYPTO_COIN_INFO.getType():return s.CryptoCoinInfo.fromCBOR(e.cbor);case i.RegistryTypes.CRYPTO_ECKEY.getType():return s.CryptoECKey.fromCBOR(e.cbor);case i.RegistryTypes.CRYPTO_OUTPUT.getType():return s.CryptoOutput.fromCBOR(e.cbor);case i.RegistryTypes.CRYPTO_PSBT.getType():return s.CryptoPSBT.fromCBOR(e.cbor);case i.RegistryTypes.CRYPTO_ACCOUNT.getType():return s.CryptoAccount.fromCBOR(e.cbor);default:throw new o.UnknownURTypeError(`#[ur-registry][Decoder][fn.resultRegistryType]: registry type ${e.type} is not supported now`)}}}}r.URRegistryDecoder=a}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/Decoder/index.js"}],[536,{"./CryptoECKey":530,"./CryptoHDKey":531,"./RegistryItem":538,"./RegistryType":539,"./lib/DataItem":544},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MultiKey=void 0;const n=e("./CryptoECKey"),s=e("./CryptoHDKey"),i=e("./lib/DataItem"),o=e("./RegistryItem"),a=e("./RegistryType");var c;!function(e){e[e.threshold=1]="threshold",e[e.keys=2]="keys"}(c||(c={}));class u extends o.RegistryItem{constructor(e,t){super(),this.threshold=e,this.keys=t,this.getThreshold=()=>this.threshold,this.getKeys=()=>this.keys,this.toDataItem=()=>{const e={};e[c.threshold]=this.threshold;const t=this.keys.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}));return e[c.keys]=t,new i.DataItem(e)},this.getOutputDescriptorContent=()=>[this.getThreshold(),this.keys.map((e=>e.getOutputDescriptorContent())).join(",")].join(",")}}r.MultiKey=u,u.fromDataItem=e=>{const t=e.getData(),r=t[c.threshold],i=t[c.keys],o=[];return i.forEach((e=>{e.getTag()===a.RegistryTypes.CRYPTO_HDKEY.getTag()?o.push(s.CryptoHDKey.fromDataItem(e)):e.getTag()===a.RegistryTypes.CRYPTO_ECKEY.getTag()&&o.push(n.CryptoECKey.fromDataItem(e))})),new u(r,o)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/MultiKey.js"}],[537,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PathComponent=void 0;class n{constructor(e){if(this.getIndex=()=>this.index,this.isWildcard=()=>this.wildcard,this.isHardened=()=>this.hardened,this.index=e.index,this.hardened=e.hardened,this.index!==undefined?this.wildcard=!1:this.wildcard=!0,this.index&&0!=(this.index&n.HARDENED_BIT))throw new Error(`#[ur-registry][PathComponent][fn.constructor]: Invalid index ${this.index} - most significant bit cannot be set`)}}r.PathComponent=n,n.HARDENED_BIT=2147483648}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/PathComponent.js"}],[538,{"./lib":546,"@ngraveio/bc-ur":1379},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RegistryItem=void 0;const n=e("@ngraveio/bc-ur"),s=e("./lib");r.RegistryItem=class{constructor(){this.toCBOR=()=>{if(this.toDataItem()===undefined)throw new Error(`#[ur-registry][RegistryItem][fn.toCBOR]: registry ${this.getRegistryType()}'s method toDataItem returns undefined`);return(0,s.encodeDataItem)(this.toDataItem())},this.toUR=()=>new n.UR(this.toCBOR(),this.getRegistryType().getType()),this.toUREncoder=(e,t,r)=>{const s=this.toUR();return new n.UREncoder(s,e,t,r)}}}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/RegistryItem.js"}],[539,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RegistryTypes=r.RegistryType=void 0;class n{constructor(e,t){this.type=e,this.tag=t,this.getTag=()=>this.tag,this.getType=()=>this.type}}r.RegistryType=n,r.RegistryTypes={UUID:new n("uuid",37),BYTES:new n("bytes",undefined),CRYPTO_HDKEY:new n("crypto-hdkey",303),CRYPTO_KEYPATH:new n("crypto-keypath",304),CRYPTO_COIN_INFO:new n("crypto-coin-info",305),CRYPTO_ECKEY:new n("crypto-eckey",306),CRYPTO_OUTPUT:new n("crypto-output",308),CRYPTO_PSBT:new n("crypto-psbt",310),CRYPTO_ACCOUNT:new n("crypto-account",311),CRYPTO_MULTI_ACCOUNTS:new n("crypto-multi-accounts",1103)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/RegistryType.js"}],[540,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ScriptExpressions=r.ScriptExpression=void 0;class n{constructor(e,t){this.tag=e,this.expression=t,this.getTag=()=>this.tag,this.getExpression=()=>this.expression}}r.ScriptExpression=n,n.fromTag=e=>Object.values(r.ScriptExpressions).find((t=>t.getTag()===e)),r.ScriptExpressions={SCRIPT_HASH:new n(400,"sh"),WITNESS_SCRIPT_HASH:new n(401,"wsh"),PUBLIC_KEY:new n(402,"pk"),PUBLIC_KEY_HASH:new n(403,"pkh"),WITNESS_PUBLIC_KEY_HASH:new n(404,"wpkh"),COMBO:new n(405,"combo"),MULTISIG:new n(406,"multi"),SORTED_MULTISIG:new n(407,"sortedmulti"),ADDRESS:new n(307,"addr"),RAW_SCRIPT:new n(408,"raw")}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/ScriptExpression.js"}],[541,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.UnknownURTypeError=void 0;class n extends Error{constructor(e){super(e)}}r.UnknownURTypeError=n}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/errors/index.js"}],[542,{"../CryptoHDKey":531,"../RegistryItem":538,"../RegistryType":539,"../lib":546,buffer:2065},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoMultiAccounts=void 0;const n=e("../RegistryType"),s=e("../CryptoHDKey"),i=e("../RegistryItem"),o=e("../lib");var a;!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.keys=2]="keys",e[e.device=3]="device"}(a||(a={}));class c extends i.RegistryItem{constructor(e,t,r){super(),this.masterFingerprint=e,this.keys=t,this.device=r,this.getRegistryType=()=>n.RegistryTypes.CRYPTO_MULTI_ACCOUNTS,this.getMasterFingerprint=()=>this.masterFingerprint,this.getKeys=()=>this.keys,this.getDevice=()=>this.device,this.toDataItem=()=>{const e={};return this.masterFingerprint&&(e[a.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.keys&&(e[a.keys]=this.keys.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}))),this.device&&(e[a.device]=this.device),new o.DataItem(e)}}}r.CryptoMultiAccounts=c,c.fromDataItem=e=>{const r=e.getData(),n=t.alloc(4),i=r[a.masterFingerprint];i&&n.writeUInt32BE(i,0);const o=r[a.keys].map((e=>s.CryptoHDKey.fromDataItem(e))),u=r[a.device];return new c(n,o,u)},c.fromCBOR=e=>{const t=(0,o.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/extended/CryptoMultiAccounts.js"}],[543,{"./Bytes":527,"./CryptoAccount":528,"./CryptoCoinInfo":529,"./CryptoECKey":530,"./CryptoHDKey":531,"./CryptoKeypath":532,"./CryptoOutput":533,"./CryptoPSBT":534,"./Decoder":535,"./MultiKey":536,"./PathComponent":537,"./RegistryItem":538,"./RegistryType":539,"./ScriptExpression":540,"./errors":541,"./extended/CryptoMultiAccounts":542,"./lib":546,"./patchCBOR":547,"./types":548,"./utils":549,"buffer/":2076,tslib:3344},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Buffer=r.extend=r.PathComponent=r.ScriptExpressions=r.MultiKey=r.CryptoPSBT=r.CryptoOutput=r.CryptoECKey=r.CryptoCoinInfoNetwork=r.CryptoCoinInfoType=r.CryptoCoinInfo=r.CryptoKeypath=r.CryptoMultiAccounts=r.CryptoHDKey=r.CryptoAccount=r.Bytes=r.URRegistryDecoder=r.DataItem=void 0;const n=e("tslib");e("./patchCBOR");const s=e("buffer/");Object.defineProperty(r,"Buffer",{enumerable:!0,get:function(){return s.Buffer}});const i=e("./CryptoHDKey");Object.defineProperty(r,"CryptoHDKey",{enumerable:!0,get:function(){return i.CryptoHDKey}});const o=e("./CryptoKeypath");Object.defineProperty(r,"CryptoKeypath",{enumerable:!0,get:function(){return o.CryptoKeypath}});const a=e("./CryptoCoinInfo");Object.defineProperty(r,"CryptoCoinInfo",{enumerable:!0,get:function(){return a.CryptoCoinInfo}}),Object.defineProperty(r,"CryptoCoinInfoType",{enumerable:!0,get:function(){return a.Type}}),Object.defineProperty(r,"CryptoCoinInfoNetwork",{enumerable:!0,get:function(){return a.Network}});const c=e("./CryptoECKey");Object.defineProperty(r,"CryptoECKey",{enumerable:!0,get:function(){return c.CryptoECKey}});const u=e("./Bytes");Object.defineProperty(r,"Bytes",{enumerable:!0,get:function(){return u.Bytes}});const h=e("./CryptoOutput");Object.defineProperty(r,"CryptoOutput",{enumerable:!0,get:function(){return h.CryptoOutput}});const d=e("./CryptoPSBT");Object.defineProperty(r,"CryptoPSBT",{enumerable:!0,get:function(){return d.CryptoPSBT}});const l=e("./CryptoAccount");Object.defineProperty(r,"CryptoAccount",{enumerable:!0,get:function(){return l.CryptoAccount}});const p=e("./Decoder");Object.defineProperty(r,"URRegistryDecoder",{enumerable:!0,get:function(){return p.URRegistryDecoder}});const f=e("./MultiKey");Object.defineProperty(r,"MultiKey",{enumerable:!0,get:function(){return f.MultiKey}});const g=e("./ScriptExpression");Object.defineProperty(r,"ScriptExpressions",{enumerable:!0,get:function(){return g.ScriptExpressions}});const y=e("./PathComponent");Object.defineProperty(r,"PathComponent",{enumerable:!0,get:function(){return y.PathComponent}});const m=e("./RegistryItem"),b=e("./RegistryType"),T=e("./lib");var w=e("./lib");Object.defineProperty(r,"DataItem",{enumerable:!0,get:function(){return w.DataItem}});const v=e("./utils"),k=e("./extended/CryptoMultiAccounts");Object.defineProperty(r,"CryptoMultiAccounts",{enumerable:!0,get:function(){return k.CryptoMultiAccounts}});const _={URRegistryDecoder:p.URRegistryDecoder,Bytes:u.Bytes,CryptoAccount:l.CryptoAccount,CryptoHDKey:i.CryptoHDKey,CryptoMultiAccounts:k.CryptoMultiAccounts,CryptoKeypath:o.CryptoKeypath,CryptoCoinInfo:a.CryptoCoinInfo,CryptoCoinInfoType:a.Type,CryptoCoinInfoNetwork:a.Network,CryptoECKey:c.CryptoECKey,CryptoOutput:h.CryptoOutput,CryptoPSBT:d.CryptoPSBT,MultiKey:f.MultiKey,ScriptExpressions:g.ScriptExpressions,PathComponent:y.PathComponent},S={addReader:T.addReader,addSemanticDecode:T.addSemanticDecode,addSemanticEncode:T.addSemanticEncode,addWriter:T.addWriter,patchTags:v.patchTags},E={RegistryTypes:b.RegistryTypes,RegistryItem:m.RegistryItem,RegistryType:b.RegistryType,decodeToDataItem:T.decodeToDataItem,encodeDataItem:T.encodeDataItem,cbor:S};r.extend=E,(0,n.__exportStar)(e("./errors"),r),(0,n.__exportStar)(e("./Decoder"),r),(0,n.__exportStar)(e("./lib"),r),(0,n.__exportStar)(e("./CryptoAccount"),r),(0,n.__exportStar)(e("./CryptoPSBT"),r),(0,n.__exportStar)(e("./CryptoHDKey"),r),(0,n.__exportStar)(e("./extended/CryptoMultiAccounts"),r),(0,n.__exportStar)(e("./CryptoOutput"),r),(0,n.__exportStar)(e("./CryptoCoinInfo"),r),(0,n.__exportStar)(e("./CryptoECKey"),r),(0,n.__exportStar)(e("./MultiKey"),r),(0,n.__exportStar)(e("./CryptoKeypath"),r),(0,n.__exportStar)(e("./patchCBOR"),r),(0,n.__exportStar)(e("./PathComponent"),r),(0,n.__exportStar)(e("./RegistryItem"),r),(0,n.__exportStar)(e("./RegistryType"),r),(0,n.__exportStar)(e("./types"),r),(0,n.__exportStar)(e("./utils"),r),r.default=_}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/index.js"}],[544,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DataItem=void 0;r.DataItem=class{constructor(e,t){this.setTag=e=>{this.tag=e},this.clearTag=()=>{this.tag=undefined},this.getTag=()=>this.tag,this.getData=()=>this.data,this.data=e,this.tag=t}}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/lib/DataItem.js"}],[545,{"./DataItem":544,buffer:2065},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){!function(e,r){"function"==typeof define&&define.amd?define([],r):void 0!==t&&t.exports?t.exports=r():e.CBOR=r()}(this,(function(){const{DataItem:t}=e("./DataItem");var n=function(){function e(e){this.$hex=e}e.prototype={length:function(){return this.$hex.length/2},toString:function(e){if(!e||"hex"===e||16===e)return this.$hex;if("utf-8"===e){for(var t="",r=0;r<this.$hex.length;r+=2)t+="%"+this.$hex.substring(r,r+2);return decodeURIComponent(t)}if("latin"===e){for(t=[],r=0;r<this.$hex.length;r+=2)t.push(parseInt(this.$hex.substring(r,r+2),16));return String.fromCharCode.apply(String,t)}throw new Error("Unrecognised format: "+e)}},e.fromLatinString=function(t){for(var r="",n=0;n<t.length;n++){var s=t.charCodeAt(n).toString(16);1===s.length&&(s="0"+s),r+=s}return new e(r)},e.fromUtf8String=function(t){for(var r=encodeURIComponent(t),n="",s=0;s<r.length;s++)if("%"===r.charAt(s))n+=r.substring(s+1,s+3),s+=2;else{var i=r.charCodeAt(s).toString(16);i.length<2&&(i="0"+i),n+=i}return new e(n)};var n=[],s={},i=function(e){return function(){throw new Error(e+" not implemented")}};function o(){}function a(){}function c(e,t){var r=e.value;return r<24?r:24==r?t.readByte():25==r?t.readUint16():26==r?t.readUint32():27==r?t.readUint64():31==r?null:void i("Additional info: "+r)()}function u(e,t,r){var n=e<<5;t<24?r.writeByte(n|t):t<256?(r.writeByte(24|n),r.writeByte(t)):t<65536?(r.writeByte(25|n),r.writeUint16(t)):t<4294967296?(r.writeByte(26|n),r.writeUint32(t)):(r.writeByte(27|n),r.writeUint64(t))}o.prototype={peekByte:i("peekByte"),readByte:i("readByte"),readChunk:i("readChunk"),readFloat16:function(){var e=this.readUint16(),t=(32767&e)>>10,r=1023&e,n=32768&e;if(31===t)return 0===r?n?-Infinity:Infinity:NaN;var s=t?Math.pow(2,t-25)*(1024+r):Math.pow(2,-24)*r;return n?-s:s},readFloat32:function(){var e=this.readUint32(),t=(2147483647&e)>>23,r=8388607&e,n=2147483648&e;if(255===t)return 0===r?n?-Infinity:Infinity:NaN;var s=t?Math.pow(2,t-23-127)*(8388608+r):Math.pow(2,-149)*r;return n?-s:s},readFloat64:function(){var e=this.readUint32(),t=e>>20&2047,r=4294967296*(1048575&e)+this.readUint32(),n=2147483648&e;if(2047===t)return 0===r?n?-Infinity:Infinity:NaN;var s=t?Math.pow(2,t-52-1023)*(4503599627370496+r):Math.pow(2,-1074)*r;return n?-s:s},readUint16:function(){return 256*this.readByte()+this.readByte()},readUint32:function(){return 65536*this.readUint16()+this.readUint16()},readUint64:function(){return 4294967296*this.readUint32()+this.readUint32()}},a.prototype={writeByte:i("writeByte"),result:i("result"),writeFloat16:i("writeFloat16"),writeFloat32:i("writeFloat32"),writeFloat64:i("writeFloat64"),writeUint16:function(e){this.writeByte(e>>8&255),this.writeByte(255&e)},writeUint32:function(e){this.writeUint16(e>>16&65535),this.writeUint16(65535&e)},writeUint64:function(e){if(e>=9007199254740992||e<=-9007199254740992)throw new Error("Cannot encode Uint64 of: "+e+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(e/4294967296)),this.writeUint32(e%4294967296)},writeString:i("writeString"),canWriteBinary:function(e){return!1},writeBinary:i("writeChunk")};var h=new Error;function d(e){var t=function(e){var t=e.readByte();return{type:t>>5,value:31&t}}(e);switch(t.type){case 0:return c(t,e);case 1:return-1-c(t,e);case 2:return e.readChunk(c(t,e));case 3:return e.readChunk(c(t,e)).toString("utf-8");case 4:case 5:var r=c(t,e),n=[];if(null!==r){5===t.type&&(r*=2);for(var i=0;i<r;i++)n[i]=d(e)}else for(var o;(o=d(e))!==h;)n.push(o);if(5===t.type){var a={};for(i=0;i<n.length;i+=2)a[n[i]]=n[i+1];return a}return n;case 6:var u=c(t,e),l=s[u];n=d(e);return l?l(n):n;case 7:if(25===t.value)return e.readFloat16();if(26===t.value)return e.readFloat32();if(27===t.value)return e.readFloat64();switch(c(t,e)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return undefined;case null:return h;default:throw new Error("Unknown fixed value: "+t.value)}default:throw new Error("Unsupported header: "+JSON.stringify(t))}throw new Error("not implemented yet")}function l(e,t){for(var r=0;r<n.length;r++){var s=n[r].fn(e);if(s!==undefined)return u(6,n[r].tag,t),l(s,t)}if(e&&"function"==typeof e.toCBOR&&(e=e.toCBOR()),!1===e)u(7,20,t);else if(!0===e)u(7,21,t);else if(null===e)u(7,22,t);else if(e===undefined)u(7,23,t);else if("number"==typeof e)Math.floor(e)===e&&e<9007199254740992&&e>-9007199254740992?e<0?u(1,-1-e,t):u(0,e,t):(!function(e,t,r){r.writeByte(e<<5|t)}(7,27,t),t.writeFloat64(e));else if("string"==typeof e)t.writeString(e,(function(e){u(3,e,t)}));else if(t.canWriteBinary(e))t.writeBinary(e,(function(e){u(2,e,t)}));else{if("object"!=typeof e)throw new Error("CBOR encoding not supported: "+e);if(g.config.useToJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),Array.isArray(e)){u(4,e.length,t);for(r=0;r<e.length;r++)l(e[r],t)}else{var i=Object.keys(e);u(5,i.length,t);for(r=0;r<i.length;r++){const n=parseInt(i[r]);isNaN(n)?(l(i[r],t),l(e[i[r]],t)):(l(n,t),l(e[i[r]],t))}}}}var p=[],f=[],g={config:{useToJSON:!0},addWriter:function(e,t){"string"==typeof e?f.push((function(r){if(e===r)return t(r)})):f.push(e)},addReader:function(e,t){"string"==typeof e?p.push((function(r,n){if(e===n)return t(r,n)})):p.push(e)},encode:function(e,t){for(var r=0;r<f.length;r++){var n=(0,f[r])(t);if(n)return l(e,n),n.result()}throw new Error("Unsupported output format: "+t)},encodeDataItem:function(e,t){for(var r=0;r<f.length;r++){var n=(0,f[r])(t);if(n)return e.getTag()!==undefined?(l(e,n),n.result()):(l(e.getData(),n),n.result())}throw new Error("Unsupported output format: "+t)},decode:function(e,t){for(var r=0;r<p.length;r++){var n=(0,p[r])(e,t);if(n)return d(n)}throw new Error("Unsupported input format: "+t)},decodeToDataItem:function(e,r){for(var n=0;n<p.length;n++){var s=(0,p[n])(e,r);if(s){const e=d(s);return e instanceof t?e:new t(e)}}throw new Error("Unsupported input format: "+r)},addSemanticEncode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return n.push({tag:e,fn:t}),this},addSemanticDecode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return s[e]=t,this}};function y(e){this.buffer=e,this.pos=0}function m(e){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=r.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=e}function b(e){this.hex=e,this.pos=0}function T(e){this.$hex="",this.finalFormat=e||"hex"}return y.prototype=Object.create(o.prototype),y.prototype.peekByte=function(){return this.buffer[this.pos]},y.prototype.readByte=function(){return this.buffer[this.pos++]},y.prototype.readUint16=function(){var e=this.buffer.readUInt16BE(this.pos);return this.pos+=2,e},y.prototype.readUint32=function(){var e=this.buffer.readUInt32BE(this.pos);return this.pos+=4,e},y.prototype.readFloat32=function(){var e=this.buffer.readFloatBE(this.pos);return this.pos+=4,e},y.prototype.readFloat64=function(){var e=this.buffer.readDoubleBE(this.pos);return this.pos+=8,e},y.prototype.readChunk=function(e){var t=r.alloc(e);return this.buffer.copy(t,0,this.pos,this.pos+=e),t},m.prototype=Object.create(a.prototype),m.prototype.writeByte=function(e){this.latestBuffer[this.latestBufferOffset++]=e,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=r.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},m.prototype.writeFloat32=function(e){var t=r.alloc(4);t.writeFloatBE(e,0),this.writeBuffer(t)},m.prototype.writeFloat64=function(e){var t=r.alloc(8);t.writeDoubleBE(e,0),this.writeBuffer(t)},m.prototype.writeString=function(e,t){var n=r.from(e,"utf-8");t(n.length),this.writeBuffer(n)},m.prototype.canWriteBinary=function(e){return e instanceof r},m.prototype.writeBinary=function(e,t){t(e.length),this.writeBuffer(e)},m.prototype.writeBuffer=function(e){if(!(e instanceof r))throw new TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=e.length?(e.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=e.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=r.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(e),this.latestBuffer=r.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(e),this.byteLength+=e.length},m.prototype.result=function(){for(var e=r.alloc(this.byteLength),t=0,n=0;n<this.completeBuffers.length;n++){var s=this.completeBuffers[n];s.copy(e,t,0,s.length),t+=s.length}return this.latestBufferOffset&&this.latestBuffer.copy(e,t,0,this.latestBufferOffset),this.stringFormat?e.toString(this.stringFormat):e},"function"==typeof r&&(g.addReader((function(e,t){return r.isBuffer(e)?new y(e):"hex"===t||"base64"===t?new y(r.from(e,t)):void 0})),g.addWriter((function(e){return e&&"buffer"!==e?"hex"===e||"base64"===e?new m(e):void 0:new m}))),b.prototype=Object.create(o.prototype),b.prototype.peekByte=function(){var e=this.hex.substring(this.pos,2);return parseInt(e,16)},b.prototype.readByte=function(){var e=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(e,16)},b.prototype.readChunk=function(t){var n=this.hex.substring(this.pos,this.pos+2*t);return this.pos+=2*t,"function"==typeof r?r.from(n,"hex"):new e(n)},T.prototype=Object.create(a.prototype),T.prototype.writeByte=function(e){if(e<0||e>255)throw new Error("Byte value out of range: "+e);var t=e.toString(16);1==t.length&&(t="0"+t),this.$hex+=t},T.prototype.canWriteBinary=function(t){return t instanceof e||"function"==typeof r&&t instanceof r},T.prototype.writeBinary=function(t,n){if(t instanceof e)n(t.length()),this.$hex+=t.$hex;else{if(!("function"==typeof r&&t instanceof r))throw new TypeError("HexWriter only accepts BinaryHex or Buffers");n(t.length),this.$hex+=t.toString("hex")}},T.prototype.result=function(){return"buffer"===this.finalFormat&&"function"==typeof r?r.from(this.$hex,"hex"):new e(this.$hex).toString(this.finalFormat)},T.prototype.writeString=function(t,r){var n=e.fromUtf8String(t);r(n.length()),this.$hex+=n.$hex},g.addReader((function(t,r){return t instanceof e||t.$hex?new b(t.$hex):"hex"===r?new b(t):void 0})),g.addWriter((function(e){if("hex"===e)return new T})),g}();return n.addSemanticEncode(0,(function(e){if(e instanceof Date)return e.toISOString()})).addSemanticDecode(0,(function(e){return new Date(e)})).addSemanticDecode(1,(function(e){return new Date(e)})),n}))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/lib/cbor-sync.js"}],[546,{"./DataItem":544,"./cbor-sync":545},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DataItem=r.addWriter=r.addReader=r.addSemanticEncode=r.addSemanticDecode=r.decodeToDataItem=r.encodeDataItem=void 0;var n=e("./cbor-sync");Object.defineProperty(r,"encodeDataItem",{enumerable:!0,get:function(){return n.encodeDataItem}}),Object.defineProperty(r,"decodeToDataItem",{enumerable:!0,get:function(){return n.decodeToDataItem}}),Object.defineProperty(r,"addSemanticDecode",{enumerable:!0,get:function(){return n.addSemanticDecode}}),Object.defineProperty(r,"addSemanticEncode",{enumerable:!0,get:function(){return n.addSemanticEncode}}),Object.defineProperty(r,"addReader",{enumerable:!0,get:function(){return n.addReader}}),Object.defineProperty(r,"addWriter",{enumerable:!0,get:function(){return n.addWriter}});var s=e("./DataItem");Object.defineProperty(r,"DataItem",{enumerable:!0,get:function(){return s.DataItem}})}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/lib/index.js"}],[547,{"./RegistryType":539,"./ScriptExpression":540,"./utils":549},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});const n=e("./utils"),s=e("./RegistryType"),i=e("./ScriptExpression"),o=Object.values(s.RegistryTypes).filter((e=>!!e.getTag())).map((e=>e.getTag())),a=Object.values(i.ScriptExpressions).map((e=>e.getTag()));(0,n.patchTags)(o.concat(a))}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/patchCBOR.js"}],[548,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/types.js"}],[549,{"./lib":546},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.patchTags=void 0;const n=e("./lib"),s=[];r.patchTags=e=>{e.forEach((e=>{s.find((t=>t===e))||((0,n.addSemanticEncode)(e,(t=>{if(t instanceof n.DataItem&&t.getTag()===e)return t.getData()})),(0,n.addSemanticDecode)(e,(t=>new n.DataItem(t,e))),s.push(e))}))}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/utils.js"}],[550,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++)t.push(n(e[r]));const r=p(...t);return p(o(r.length,192),r)}const t=m(e);return 1===t.length&&t[0]<128?t:p(o(t.length,128),t)}function s(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function i(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return d(h(e))}function o(e,t){if(e<56)return Uint8Array.from([e+t]);const r=g(e),n=g(t+55+r.length/2);return Uint8Array.from(l(n+r))}function a(e,t=!1){if(!e||0===e.length)return Uint8Array.from([]);const r=c(m(e));if(t)return r;if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}function c(e){let t,r,n,o,a;const u=[],h=e[0];if(h<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(h<=183){if(t=h-127,n=128===h?Uint8Array.from([]):s(e,1,t),2===t&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:e.slice(t)}}if(h<=191){if(r=h-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=i(s(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=s(e,r,t+r),{data:n,remainder:e.slice(t+r)}}if(h<=247){for(t=h-191,o=s(e,1,t);o.length;)a=c(o),u.push(a.data),o=a.remainder;return{data:u,remainder:e.slice(t)}}{if(r=h-246,t=i(s(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const n=r+t;if(n>e.length)throw new Error("invalid RLP: total length is larger than the data");for(o=s(e,r,n);o.length;)a=c(o),u.push(a.data),o=a.remainder;return{data:u,remainder:e.slice(n)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.utils=r.decode=r.encode=void 0,r.encode=n,r.decode=a;const u=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function h(e){let t="";for(let r=0;r<e.length;r++)t+=u[e[r]];return t}function d(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function l(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=d(e.slice(n,n+2))}return t}function p(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return r}function f(e){return(new TextEncoder).encode(e)}function g(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function y(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function m(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return y(e)?l((t="string"!=typeof(r=e)?r:y(r)?r.slice(2):r).length%2?`0${t}`:t):f(e);var t,r;if("number"==typeof e||"bigint"==typeof e)return e?l(g(e)):Uint8Array.from([]);if(null===e||e===undefined)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}r.utils={bytesToHex:h,concatBytes:p,hexToBytes:l,utf8ToBytes:f};const b={encode:n,decode:a};r.default=b}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>rlp",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/rlp/dist/index.js"}],[56,{lodash:2954},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return s((0,n.cloneDeep)(e),(e=>null===e?"null":typeof e))};var n=e("lodash");function s(e={},t){return Object.entries(e).forEach((([r,n])=>{e[r]="object"==typeof n&&null!==n?s(n,t):t(n)})),e}}}},{package:"$root$",file:"app/scripts/lib/getObjStructure.js"}],[57,{"../../../shared/modules/browser-runtime.utils":3437,"@sentry/browser":1423,loglevel:2966,"webextension-polyfill":3393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("webextension-polyfill")),s=a(e("loglevel")),i=e("@sentry/browser"),o=e("../../../shared/modules/browser-runtime.utils");function a(e){return e&&e.__esModule?e:{default:e}}r.default=class{constructor(){this.isSupported=Boolean(n.default.storage.local),this.isSupported||s.default.error("Storage local API not available."),this.dataPersistenceFailing=!1}setMetadata(e){this.metadata=e}async set(e){if(!this.isSupported)throw new Error("Metamask- cannot persist state to local store as this browser does not support this action");if(!e)throw new Error("MetaMask - updated state is missing");if(!this.metadata)throw new Error('MetaMask - metadata must be set on instance of ExtensionStore before calling "set"');try{await this._set({data:e,meta:this.metadata}),this.dataPersistenceFailing&&(this.dataPersistenceFailing=!1)}catch(e){this.dataPersistenceFailing||(this.dataPersistenceFailing=!0,(0,i.captureException)(e)),s.default.error("error setting state in local store:",e)}}async get(){if(!this.isSupported)return undefined;const e=await this._get();return t=e,0===Object.keys(t).length?undefined:e;var t}_get(){const{local:e}=n.default.storage;return new Promise(((t,r)=>{e.get(null).then((e=>{const n=(0,o.checkForLastError)();n?r(n):t(e)}))}))}_set(e){const{local:t}=n.default.storage;return new Promise(((r,n)=>{t.set(e).then((()=>{const e=(0,o.checkForLastError)();e?n(e):r()}))}))}}}}},{package:"$root$",file:"app/scripts/lib/local-store.js"}],[576,{"./metamask-airgapped-keyring.cjs.development.js":577,"./metamask-airgapped-keyring.cjs.production.min.js":578},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./metamask-airgapped-keyring.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/index.js"}],[577,{"@ethereumjs/tx":364,"@keystonehq/base-eth-keyring":523,"@keystonehq/bc-ur-registry-eth":581,"@metamask/obs-store":609,buffer:2065,events:2066,rlp:3259,uuid:3359},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("@keystonehq/base-eth-keyring"),i=e("events"),o=e("@metamask/obs-store"),a=e("@keystonehq/bc-ur-registry-eth"),c=e("uuid"),u=e("@ethereumjs/tx"),h=(n=e("rlp"))&&"object"==typeof n&&"default"in n?n.default:n;class d extends i.EventEmitter{constructor(){if(super(),this.cleanSyncListeners=()=>{this.removeAllListeners("keystone-sync_success-hdkey"),this.removeAllListeners("keystone-sync_success-account"),this.removeAllListeners("keystone-sync_cancel")},this.cleanSignListeners=e=>{this.removeAllListeners(`${e}-signed`),this.removeAllListeners(`${e}-canceled`)},this.readCryptoHDKeyOrCryptoAccount=()=>new Promise(((e,r)=>{this.memStore.updateState({sync:{reading:!0}}),this.on("keystone-sync_success-hdkey",(r=>{const n=a.CryptoHDKey.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_success-account",(r=>{const n=a.CryptoAccount.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_cancel",(()=>{this.resetState(),r(new Error("KeystoneError#sync_cancel. Sync process canceled, please retry"))}))})),this.submitCryptoHDKey=e=>{this.emit("keystone-sync_success-hdkey",e)},this.submitCryptoAccount=e=>{this.emit("keystone-sync_success-account",e)},this.cancelSync=()=>{this.emit("keystone-sync_cancel")},this.requestSignature=(e,r,n)=>new Promise(((s,i)=>{const o=e.toUR(),u=e.getRequestId(),h=c.stringify(u),d={requestId:h,payload:{type:o.type,cbor:o.cbor.toString("hex")},title:r,description:n};this.memStore.updateState({sign:{request:d}}),this.once(`${h}-signed`,(e=>{const r=a.ETHSignature.fromCBOR(t.from(e,"hex"));this.resetState(),s(r)})),this.once(`${h}-canceled`,(()=>{this.resetState(),i(new Error("KeystoneError#Tx_canceled. Signing canceled, please retry"))}))})),this.submitSignature=(e,t)=>{this.emit(`${e}-signed`,t)},this.cancelRequestSignature=()=>{const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.memStore.updateState({sign:{}}),this.emit(`${t}-canceled`)}},this.reset=()=>{this.cleanSyncListeners();const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.cleanSignListeners(t)}this.resetState()},this.resetState=()=>{this.memStore.updateState({sync:{reading:!1},sign:{}})},d.instance)return d.instance;this.memStore=new o.ObservableStore({sync:{reading:!1},sign:{},_version:1}),d.instance=this}}class l extends s.BaseKeyring{constructor(e){if(super(e),this.getInteraction=()=>new d,this.resetStore=()=>{this.getInteraction().reset()},this.getMemStore=()=>this.getInteraction().memStore,this.removeAccount=e=>{if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))},this.forgetDevice=()=>{this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.name="QR Hardware",this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.indexes={},this.hdk=undefined,this.paths={}},this.submitCryptoHDKey=this.getInteraction().submitCryptoHDKey,this.submitCryptoAccount=this.getInteraction().submitCryptoAccount,this.submitSignature=this.getInteraction().submitSignature,this.cancelSync=this.getInteraction().cancelSync,this.cancelSignRequest=this.getInteraction().cancelRequestSignature,l.instance)return l.instance.deserialize(e),l.instance;l.instance=this}async signTransaction(e,t){const r=0===t.type?a.DataType.transaction:a.DataType.typedTransaction;let n;n=0===t.type?h.encode(t.getMessageToSign(!1)):t.getMessageToSign(!1);const s=await this._pathFromAddress(e),i=t.common.chainId(),o=c.v4(),d=a.EthSignRequest.constructETHRequest(n,r,s,this.xfp,o,i,e),{r:l,s:p,v:f}=await this.requestSignature(o,d,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),g=t.toJSON();g.v=f,g.s=p,g.r=l,g.type=t.type;return u.TransactionFactory.fromTxData(g,{common:t.common})}}l.type=s.BaseKeyring.type,r.MetaMaskKeyring=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/metamask-airgapped-keyring.cjs.development.js"}],[578,{"@ethereumjs/tx":364,"@keystonehq/base-eth-keyring":523,"@keystonehq/bc-ur-registry-eth":581,"@metamask/obs-store":609,buffer:2065,events:2066,rlp:3259,uuid:3359},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("@keystonehq/base-eth-keyring"),i=e("events"),o=e("@metamask/obs-store"),a=e("@keystonehq/bc-ur-registry-eth"),c=e("uuid"),u=e("@ethereumjs/tx"),h=(n=e("rlp"))&&"object"==typeof n&&"default"in n?n.default:n;class d extends i.EventEmitter{constructor(){if(super(),this.cleanSyncListeners=()=>{this.removeAllListeners("keystone-sync_success-hdkey"),this.removeAllListeners("keystone-sync_success-account"),this.removeAllListeners("keystone-sync_cancel")},this.cleanSignListeners=e=>{this.removeAllListeners(e+"-signed"),this.removeAllListeners(e+"-canceled")},this.readCryptoHDKeyOrCryptoAccount=()=>new Promise(((e,r)=>{this.memStore.updateState({sync:{reading:!0}}),this.on("keystone-sync_success-hdkey",(r=>{const n=a.CryptoHDKey.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_success-account",(r=>{const n=a.CryptoAccount.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_cancel",(()=>{this.resetState(),r(new Error("KeystoneError#sync_cancel. Sync process canceled, please retry"))}))})),this.submitCryptoHDKey=e=>{this.emit("keystone-sync_success-hdkey",e)},this.submitCryptoAccount=e=>{this.emit("keystone-sync_success-account",e)},this.cancelSync=()=>{this.emit("keystone-sync_cancel")},this.requestSignature=(e,r,n)=>new Promise(((s,i)=>{const o=e.toUR(),u=e.getRequestId(),h=c.stringify(u),d={requestId:h,payload:{type:o.type,cbor:o.cbor.toString("hex")},title:r,description:n};this.memStore.updateState({sign:{request:d}}),this.once(h+"-signed",(e=>{const r=a.ETHSignature.fromCBOR(t.from(e,"hex"));this.resetState(),s(r)})),this.once(h+"-canceled",(()=>{this.resetState(),i(new Error("KeystoneError#Tx_canceled. Signing canceled, please retry"))}))})),this.submitSignature=(e,t)=>{this.emit(e+"-signed",t)},this.cancelRequestSignature=()=>{const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.memStore.updateState({sign:{}}),this.emit(t+"-canceled")}},this.reset=()=>{this.cleanSyncListeners();const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.cleanSignListeners(t)}this.resetState()},this.resetState=()=>{this.memStore.updateState({sync:{reading:!1},sign:{}})},d.instance)return d.instance;this.memStore=new o.ObservableStore({sync:{reading:!1},sign:{},_version:1}),d.instance=this}}class l extends s.BaseKeyring{constructor(e){if(super(e),this.getInteraction=()=>new d,this.resetStore=()=>{this.getInteraction().reset()},this.getMemStore=()=>this.getInteraction().memStore,this.removeAccount=e=>{if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))},this.forgetDevice=()=>{this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.name="QR Hardware",this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.indexes={},this.hdk=void 0,this.paths={}},this.submitCryptoHDKey=this.getInteraction().submitCryptoHDKey,this.submitCryptoAccount=this.getInteraction().submitCryptoAccount,this.submitSignature=this.getInteraction().submitSignature,this.cancelSync=this.getInteraction().cancelSync,this.cancelSignRequest=this.getInteraction().cancelRequestSignature,l.instance)return l.instance.deserialize(e),l.instance;l.instance=this}async signTransaction(e,t){const r=0===t.type?a.DataType.transaction:a.DataType.typedTransaction;let n;n=0===t.type?h.encode(t.getMessageToSign(!1)):t.getMessageToSign(!1);const s=await this._pathFromAddress(e),i=t.common.chainId(),o=c.v4(),d=a.EthSignRequest.constructETHRequest(n,r,s,this.xfp,o,i,e),{r:l,s:p,v:f}=await this.requestSignature(o,d,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),g=t.toJSON();return g.v=f,g.s=p,g.r=l,g.type=t.type,u.TransactionFactory.fromTxData(g,{common:t.common})}}l.type=s.BaseKeyring.type,r.MetaMaskKeyring=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/metamask-airgapped-keyring.cjs.production.min.js"}],[579,{"@ethereumjs/util":377,"@keystonehq/bc-ur-registry":598,buffer:2065,hdkey:2705,uuid:3359},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("@keystonehq/bc-ur-registry"),i=e("uuid"),o=(n=e("hdkey"))&&"object"==typeof n&&"default"in n?n.default:n,a=e("@ethereumjs/util");const c={ETH_SIGN_REQUEST:new s.RegistryType("eth-sign-request",401),ETH_SIGNATURE:new s.RegistryType("eth-signature",402),ETH_NFT_ITEM:new s.RegistryType("eth-nft-item",403)},{decodeToDataItem:u,RegistryTypes:h}=s.extend;var d,l;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(d||(d={})),(l=r.DataType||(r.DataType={}))[l.transaction=1]="transaction",l[l.typedData=2]="typedData",l[l.personalMessage=3]="personalMessage",l[l.typedTransaction=4]="typedTransaction";class p extends s.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSourceFingerprint=()=>this.derivationPath.getSourceFingerprint(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[d.requestId]=new s.DataItem(this.requestId,h.UUID.getTag())),this.address&&(e[d.address]=this.address),this.chainId&&(e[d.chainId]=this.chainId),this.origin&&(e[d.origin]=this.origin),e[d.signData]=this.signData,e[d.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[d.derivationPath]=t,new s.DataItem(e)},this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin}static constructETHRequest(e,r,n,o,a,c,u,h){const d=n.replace(/[m|M]\//,"").split("/"),l=new s.CryptoKeypath(d.map((e=>{const t=parseInt(e.replace("'",""));let r=!1;return e.endsWith("'")&&(r=!0),new s.PathComponent({index:t,hardened:r})})),t.from(o,"hex"));return new p({requestId:a?t.from(i.parse(a)):undefined,signData:e,dataType:r,derivationPath:l,chainId:c,address:u?t.from(u.replace("0x",""),"hex"):undefined,origin:h||undefined})}}p.fromDataItem=e=>{const t=e.getData(),r=t[d.signData],n=t[d.dataType],i=s.CryptoKeypath.fromDataItem(t[d.derivationPath]),o=t[d.chainId]?t[d.chainId]:undefined,a=t[d.address]?t[d.address]:undefined,c=t[d.requestId]?t[d.requestId].getData():undefined,u=t[d.origin]?t[d.origin]:undefined;return new p({requestId:c,signData:r,dataType:n,chainId:o,derivationPath:i,address:a,origin:u})},p.fromCBOR=e=>{const t=u(e);return p.fromDataItem(t)};const{RegistryTypes:f,decodeToDataItem:g}=s.extend;var y;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature",e[e.origin=3]="origin"}(y||(y={}));class m extends s.RegistryItem{constructor(e,t,r){super(),this.getRegistryType=()=>c.ETH_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};return this.requestId&&(e[y.requestId]=new s.DataItem(this.requestId,f.UUID.getTag())),this.origin&&(e[y.origin]=this.origin),e[y.signature]=this.signature,new s.DataItem(e)},this.signature=e,this.requestId=t,this.origin=r}}m.fromDataItem=e=>{const t=e.getData(),r=t[y.signature],n=t[y.requestId]?t[y.requestId].getData():undefined;return new m(r,n,t[y.origin])},m.fromCBOR=e=>{const t=g(e);return m.fromDataItem(t)};const{decodeToDataItem:b}=s.extend;var T;!function(e){e[e.chainId=1]="chainId",e[e.contractAddress=2]="contractAddress",e[e.contractName=3]="contractName",e[e.name=4]="name",e[e.mediaData=5]="mediaData"}(T||(T={}));class w extends s.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_NFT_ITEM,this.getChainId=()=>this.chainId,this.getName=()=>this.name,this.getmediaData=()=>this.mediaData,this.getContractAddress=()=>this.contractAddress,this.getContractName=()=>this.contractName,this.toDataItem=()=>{const e={};return e[T.chainId]=this.chainId,e[T.name]=this.name,e[T.contractAddress]=this.contractAddress,e[T.contractName]=this.contractName,e[T.mediaData]=this.mediaData,new s.DataItem(e)},this.chainId=e.chainId,this.name=e.name,this.contractAddress=e.contractAddress,this.contractName=e.contractName,this.mediaData=e.mediaData}static constructETHNFTItem(e,t,r,n,s){return new w({chainId:e,contractAddress:t,contractName:r,mediaData:s,name:n})}}w.fromDataItem=e=>{const t=e.getData(),r=t[T.chainId],n=t[T.name],s=t[T.mediaData],i=t[T.contractAddress],o=t[T.contractName];return new w({chainId:r,name:n,contractAddress:i,contractName:o,mediaData:s})},w.fromCBOR=e=>{const t=b(e);return w.fromDataItem(t)};const v=(e,t)=>{const r=o.fromExtendedKey(e).derive(t),n="0x"+a.publicToAddress(r.publicKey,!0).toString("hex");return a.toChecksumAddress(n)};s.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(s).forEach((function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})})),r.ETHNFTItem=w,r.ETHSignature=m,r.EthSignRequest=p,r.findHDPathFromAddress=(e,t,r,n)=>{for(let s=0;s<r;s++){const r=v(t,`M/0/${s}`);if(e.toLowerCase()==r.toLowerCase())return`${n}/0/${s}`}return null},r.generateAddressFromXpub=v}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry-eth/dist/bc-ur-registry-eth.cjs.development.js"}],[580,{"@ethereumjs/util":377,"@keystonehq/bc-ur-registry":598,buffer:2065,hdkey:2705,uuid:3359},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("@keystonehq/bc-ur-registry"),i=e("uuid"),o=(n=e("hdkey"))&&"object"==typeof n&&"default"in n?n.default:n,a=e("@ethereumjs/util");const c={ETH_SIGN_REQUEST:new s.RegistryType("eth-sign-request",401),ETH_SIGNATURE:new s.RegistryType("eth-signature",402),ETH_NFT_ITEM:new s.RegistryType("eth-nft-item",403)},{decodeToDataItem:u,RegistryTypes:h}=s.extend;var d,l;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(d||(d={})),(l=r.DataType||(r.DataType={}))[l.transaction=1]="transaction",l[l.typedData=2]="typedData",l[l.personalMessage=3]="personalMessage",l[l.typedTransaction=4]="typedTransaction";class p extends s.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSourceFingerprint=()=>this.derivationPath.getSourceFingerprint(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[d.requestId]=new s.DataItem(this.requestId,h.UUID.getTag())),this.address&&(e[d.address]=this.address),this.chainId&&(e[d.chainId]=this.chainId),this.origin&&(e[d.origin]=this.origin),e[d.signData]=this.signData,e[d.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[d.derivationPath]=t,new s.DataItem(e)},this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin}static constructETHRequest(e,r,n,o,a,c,u,h){const d=n.replace(/[m|M]\//,"").split("/"),l=new s.CryptoKeypath(d.map((e=>{const t=parseInt(e.replace("'",""));let r=!1;return e.endsWith("'")&&(r=!0),new s.PathComponent({index:t,hardened:r})})),t.from(o,"hex"));return new p({requestId:a?t.from(i.parse(a)):void 0,signData:e,dataType:r,derivationPath:l,chainId:c,address:u?t.from(u.replace("0x",""),"hex"):void 0,origin:h||void 0})}}p.fromDataItem=e=>{const t=e.getData(),r=t[d.signData],n=t[d.dataType],i=s.CryptoKeypath.fromDataItem(t[d.derivationPath]),o=t[d.chainId]?t[d.chainId]:void 0,a=t[d.address]?t[d.address]:void 0,c=t[d.requestId]?t[d.requestId].getData():void 0;return new p({requestId:c,signData:r,dataType:n,chainId:o,derivationPath:i,address:a,origin:t[d.origin]?t[d.origin]:void 0})},p.fromCBOR=e=>{const t=u(e);return p.fromDataItem(t)};const{RegistryTypes:f,decodeToDataItem:g}=s.extend;var y;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature",e[e.origin=3]="origin"}(y||(y={}));class m extends s.RegistryItem{constructor(e,t,r){super(),this.getRegistryType=()=>c.ETH_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};return this.requestId&&(e[y.requestId]=new s.DataItem(this.requestId,f.UUID.getTag())),this.origin&&(e[y.origin]=this.origin),e[y.signature]=this.signature,new s.DataItem(e)},this.signature=e,this.requestId=t,this.origin=r}}m.fromDataItem=e=>{const t=e.getData(),r=t[y.signature],n=t[y.requestId]?t[y.requestId].getData():void 0;return new m(r,n,t[y.origin])},m.fromCBOR=e=>{const t=g(e);return m.fromDataItem(t)};const{decodeToDataItem:b}=s.extend;var T;!function(e){e[e.chainId=1]="chainId",e[e.contractAddress=2]="contractAddress",e[e.contractName=3]="contractName",e[e.name=4]="name",e[e.mediaData=5]="mediaData"}(T||(T={}));class w extends s.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_NFT_ITEM,this.getChainId=()=>this.chainId,this.getName=()=>this.name,this.getmediaData=()=>this.mediaData,this.getContractAddress=()=>this.contractAddress,this.getContractName=()=>this.contractName,this.toDataItem=()=>{const e={};return e[T.chainId]=this.chainId,e[T.name]=this.name,e[T.contractAddress]=this.contractAddress,e[T.contractName]=this.contractName,e[T.mediaData]=this.mediaData,new s.DataItem(e)},this.chainId=e.chainId,this.name=e.name,this.contractAddress=e.contractAddress,this.contractName=e.contractName,this.mediaData=e.mediaData}static constructETHNFTItem(e,t,r,n,s){return new w({chainId:e,contractAddress:t,contractName:r,mediaData:s,name:n})}}w.fromDataItem=e=>{const t=e.getData();return new w({chainId:t[T.chainId],name:t[T.name],contractAddress:t[T.contractAddress],contractName:t[T.contractName],mediaData:t[T.mediaData]})},w.fromCBOR=e=>{const t=b(e);return w.fromDataItem(t)};const v=(e,t)=>{const r=o.fromExtendedKey(e).derive(t),n="0x"+a.publicToAddress(r.publicKey,!0).toString("hex");return a.toChecksumAddress(n)};s.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(s).forEach((function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})})),r.ETHNFTItem=w,r.ETHSignature=m,r.EthSignRequest=p,r.findHDPathFromAddress=(e,t,r,n)=>{for(let s=0;s<r;s++){const r=v(t,"M/0/"+s);if(e.toLowerCase()==r.toLowerCase())return`${n}/0/${s}`}return null},r.generateAddressFromXpub=v}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry-eth/dist/bc-ur-registry-eth.cjs.production.min.js"}],[581,{"./bc-ur-registry-eth.cjs.development.js":579,"./bc-ur-registry-eth.cjs.production.min.js":580},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./bc-ur-registry-eth.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry-eth/dist/index.js"}],[582,{"./RegistryItem":593,"./RegistryType":594,"./lib":601},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Bytes=void 0;const n=e("./lib"),s=e("./RegistryItem"),i=e("./RegistryType");class o extends s.RegistryItem{constructor(e){super(),this.bytes=e,this.getRegistryType=()=>i.RegistryTypes.BYTES,this.getData=()=>this.bytes,this.toDataItem=()=>new n.DataItem(this.bytes)}}r.Bytes=o,o.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][Bytes][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new o(t)},o.fromCBOR=e=>{const t=(0,n.decodeToDataItem)(e);return o.fromDataItem(t)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/Bytes.js"}],[583,{".":598,"./RegistryItem":593,"./RegistryType":594,"./lib":601,buffer:2065},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoAccount=void 0;const n=e("."),s=e("./lib"),i=e("./RegistryItem"),o=e("./RegistryType");var a;!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.outputDescriptors=2]="outputDescriptors"}(a||(a={}));class c extends i.RegistryItem{constructor(e,t){super(),this.masterFingerprint=e,this.outputDescriptors=t,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_ACCOUNT,this.getMasterFingerprint=()=>this.masterFingerprint,this.getOutputDescriptors=()=>this.outputDescriptors,this.toDataItem=()=>{const e={};return this.masterFingerprint&&(e[a.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.outputDescriptors&&(e[a.outputDescriptors]=this.outputDescriptors.map((e=>e.toDataItem()))),new s.DataItem(e)}}}r.CryptoAccount=c,c.fromDataItem=e=>{const r=e.getData(),s=t.alloc(4),i=r[a.masterFingerprint];i&&s.writeUInt32BE(i,0);const o=r[a.outputDescriptors].map((e=>n.CryptoOutput.fromDataItem(e)));return new c(s,o)},c.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoAccount.js"}],[584,{"./RegistryItem":593,"./RegistryType":594,"./lib":601},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoCoinInfo=r.Network=r.Type=void 0;const n=e("./lib"),s=e("./RegistryItem"),i=e("./RegistryType");var o,a,c;!function(e){e.type="1",e.network="2"}(o||(o={})),function(e){e[e.bitcoin=0]="bitcoin"}(a=r.Type||(r.Type={})),function(e){e[e.mainnet=0]="mainnet",e[e.testnet=1]="testnet"}(c=r.Network||(r.Network={}));class u extends s.RegistryItem{constructor(e,t){super(),this.type=e,this.network=t,this.getRegistryType=()=>i.RegistryTypes.CRYPTO_COIN_INFO,this.getType=()=>this.type||a.bitcoin,this.getNetwork=()=>this.network||c.mainnet,this.toDataItem=()=>{const e={};return this.type&&(e[o.type]=this.type),this.network&&(e[o.network]=this.network),new n.DataItem(e)}}}r.CryptoCoinInfo=u,u.fromDataItem=e=>{const t=e.getData(),r=t[o.type],n=t[o.network];return new u(r,n)},u.fromCBOR=e=>{const t=(0,n.decodeToDataItem)(e);return u.fromDataItem(t)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoCoinInfo.js"}],[585,{"./RegistryItem":593,"./RegistryType":594,"./lib":601},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoECKey=void 0;const n=e("./lib"),s=e("./RegistryItem"),i=e("./RegistryType");var o;!function(e){e[e.curve=1]="curve",e[e.private=2]="private",e[e.data=3]="data"}(o||(o={}));class a extends s.RegistryItem{constructor(e){super(),this.isECKey=()=>!0,this.getCurve=()=>this.curve||0,this.isPrivateKey=()=>this.privateKey||!1,this.getData=()=>this.data,this.getRegistryType=()=>i.RegistryTypes.CRYPTO_ECKEY,this.toDataItem=()=>{const e={};return this.curve&&(e[o.curve]=this.curve),this.privateKey!==undefined&&(e[o.private]=this.privateKey),e[o.data]=this.data,new n.DataItem(e)},this.getOutputDescriptorContent=()=>this.data.toString("hex"),this.data=e.data,this.curve=e.curve,this.privateKey=e.privateKey||undefined}}r.CryptoECKey=a,a.fromDataItem=e=>{const t=e.getData(),r=t[o.curve],n=t[o.private],s=t[o.data];if(!s)throw new Error(`#[ur-registry][CryptoECKey][fn.fromDataItem]: decoded [dataItem][#data.data] is undefined: ${e}`);return new a({data:s,curve:r,privateKey:n})},a.fromCBOR=e=>{const t=(0,n.decodeToDataItem)(e);return a.fromDataItem(t)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoECKey.js"}],[586,{"./CryptoCoinInfo":584,"./CryptoKeypath":587,"./RegistryItem":593,"./RegistryType":594,"./lib":601,bs58check:2074,buffer:2065},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoHDKey=void 0;const n=e("bs58check"),s=e("./CryptoCoinInfo"),i=e("./CryptoKeypath"),o=e("./lib"),a=e("./RegistryItem"),c=e("./RegistryType");var u;!function(e){e[e.is_master=1]="is_master",e[e.is_private=2]="is_private",e[e.key_data=3]="key_data",e[e.chain_code=4]="chain_code",e[e.use_info=5]="use_info",e[e.origin=6]="origin",e[e.children=7]="children",e[e.parent_fingerprint=8]="parent_fingerprint",e[e.name=9]="name",e[e.note=10]="note"}(u||(u={}));class h extends a.RegistryItem{constructor(e){super(),this.isECKey=()=>!1,this.getKey=()=>this.key,this.getChainCode=()=>this.chainCode,this.isMaster=()=>this.master,this.isPrivateKey=()=>!!this.privateKey,this.getUseInfo=()=>this.useInfo,this.getOrigin=()=>this.origin,this.getChildren=()=>this.children,this.getParentFingerprint=()=>this.parentFingerprint,this.getName=()=>this.name,this.getNote=()=>this.note,this.getBip32Key=()=>{var e,r,s;let i,o,a=0,c=t.alloc(4).fill(0);if(this.isMaster())i=t.from("0488ADE4","hex"),o=0,a=0;else{o=(null===(e=this.getOrigin())||void 0===e?void 0:e.getComponents().length)||(null===(r=this.getOrigin())||void 0===r?void 0:r.getDepth());const n=null===(s=this.getOrigin())||void 0===s?void 0:s.getComponents(),u=n[n.length-1];u&&(a=u.isHardened()?u.getIndex()+2147483648:u.getIndex(),this.getParentFingerprint()&&(c=this.getParentFingerprint())),i=this.isPrivateKey()?t.from("0488ADE4","hex"):t.from("0488B21E","hex")}const u=t.alloc(1);u.writeUInt8(o,0);const h=t.alloc(4);h.writeUInt32BE(a,0);const d=this.getChainCode(),l=this.getKey();return(0,n.encode)(t.concat([i,u,c,h,d,l]))},this.getRegistryType=()=>c.RegistryTypes.CRYPTO_HDKEY,this.getOutputDescriptorContent=()=>{var e,t,r,n,s,i,o;let a="";return this.getOrigin()&&(null===(e=this.getOrigin())||void 0===e?void 0:e.getSourceFingerprint())&&(null===(t=this.getOrigin())||void 0===t?void 0:t.getPath())&&(a+=`${null===(n=null===(r=this.getOrigin())||void 0===r?void 0:r.getSourceFingerprint())||void 0===n?void 0:n.toString("hex")}/${null===(s=this.getOrigin())||void 0===s?void 0:s.getPath()}`),a+=this.getBip32Key(),this.getChildren()&&(null===(i=this.getChildren())||void 0===i?void 0:i.getPath())&&(a+=`/${null===(o=this.getChildren())||void 0===o?void 0:o.getPath()}`),a},this.setupMasterKey=e=>{this.master=!0,this.key=e.key,this.chainCode=e.chainCode},this.setupDeriveKey=e=>{this.master=!1,this.privateKey=e.isPrivateKey,this.key=e.key,this.chainCode=e.chainCode,this.useInfo=e.useInfo,this.origin=e.origin,this.children=e.children,this.parentFingerprint=e.parentFingerprint,this.name=e.name,this.note=e.note},this.toDataItem=()=>{const e={};if(this.master)e[u.is_master]=!0,e[u.key_data]=this.key,e[u.chain_code]=this.chainCode;else{if(this.privateKey!==undefined&&(e[u.is_private]=this.privateKey),e[u.key_data]=this.key,this.chainCode&&(e[u.chain_code]=this.chainCode),this.useInfo){const t=this.useInfo.toDataItem();t.setTag(this.useInfo.getRegistryType().getTag()),e[u.use_info]=t}if(this.origin){const t=this.origin.toDataItem();t.setTag(this.origin.getRegistryType().getTag()),e[u.origin]=t}if(this.children){const t=this.children.toDataItem();t.setTag(this.children.getRegistryType().getTag()),e[u.children]=t}this.parentFingerprint&&(e[u.parent_fingerprint]=this.parentFingerprint.readUInt32BE(0)),this.name!==undefined&&(e[u.name]=this.name),this.note!==undefined&&(e[u.note]=this.note)}return new o.DataItem(e)},e.isMaster?this.setupMasterKey(e):this.setupDeriveKey(e)}}r.CryptoHDKey=h,h.fromDataItem=e=>{const r=e.getData(),n=!!r[u.is_master],o=r[u.is_private],a=r[u.key_data],c=r[u.chain_code],d=r[u.use_info]?s.CryptoCoinInfo.fromDataItem(r[u.use_info]):undefined,l=r[u.origin]?i.CryptoKeypath.fromDataItem(r[u.origin]):undefined,p=r[u.children]?i.CryptoKeypath.fromDataItem(r[u.children]):undefined,f=r[u.parent_fingerprint];let g=undefined;f&&(g=t.alloc(4),g.writeUInt32BE(f,0));const y=r[u.name],m=r[u.note];return new h({isMaster:n,isPrivateKey:o,key:a,chainCode:c,useInfo:d,origin:l,children:p,parentFingerprint:g,name:y,note:m})},h.fromCBOR=e=>{const t=(0,o.decodeToDataItem)(e);return h.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoHDKey.js"}],[587,{"./PathComponent":592,"./RegistryItem":593,"./RegistryType":594,"./lib":601,buffer:2065},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoKeypath=void 0;const n=e("./lib"),s=e("./PathComponent"),i=e("./RegistryItem"),o=e("./RegistryType");var a;!function(e){e[e.components=1]="components",e[e.source_fingerprint=2]="source_fingerprint",e[e.depth=3]="depth"}(a||(a={}));class c extends i.RegistryItem{constructor(e=[],t,r){super(),this.components=e,this.sourceFingerprint=t,this.depth=r,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_KEYPATH,this.getPath=()=>{if(0===this.components.length)return undefined;return this.components.map((e=>`${e.isWildcard()?"*":e.getIndex()}${e.isHardened()?"'":""}`)).join("/")},this.getComponents=()=>this.components,this.getSourceFingerprint=()=>this.sourceFingerprint,this.getDepth=()=>this.depth,this.toDataItem=()=>{const e={},t=[];return this.components&&this.components.forEach((e=>{e.isWildcard()?t.push([]):t.push(e.getIndex()),t.push(e.isHardened())})),e[a.components]=t,this.sourceFingerprint&&(e[a.source_fingerprint]=this.sourceFingerprint.readUInt32BE(0)),this.depth!==undefined&&(e[a.depth]=this.depth),new n.DataItem(e)}}}r.CryptoKeypath=c,c.fromDataItem=e=>{const r=e.getData(),n=[],i=r[a.components];if(i)for(let e=0;e<i.length;e+=2){const t=i[e+1],r=i[e];"number"==typeof r?n.push(new s.PathComponent({index:r,hardened:t})):n.push(new s.PathComponent({hardened:t}))}const o=r[a.source_fingerprint];let u;o&&(u=t.alloc(4),u.writeUInt32BE(o,0));const h=r[a.depth];return new c(n,u,h)},c.fromCBOR=e=>{const t=(0,n.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoKeypath.js"}],[588,{"./CryptoECKey":585,"./CryptoHDKey":586,"./MultiKey":591,"./RegistryItem":593,"./RegistryType":594,"./ScriptExpression":595,"./lib":601},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoOutput=void 0;const n=e("./CryptoECKey"),s=e("./CryptoHDKey"),i=e("./lib"),o=e("./MultiKey"),a=e("./RegistryItem"),c=e("./RegistryType"),u=e("./ScriptExpression");class h extends a.RegistryItem{constructor(e,t){super(),this.scriptExpressions=e,this.cryptoKey=t,this.getRegistryType=()=>c.RegistryTypes.CRYPTO_OUTPUT,this.getCryptoKey=()=>this.cryptoKey,this.getHDKey=()=>this.cryptoKey instanceof s.CryptoHDKey?this.cryptoKey:undefined,this.getECKey=()=>this.cryptoKey instanceof n.CryptoECKey?this.cryptoKey:undefined,this.getMultiKey=()=>this.cryptoKey instanceof o.MultiKey?this.cryptoKey:undefined,this.getScriptExpressions=()=>this.scriptExpressions,this._toOutputDescriptor=e=>e>=this.scriptExpressions.length?this.cryptoKey.getOutputDescriptorContent():`${this.scriptExpressions[e].getExpression()}(${this._toOutputDescriptor(e+1)})`,this.toString=()=>this._toOutputDescriptor(0),this.toDataItem=()=>{let e=this.cryptoKey.toDataItem();(this.cryptoKey instanceof n.CryptoECKey||this.cryptoKey instanceof s.CryptoHDKey)&&e.setTag(this.cryptoKey.getRegistryType().getTag());return[...this.scriptExpressions].reverse().forEach((t=>{const r=t.getTag();e.getTag()===undefined?e.setTag(r):e=new i.DataItem(e,r)})),e}}}r.CryptoOutput=h,h.fromDataItem=e=>{const t=[];let r=e;for(;;){let e=r.getTag();const n=u.ScriptExpression.fromTag(e);if(!n)break;if(t.push(n),!(r.getData()instanceof i.DataItem))break;r=r.getData(),e=r.getTag()}const a=t.length;if(a>0&&(t[a-1].getExpression()===u.ScriptExpressions.MULTISIG.getExpression()||t[a-1].getExpression()===u.ScriptExpressions.SORTED_MULTISIG.getExpression())){const e=o.MultiKey.fromDataItem(r);return new h(t,e)}if(r.getTag()===c.RegistryTypes.CRYPTO_HDKEY.getTag()){const e=s.CryptoHDKey.fromDataItem(r);return new h(t,e)}{const e=n.CryptoECKey.fromDataItem(r);return new h(t,e)}},h.fromCBOR=e=>{const t=(0,i.decodeToDataItem)(e);return h.fromDataItem(t)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoOutput.js"}],[589,{"./RegistryItem":593,"./RegistryType":594,"./lib":601},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoPSBT=void 0;const n=e("./lib"),s=e("./RegistryItem"),i=e("./RegistryType");class o extends s.RegistryItem{constructor(e){super(),this.psbt=e,this.getRegistryType=()=>i.RegistryTypes.CRYPTO_PSBT,this.getPSBT=()=>this.psbt,this.toDataItem=()=>new n.DataItem(this.psbt)}}r.CryptoPSBT=o,o.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][CryptoPSBT][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new o(t)},o.fromCBOR=e=>{const t=(0,n.decodeToDataItem)(e);return o.fromDataItem(t)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoPSBT.js"}],[59,{"../util":81,"json-rpc-engine":2746},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createPendingNonceMiddleware=function({getPendingNonce:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const{method:s,params:i}=t;if("eth_getTransactionCount"!==s)return void n();const[o,a]=i;"pending"===a?r.result=await e(o):n()}))},r.createPendingTxMiddleware=function({getPendingTransactionByHash:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const{method:i,params:o}=t;if("eth_getTransactionByHash"!==i)return void n();const[a]=o,c=e(a);c?r.result=(0,s.formatTxMetaForRpcResult)(c):n()}))};var n=e("json-rpc-engine"),s=e("../util")}}},{package:"$root$",file:"app/scripts/lib/middleware/pending.js"}],[590,{"..":598,"../RegistryType":594,"../errors":596,"@ngraveio/bc-ur":1379},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.URRegistryDecoder=void 0;const n=e("@ngraveio/bc-ur"),s=e(".."),i=e("../RegistryType"),o=e("../errors");class a extends n.URDecoder{constructor(){super(...arguments),this.resultRegistryType=()=>{const e=this.resultUR();switch(e.type){case i.RegistryTypes.BYTES.getType():return s.Bytes.fromCBOR(e.cbor);case i.RegistryTypes.CRYPTO_HDKEY.getType():return s.CryptoHDKey.fromCBOR(e.cbor);case i.RegistryTypes.CRYPTO_KEYPATH.getType():return s.CryptoKeypath.fromCBOR(e.cbor);case i.RegistryTypes.CRYPTO_COIN_INFO.getType():return s.CryptoCoinInfo.fromCBOR(e.cbor);case i.RegistryTypes.CRYPTO_ECKEY.getType():return s.CryptoECKey.fromCBOR(e.cbor);case i.RegistryTypes.CRYPTO_OUTPUT.getType():return s.CryptoOutput.fromCBOR(e.cbor);case i.RegistryTypes.CRYPTO_PSBT.getType():return s.CryptoPSBT.fromCBOR(e.cbor);case i.RegistryTypes.CRYPTO_ACCOUNT.getType():return s.CryptoAccount.fromCBOR(e.cbor);default:throw new o.UnknownURTypeError(`#[ur-registry][Decoder][fn.resultRegistryType]: registry type ${e.type} is not supported now`)}}}}r.URRegistryDecoder=a}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/Decoder/index.js"}],[591,{"./CryptoECKey":585,"./CryptoHDKey":586,"./RegistryItem":593,"./RegistryType":594,"./lib/DataItem":599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MultiKey=void 0;const n=e("./CryptoECKey"),s=e("./CryptoHDKey"),i=e("./lib/DataItem"),o=e("./RegistryItem"),a=e("./RegistryType");var c;!function(e){e[e.threshold=1]="threshold",e[e.keys=2]="keys"}(c||(c={}));class u extends o.RegistryItem{constructor(e,t){super(),this.threshold=e,this.keys=t,this.getThreshold=()=>this.threshold,this.getKeys=()=>this.keys,this.toDataItem=()=>{const e={};e[c.threshold]=this.threshold;const t=this.keys.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}));return e[c.keys]=t,new i.DataItem(e)},this.getOutputDescriptorContent=()=>[this.getThreshold(),this.keys.map((e=>e.getOutputDescriptorContent())).join(",")].join(",")}}r.MultiKey=u,u.fromDataItem=e=>{const t=e.getData(),r=t[c.threshold],i=t[c.keys],o=[];return i.forEach((e=>{e.getTag()===a.RegistryTypes.CRYPTO_HDKEY.getTag()?o.push(s.CryptoHDKey.fromDataItem(e)):e.getTag()===a.RegistryTypes.CRYPTO_ECKEY.getTag()&&o.push(n.CryptoECKey.fromDataItem(e))})),new u(r,o)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/MultiKey.js"}],[592,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PathComponent=void 0;class n{constructor(e){if(this.getIndex=()=>this.index,this.isWildcard=()=>this.wildcard,this.isHardened=()=>this.hardened,this.index=e.index,this.hardened=e.hardened,this.index!==undefined?this.wildcard=!1:this.wildcard=!0,this.index&&0!=(this.index&n.HARDENED_BIT))throw new Error(`#[ur-registry][PathComponent][fn.constructor]: Invalid index ${this.index} - most significant bit cannot be set`)}}r.PathComponent=n,n.HARDENED_BIT=2147483648}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/PathComponent.js"}],[593,{"./lib":601,"@ngraveio/bc-ur":1379},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RegistryItem=void 0;const n=e("@ngraveio/bc-ur"),s=e("./lib");r.RegistryItem=class{constructor(){this.toCBOR=()=>{if(this.toDataItem()===undefined)throw new Error(`#[ur-registry][RegistryItem][fn.toCBOR]: registry ${this.getRegistryType()}'s method toDataItem returns undefined`);return(0,s.encodeDataItem)(this.toDataItem())},this.toUR=()=>new n.UR(this.toCBOR(),this.getRegistryType().getType()),this.toUREncoder=(e,t,r)=>{const s=this.toUR();return new n.UREncoder(s,e,t,r)}}}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/RegistryItem.js"}],[594,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RegistryTypes=r.RegistryType=void 0;class n{constructor(e,t){this.type=e,this.tag=t,this.getTag=()=>this.tag,this.getType=()=>this.type}}r.RegistryType=n,r.RegistryTypes={UUID:new n("uuid",37),BYTES:new n("bytes",undefined),CRYPTO_HDKEY:new n("crypto-hdkey",303),CRYPTO_KEYPATH:new n("crypto-keypath",304),CRYPTO_COIN_INFO:new n("crypto-coin-info",305),CRYPTO_ECKEY:new n("crypto-eckey",306),CRYPTO_OUTPUT:new n("crypto-output",308),CRYPTO_PSBT:new n("crypto-psbt",310),CRYPTO_ACCOUNT:new n("crypto-account",311),CRYPTO_MULTI_ACCOUNTS:new n("crypto-multi-accounts",1103)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/RegistryType.js"}],[595,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ScriptExpressions=r.ScriptExpression=void 0;class n{constructor(e,t){this.tag=e,this.expression=t,this.getTag=()=>this.tag,this.getExpression=()=>this.expression}}r.ScriptExpression=n,n.fromTag=e=>Object.values(r.ScriptExpressions).find((t=>t.getTag()===e)),r.ScriptExpressions={SCRIPT_HASH:new n(400,"sh"),WITNESS_SCRIPT_HASH:new n(401,"wsh"),PUBLIC_KEY:new n(402,"pk"),PUBLIC_KEY_HASH:new n(403,"pkh"),WITNESS_PUBLIC_KEY_HASH:new n(404,"wpkh"),COMBO:new n(405,"combo"),MULTISIG:new n(406,"multi"),SORTED_MULTISIG:new n(407,"sortedmulti"),ADDRESS:new n(307,"addr"),RAW_SCRIPT:new n(408,"raw")}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/ScriptExpression.js"}],[596,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.UnknownURTypeError=void 0;class n extends Error{constructor(e){super(e)}}r.UnknownURTypeError=n}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/errors/index.js"}],[597,{"../CryptoHDKey":586,"../RegistryItem":593,"../RegistryType":594,"../lib":601,buffer:2065},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoMultiAccounts=void 0;const n=e("../RegistryType"),s=e("../CryptoHDKey"),i=e("../RegistryItem"),o=e("../lib");var a;!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.keys=2]="keys",e[e.device=3]="device"}(a||(a={}));class c extends i.RegistryItem{constructor(e,t,r){super(),this.masterFingerprint=e,this.keys=t,this.device=r,this.getRegistryType=()=>n.RegistryTypes.CRYPTO_MULTI_ACCOUNTS,this.getMasterFingerprint=()=>this.masterFingerprint,this.getKeys=()=>this.keys,this.getDevice=()=>this.device,this.toDataItem=()=>{const e={};return this.masterFingerprint&&(e[a.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.keys&&(e[a.keys]=this.keys.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}))),this.device&&(e[a.device]=this.device),new o.DataItem(e)}}}r.CryptoMultiAccounts=c,c.fromDataItem=e=>{const r=e.getData(),n=t.alloc(4),i=r[a.masterFingerprint];i&&n.writeUInt32BE(i,0);const o=r[a.keys].map((e=>s.CryptoHDKey.fromDataItem(e))),u=r[a.device];return new c(n,o,u)},c.fromCBOR=e=>{const t=(0,o.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/extended/CryptoMultiAccounts.js"}],[598,{"./Bytes":582,"./CryptoAccount":583,"./CryptoCoinInfo":584,"./CryptoECKey":585,"./CryptoHDKey":586,"./CryptoKeypath":587,"./CryptoOutput":588,"./CryptoPSBT":589,"./Decoder":590,"./MultiKey":591,"./PathComponent":592,"./RegistryItem":593,"./RegistryType":594,"./ScriptExpression":595,"./errors":596,"./extended/CryptoMultiAccounts":597,"./lib":601,"./patchCBOR":602,"./types":603,"./utils":604,"buffer/":2076,tslib:3344},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Buffer=r.extend=r.PathComponent=r.ScriptExpressions=r.MultiKey=r.CryptoPSBT=r.CryptoOutput=r.CryptoECKey=r.CryptoCoinInfoNetwork=r.CryptoCoinInfoType=r.CryptoCoinInfo=r.CryptoKeypath=r.CryptoMultiAccounts=r.CryptoHDKey=r.CryptoAccount=r.Bytes=r.URRegistryDecoder=r.DataItem=void 0;const n=e("tslib");e("./patchCBOR");const s=e("buffer/");Object.defineProperty(r,"Buffer",{enumerable:!0,get:function(){return s.Buffer}});const i=e("./CryptoHDKey");Object.defineProperty(r,"CryptoHDKey",{enumerable:!0,get:function(){return i.CryptoHDKey}});const o=e("./CryptoKeypath");Object.defineProperty(r,"CryptoKeypath",{enumerable:!0,get:function(){return o.CryptoKeypath}});const a=e("./CryptoCoinInfo");Object.defineProperty(r,"CryptoCoinInfo",{enumerable:!0,get:function(){return a.CryptoCoinInfo}}),Object.defineProperty(r,"CryptoCoinInfoType",{enumerable:!0,get:function(){return a.Type}}),Object.defineProperty(r,"CryptoCoinInfoNetwork",{enumerable:!0,get:function(){return a.Network}});const c=e("./CryptoECKey");Object.defineProperty(r,"CryptoECKey",{enumerable:!0,get:function(){return c.CryptoECKey}});const u=e("./Bytes");Object.defineProperty(r,"Bytes",{enumerable:!0,get:function(){return u.Bytes}});const h=e("./CryptoOutput");Object.defineProperty(r,"CryptoOutput",{enumerable:!0,get:function(){return h.CryptoOutput}});const d=e("./CryptoPSBT");Object.defineProperty(r,"CryptoPSBT",{enumerable:!0,get:function(){return d.CryptoPSBT}});const l=e("./CryptoAccount");Object.defineProperty(r,"CryptoAccount",{enumerable:!0,get:function(){return l.CryptoAccount}});const p=e("./Decoder");Object.defineProperty(r,"URRegistryDecoder",{enumerable:!0,get:function(){return p.URRegistryDecoder}});const f=e("./MultiKey");Object.defineProperty(r,"MultiKey",{enumerable:!0,get:function(){return f.MultiKey}});const g=e("./ScriptExpression");Object.defineProperty(r,"ScriptExpressions",{enumerable:!0,get:function(){return g.ScriptExpressions}});const y=e("./PathComponent");Object.defineProperty(r,"PathComponent",{enumerable:!0,get:function(){return y.PathComponent}});const m=e("./RegistryItem"),b=e("./RegistryType"),T=e("./lib");var w=e("./lib");Object.defineProperty(r,"DataItem",{enumerable:!0,get:function(){return w.DataItem}});const v=e("./utils"),k=e("./extended/CryptoMultiAccounts");Object.defineProperty(r,"CryptoMultiAccounts",{enumerable:!0,get:function(){return k.CryptoMultiAccounts}});const _={URRegistryDecoder:p.URRegistryDecoder,Bytes:u.Bytes,CryptoAccount:l.CryptoAccount,CryptoHDKey:i.CryptoHDKey,CryptoMultiAccounts:k.CryptoMultiAccounts,CryptoKeypath:o.CryptoKeypath,CryptoCoinInfo:a.CryptoCoinInfo,CryptoCoinInfoType:a.Type,CryptoCoinInfoNetwork:a.Network,CryptoECKey:c.CryptoECKey,CryptoOutput:h.CryptoOutput,CryptoPSBT:d.CryptoPSBT,MultiKey:f.MultiKey,ScriptExpressions:g.ScriptExpressions,PathComponent:y.PathComponent},S={addReader:T.addReader,addSemanticDecode:T.addSemanticDecode,addSemanticEncode:T.addSemanticEncode,addWriter:T.addWriter,patchTags:v.patchTags},E={RegistryTypes:b.RegistryTypes,RegistryItem:m.RegistryItem,RegistryType:b.RegistryType,decodeToDataItem:T.decodeToDataItem,encodeDataItem:T.encodeDataItem,cbor:S};r.extend=E,(0,n.__exportStar)(e("./errors"),r),(0,n.__exportStar)(e("./Decoder"),r),(0,n.__exportStar)(e("./lib"),r),(0,n.__exportStar)(e("./CryptoAccount"),r),(0,n.__exportStar)(e("./CryptoPSBT"),r),(0,n.__exportStar)(e("./CryptoHDKey"),r),(0,n.__exportStar)(e("./extended/CryptoMultiAccounts"),r),(0,n.__exportStar)(e("./CryptoOutput"),r),(0,n.__exportStar)(e("./CryptoCoinInfo"),r),(0,n.__exportStar)(e("./CryptoECKey"),r),(0,n.__exportStar)(e("./MultiKey"),r),(0,n.__exportStar)(e("./CryptoKeypath"),r),(0,n.__exportStar)(e("./patchCBOR"),r),(0,n.__exportStar)(e("./PathComponent"),r),(0,n.__exportStar)(e("./RegistryItem"),r),(0,n.__exportStar)(e("./RegistryType"),r),(0,n.__exportStar)(e("./types"),r),(0,n.__exportStar)(e("./utils"),r),r.default=_}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/index.js"}],[599,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DataItem=void 0;r.DataItem=class{constructor(e,t){this.setTag=e=>{this.tag=e},this.clearTag=()=>{this.tag=undefined},this.getTag=()=>this.tag,this.getData=()=>this.data,this.data=e,this.tag=t}}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/lib/DataItem.js"}],[6,{"../../../shared/constants/alerts":3408,"@metamask/obs-store":1301},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/obs-store"),s=e("../../../shared/constants/alerts");const i={alertEnabledness:s.TOGGLEABLE_ALERT_TYPES.reduce(((e,t)=>(e[t]=!0,e)),{}),unconnectedAccountAlertShownOrigins:{},web3ShimUsageOrigins:{}};r.default=class{constructor(e={}){const{initState:t={},preferencesStore:r}=e,s={...i,alertEnabledness:{...i.alertEnabledness,...t.alertEnabledness}};this.store=new n.ObservableStore(s),this.selectedAddress=r.getState().selectedAddress,r.subscribe((({selectedAddress:e})=>{this.store.getState().unconnectedAccountAlertShownOrigins&&this.selectedAddress!==e&&(this.selectedAddress=e,this.store.updateState({unconnectedAccountAlertShownOrigins:{}}))}))}setAlertEnabledness(e,t){let{alertEnabledness:r}=this.store.getState();r={...r},r[e]=t,this.store.updateState({alertEnabledness:r})}setUnconnectedAccountAlertShown(e){let{unconnectedAccountAlertShownOrigins:t}=this.store.getState();t={...t},t[e]=!0,this.store.updateState({unconnectedAccountAlertShownOrigins:t})}getWeb3ShimUsageState(e){return this.store.getState().web3ShimUsageOrigins[e]}setWeb3ShimUsageRecorded(e){this._setWeb3ShimUsageState(e,s.Web3ShimUsageAlertStates.recorded)}setWeb3ShimUsageAlertDismissed(e){this._setWeb3ShimUsageState(e,s.Web3ShimUsageAlertStates.dismissed)}_setWeb3ShimUsageState(e,t){let{web3ShimUsageOrigins:r}=this.store.getState();r={...r},r[e]=t,this.store.updateState({web3ShimUsageOrigins:r})}}}}},{package:"$root$",file:"app/scripts/controllers/alert.js"}],[60,{events:2066},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("events"))&&n.__esModule?n:{default:n};class i extends s.default{constructor(e={}){super();const t=e.migrations||[];this.migrations=t.sort(((e,t)=>e.version-t.version));const r=this.migrations.slice(-1)[0];this.defaultVersion=e.defaultVersion||r&&r.version||0}async migrateData(e=this.generateInitialState()){const t=this.migrations.filter((function(t){return t.version>e.meta.version}));for(const r of t)try{const t=await r.migrate(e);if(!t.data)throw new Error("Migrator - migration returned empty data");if(t.version!==undefined&&t.meta.version!==r.version)throw new Error("Migrator - Migration did not update version number correctly");e=t}catch(t){const n=t.message;return t.message=`MetaMask Migration Error #${r.version}: ${n}`,this.emit("error",t),e}return e}generateInitialState(e){return{meta:{version:this.defaultVersion},data:e}}}r.default=i}}},{package:"$root$",file:"app/scripts/lib/migrator/index.js"}],[600,{"./DataItem":599,buffer:2065},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){!function(e,r){"function"==typeof define&&define.amd?define([],r):void 0!==t&&t.exports?t.exports=r():e.CBOR=r()}(this,(function(){const{DataItem:t}=e("./DataItem");var n=function(){function e(e){this.$hex=e}e.prototype={length:function(){return this.$hex.length/2},toString:function(e){if(!e||"hex"===e||16===e)return this.$hex;if("utf-8"===e){for(var t="",r=0;r<this.$hex.length;r+=2)t+="%"+this.$hex.substring(r,r+2);return decodeURIComponent(t)}if("latin"===e){for(t=[],r=0;r<this.$hex.length;r+=2)t.push(parseInt(this.$hex.substring(r,r+2),16));return String.fromCharCode.apply(String,t)}throw new Error("Unrecognised format: "+e)}},e.fromLatinString=function(t){for(var r="",n=0;n<t.length;n++){var s=t.charCodeAt(n).toString(16);1===s.length&&(s="0"+s),r+=s}return new e(r)},e.fromUtf8String=function(t){for(var r=encodeURIComponent(t),n="",s=0;s<r.length;s++)if("%"===r.charAt(s))n+=r.substring(s+1,s+3),s+=2;else{var i=r.charCodeAt(s).toString(16);i.length<2&&(i="0"+i),n+=i}return new e(n)};var n=[],s={},i=function(e){return function(){throw new Error(e+" not implemented")}};function o(){}function a(){}function c(e,t){var r=e.value;return r<24?r:24==r?t.readByte():25==r?t.readUint16():26==r?t.readUint32():27==r?t.readUint64():31==r?null:void i("Additional info: "+r)()}function u(e,t,r){var n=e<<5;t<24?r.writeByte(n|t):t<256?(r.writeByte(24|n),r.writeByte(t)):t<65536?(r.writeByte(25|n),r.writeUint16(t)):t<4294967296?(r.writeByte(26|n),r.writeUint32(t)):(r.writeByte(27|n),r.writeUint64(t))}o.prototype={peekByte:i("peekByte"),readByte:i("readByte"),readChunk:i("readChunk"),readFloat16:function(){var e=this.readUint16(),t=(32767&e)>>10,r=1023&e,n=32768&e;if(31===t)return 0===r?n?-Infinity:Infinity:NaN;var s=t?Math.pow(2,t-25)*(1024+r):Math.pow(2,-24)*r;return n?-s:s},readFloat32:function(){var e=this.readUint32(),t=(2147483647&e)>>23,r=8388607&e,n=2147483648&e;if(255===t)return 0===r?n?-Infinity:Infinity:NaN;var s=t?Math.pow(2,t-23-127)*(8388608+r):Math.pow(2,-149)*r;return n?-s:s},readFloat64:function(){var e=this.readUint32(),t=e>>20&2047,r=4294967296*(1048575&e)+this.readUint32(),n=2147483648&e;if(2047===t)return 0===r?n?-Infinity:Infinity:NaN;var s=t?Math.pow(2,t-52-1023)*(4503599627370496+r):Math.pow(2,-1074)*r;return n?-s:s},readUint16:function(){return 256*this.readByte()+this.readByte()},readUint32:function(){return 65536*this.readUint16()+this.readUint16()},readUint64:function(){return 4294967296*this.readUint32()+this.readUint32()}},a.prototype={writeByte:i("writeByte"),result:i("result"),writeFloat16:i("writeFloat16"),writeFloat32:i("writeFloat32"),writeFloat64:i("writeFloat64"),writeUint16:function(e){this.writeByte(e>>8&255),this.writeByte(255&e)},writeUint32:function(e){this.writeUint16(e>>16&65535),this.writeUint16(65535&e)},writeUint64:function(e){if(e>=9007199254740992||e<=-9007199254740992)throw new Error("Cannot encode Uint64 of: "+e+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(e/4294967296)),this.writeUint32(e%4294967296)},writeString:i("writeString"),canWriteBinary:function(e){return!1},writeBinary:i("writeChunk")};var h=new Error;function d(e){var t=function(e){var t=e.readByte();return{type:t>>5,value:31&t}}(e);switch(t.type){case 0:return c(t,e);case 1:return-1-c(t,e);case 2:return e.readChunk(c(t,e));case 3:return e.readChunk(c(t,e)).toString("utf-8");case 4:case 5:var r=c(t,e),n=[];if(null!==r){5===t.type&&(r*=2);for(var i=0;i<r;i++)n[i]=d(e)}else for(var o;(o=d(e))!==h;)n.push(o);if(5===t.type){var a={};for(i=0;i<n.length;i+=2)a[n[i]]=n[i+1];return a}return n;case 6:var u=c(t,e),l=s[u];n=d(e);return l?l(n):n;case 7:if(25===t.value)return e.readFloat16();if(26===t.value)return e.readFloat32();if(27===t.value)return e.readFloat64();switch(c(t,e)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return undefined;case null:return h;default:throw new Error("Unknown fixed value: "+t.value)}default:throw new Error("Unsupported header: "+JSON.stringify(t))}throw new Error("not implemented yet")}function l(e,t){for(var r=0;r<n.length;r++){var s=n[r].fn(e);if(s!==undefined)return u(6,n[r].tag,t),l(s,t)}if(e&&"function"==typeof e.toCBOR&&(e=e.toCBOR()),!1===e)u(7,20,t);else if(!0===e)u(7,21,t);else if(null===e)u(7,22,t);else if(e===undefined)u(7,23,t);else if("number"==typeof e)Math.floor(e)===e&&e<9007199254740992&&e>-9007199254740992?e<0?u(1,-1-e,t):u(0,e,t):(!function(e,t,r){r.writeByte(e<<5|t)}(7,27,t),t.writeFloat64(e));else if("string"==typeof e)t.writeString(e,(function(e){u(3,e,t)}));else if(t.canWriteBinary(e))t.writeBinary(e,(function(e){u(2,e,t)}));else{if("object"!=typeof e)throw new Error("CBOR encoding not supported: "+e);if(g.config.useToJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),Array.isArray(e)){u(4,e.length,t);for(r=0;r<e.length;r++)l(e[r],t)}else{var i=Object.keys(e);u(5,i.length,t);for(r=0;r<i.length;r++){const n=parseInt(i[r]);isNaN(n)?(l(i[r],t),l(e[i[r]],t)):(l(n,t),l(e[i[r]],t))}}}}var p=[],f=[],g={config:{useToJSON:!0},addWriter:function(e,t){"string"==typeof e?f.push((function(r){if(e===r)return t(r)})):f.push(e)},addReader:function(e,t){"string"==typeof e?p.push((function(r,n){if(e===n)return t(r,n)})):p.push(e)},encode:function(e,t){for(var r=0;r<f.length;r++){var n=(0,f[r])(t);if(n)return l(e,n),n.result()}throw new Error("Unsupported output format: "+t)},encodeDataItem:function(e,t){for(var r=0;r<f.length;r++){var n=(0,f[r])(t);if(n)return e.getTag()!==undefined?(l(e,n),n.result()):(l(e.getData(),n),n.result())}throw new Error("Unsupported output format: "+t)},decode:function(e,t){for(var r=0;r<p.length;r++){var n=(0,p[r])(e,t);if(n)return d(n)}throw new Error("Unsupported input format: "+t)},decodeToDataItem:function(e,r){for(var n=0;n<p.length;n++){var s=(0,p[n])(e,r);if(s){const e=d(s);return e instanceof t?e:new t(e)}}throw new Error("Unsupported input format: "+r)},addSemanticEncode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return n.push({tag:e,fn:t}),this},addSemanticDecode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return s[e]=t,this}};function y(e){this.buffer=e,this.pos=0}function m(e){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=r.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=e}function b(e){this.hex=e,this.pos=0}function T(e){this.$hex="",this.finalFormat=e||"hex"}return y.prototype=Object.create(o.prototype),y.prototype.peekByte=function(){return this.buffer[this.pos]},y.prototype.readByte=function(){return this.buffer[this.pos++]},y.prototype.readUint16=function(){var e=this.buffer.readUInt16BE(this.pos);return this.pos+=2,e},y.prototype.readUint32=function(){var e=this.buffer.readUInt32BE(this.pos);return this.pos+=4,e},y.prototype.readFloat32=function(){var e=this.buffer.readFloatBE(this.pos);return this.pos+=4,e},y.prototype.readFloat64=function(){var e=this.buffer.readDoubleBE(this.pos);return this.pos+=8,e},y.prototype.readChunk=function(e){var t=r.alloc(e);return this.buffer.copy(t,0,this.pos,this.pos+=e),t},m.prototype=Object.create(a.prototype),m.prototype.writeByte=function(e){this.latestBuffer[this.latestBufferOffset++]=e,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=r.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},m.prototype.writeFloat32=function(e){var t=r.alloc(4);t.writeFloatBE(e,0),this.writeBuffer(t)},m.prototype.writeFloat64=function(e){var t=r.alloc(8);t.writeDoubleBE(e,0),this.writeBuffer(t)},m.prototype.writeString=function(e,t){var n=r.from(e,"utf-8");t(n.length),this.writeBuffer(n)},m.prototype.canWriteBinary=function(e){return e instanceof r},m.prototype.writeBinary=function(e,t){t(e.length),this.writeBuffer(e)},m.prototype.writeBuffer=function(e){if(!(e instanceof r))throw new TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=e.length?(e.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=e.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=r.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(e),this.latestBuffer=r.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(e),this.byteLength+=e.length},m.prototype.result=function(){for(var e=r.alloc(this.byteLength),t=0,n=0;n<this.completeBuffers.length;n++){var s=this.completeBuffers[n];s.copy(e,t,0,s.length),t+=s.length}return this.latestBufferOffset&&this.latestBuffer.copy(e,t,0,this.latestBufferOffset),this.stringFormat?e.toString(this.stringFormat):e},"function"==typeof r&&(g.addReader((function(e,t){return r.isBuffer(e)?new y(e):"hex"===t||"base64"===t?new y(r.from(e,t)):void 0})),g.addWriter((function(e){return e&&"buffer"!==e?"hex"===e||"base64"===e?new m(e):void 0:new m}))),b.prototype=Object.create(o.prototype),b.prototype.peekByte=function(){var e=this.hex.substring(this.pos,2);return parseInt(e,16)},b.prototype.readByte=function(){var e=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(e,16)},b.prototype.readChunk=function(t){var n=this.hex.substring(this.pos,this.pos+2*t);return this.pos+=2*t,"function"==typeof r?r.from(n,"hex"):new e(n)},T.prototype=Object.create(a.prototype),T.prototype.writeByte=function(e){if(e<0||e>255)throw new Error("Byte value out of range: "+e);var t=e.toString(16);1==t.length&&(t="0"+t),this.$hex+=t},T.prototype.canWriteBinary=function(t){return t instanceof e||"function"==typeof r&&t instanceof r},T.prototype.writeBinary=function(t,n){if(t instanceof e)n(t.length()),this.$hex+=t.$hex;else{if(!("function"==typeof r&&t instanceof r))throw new TypeError("HexWriter only accepts BinaryHex or Buffers");n(t.length),this.$hex+=t.toString("hex")}},T.prototype.result=function(){return"buffer"===this.finalFormat&&"function"==typeof r?r.from(this.$hex,"hex"):new e(this.$hex).toString(this.finalFormat)},T.prototype.writeString=function(t,r){var n=e.fromUtf8String(t);r(n.length()),this.$hex+=n.$hex},g.addReader((function(t,r){return t instanceof e||t.$hex?new b(t.$hex):"hex"===r?new b(t):void 0})),g.addWriter((function(e){if("hex"===e)return new T})),g}();return n.addSemanticEncode(0,(function(e){if(e instanceof Date)return e.toISOString()})).addSemanticDecode(0,(function(e){return new Date(e)})).addSemanticDecode(1,(function(e){return new Date(e)})),n}))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/lib/cbor-sync.js"}],[601,{"./DataItem":599,"./cbor-sync":600},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DataItem=r.addWriter=r.addReader=r.addSemanticEncode=r.addSemanticDecode=r.decodeToDataItem=r.encodeDataItem=void 0;var n=e("./cbor-sync");Object.defineProperty(r,"encodeDataItem",{enumerable:!0,get:function(){return n.encodeDataItem}}),Object.defineProperty(r,"decodeToDataItem",{enumerable:!0,get:function(){return n.decodeToDataItem}}),Object.defineProperty(r,"addSemanticDecode",{enumerable:!0,get:function(){return n.addSemanticDecode}}),Object.defineProperty(r,"addSemanticEncode",{enumerable:!0,get:function(){return n.addSemanticEncode}}),Object.defineProperty(r,"addReader",{enumerable:!0,get:function(){return n.addReader}}),Object.defineProperty(r,"addWriter",{enumerable:!0,get:function(){return n.addWriter}});var s=e("./DataItem");Object.defineProperty(r,"DataItem",{enumerable:!0,get:function(){return s.DataItem}})}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/lib/index.js"}],[602,{"./RegistryType":594,"./ScriptExpression":595,"./utils":604},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});const n=e("./utils"),s=e("./RegistryType"),i=e("./ScriptExpression"),o=Object.values(s.RegistryTypes).filter((e=>!!e.getTag())).map((e=>e.getTag())),a=Object.values(i.ScriptExpressions).map((e=>e.getTag()));(0,n.patchTags)(o.concat(a))}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/patchCBOR.js"}],[603,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/types.js"}],[604,{"./lib":601},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.patchTags=void 0;const n=e("./lib"),s=[];r.patchTags=e=>{e.forEach((e=>{s.find((t=>t===e))||((0,n.addSemanticEncode)(e,(t=>{if(t instanceof n.DataItem&&t.getTag()===e)return t.getData()})),(0,n.addSemanticDecode)(e,(t=>new n.DataItem(t,e))),s.push(e))}))}}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@keystonehq/bc-ur-registry/dist/utils.js"}],[605,{"./ObservableStore":607},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ComposedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const r=t=>{const r=this.getState();r[e]=t,this.putState(r)};t.subscribe(r),r(t.getState())}}r.ComposedStore=s}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/ComposedStore.js"}],[606,{"./ObservableStore":607},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MergedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}r.MergedStore=s}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/MergedStore.js"}],[607,{"@metamask/safe-event-emitter":1320},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ObservableStore=void 0;const s=n(e("@metamask/safe-event-emitter"));class i extends s.default{constructor(e){super(),this._state=e||{}}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}r.ObservableStore=i}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/ObservableStore.js"}],[608,{stream:2068},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeAsStream=void 0;const n=e("stream");class s extends n.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const r=super.pipe(e,t);return e.write(this.obsStore.getState()),r}_write(e,t,r){this.obsStore.putState(e),r()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}r.storeAsStream=function(e){return new s(e)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/asStream.js"}],[609,{"./ComposedStore":605,"./MergedStore":606,"./ObservableStore":607,"./asStream":608,"./transform":610},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./asStream"),r),s(e("./ComposedStore"),r),s(e("./MergedStore"),r),s(e("./ObservableStore"),r),s(e("./transform"),r)}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/index.js"}],[61,{"../../../shared/modules/fetch-with-timeout":3442,loglevel:2966},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e("loglevel"));function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o=(0,s(e("../../../shared/modules/fetch-with-timeout")).default)();r.default=class{constructor(){i(this,"isSupported",!0),this._initialized=!1,this._initializing=this._init(),this._state=undefined}async _init(){try{const e=await o("http://localhost:12345/state.json");e.ok&&(this._state=await e.json())}catch(e){n.default.debug(`Error loading network state: '${e.message}'`)}finally{this._initialized=!0}}async get(){return this._initialized||await this._initializing,this._state}setMetadata(e){this.metadata=e}async set(e){if(!this.isSupported)throw new Error("Metamask- cannot persist state to local store as this browser does not support this action");if(!e)throw new Error("MetaMask - updated state is missing");if(!this.metadata)throw new Error('MetaMask - metadata must be set on instance of ExtensionStore before calling "set"');this._initialized||await this._initializing,this._state={data:e,meta:this._metadata}}}}}},{package:"$root$",file:"app/scripts/lib/network-store.js"}],[610,{through2:611},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeTransformStream=void 0;const n=e("through2");r.storeTransformStream=function(e){return n.obj(((t,r,n)=>{try{return n(null,e(t)),undefined}catch(e){return n(e),undefined}}))}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/transform.js"}],[611,{_process:3050,"readable-stream":3243,util:2071,xtend:3397},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("readable-stream").Transform,s=e("util").inherits,i=e("xtend");function o(e){n.call(this,e),this._destroyed=!1}function a(e,t,r){r(null,e)}function c(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=a),"function"!=typeof n&&(n=null),e(t,r,n)}}s(o,n),o.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;r.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},t.exports=c((function(e,t,r){var n=new o(e);return n._transform=t,r&&(n._flush=r),n})),t.exports.ctor=c((function(e,t,r){function n(t){if(!(this instanceof n))return new n(t);this.options=i(e,t),o.call(this,this.options)}return s(n,o),n.prototype._transform=t,r&&(n.prototype._flush=r),n})),t.exports.obj=c((function(e,t,r){var n=new o(i({objectMode:!0,highWaterMark:16},e));return n._transform=t,r&&(n._flush=r),n}))}).call(this)}).call(this,e("_process"))}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/through2/through2.js"}],[62,{"../platforms/extension":170,"@metamask/safe-event-emitter":1320},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.NOTIFICATION_MANAGER_EVENTS=void 0;var n=i(e("@metamask/safe-event-emitter")),s=i(e("../platforms/extension"));function i(e){return e&&e.__esModule?e:{default:e}}const o={POPUP_CLOSED:"onPopupClosed"};r.NOTIFICATION_MANAGER_EVENTS=o;class a extends n.default{constructor(){super(),this.platform=new s.default,this.platform.addOnRemovedListener(this._onWindowClosed.bind(this))}markAsAutomaticallyClosed(){this._popupAutomaticallyClosed=!0}async showPopup(e,t){this._popupId=t,this._setCurrentPopupId=e;const r=await this._getPopup(t);if(r)await this.platform.focusWindow(r.id);else{let e=0,t=0;try{const r=await this.platform.getLastFocusedWindow();t=r.top,e=r.left+(r.width-360)}catch(r){const{screenX:n,screenY:s,outerWidth:i}=window;t=Math.max(s,0),e=Math.max(n+(i-360),0)}const r=await this.platform.openWindow({url:"notification.html",type:"popup",width:360,height:620,left:e,top:t});r.left!==e&&"fullscreen"!==r.state&&await this.platform.updateWindowPosition(r.id,e,t),this._setCurrentPopupId(r.id),this._popupId=r.id}}_onWindowClosed(e){e===this._popupId&&(this._setCurrentPopupId(undefined),this._popupId=undefined,this.emit(o.POPUP_CLOSED,{automaticallyClosed:this._popupAutomaticallyClosed}),this._popupAutomaticallyClosed=undefined)}async _getPopup(){const e=await this.platform.getAllWindows();return this._getPopupIn(e)}_getPopupIn(e){return e?e.find((e=>e&&"popup"===e.type&&e.id===this._popupId)):null}}r.default=a}}},{package:"$root$",file:"app/scripts/lib/notification-manager.js"}],[63,{"../../../../shared/constants/network":3417,"./handlers":67,"@metamask/permission-controller":1308,"@metamask/rpc-methods/dist/utils":1319,"eth-rpc-errors":2286,lodash:2954},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createMethodMiddleware=function(e){const t=d.filter((t=>!Object.hasOwnProperty.call(e,t)));if(t.length>0)throw new Error(`Missing expected hooks:\n\n${t.join("\n")}\n`);return async function(t,r,n,s){if(c.UNSUPPORTED_RPC_METHODS.has(t.method))return s(o.ethErrors.rpc.methodNotSupported());const a=h.get(t.method);if(a){const{implementation:o,hookNames:c}=a;try{return await o(t,r,n,s,(0,i.selectHooks)(e,c))}catch(e){return console.error(e),s(e)}}return n()}};var n,s=e("@metamask/permission-controller"),i=e("@metamask/rpc-methods/dist/utils"),o=e("eth-rpc-errors"),a=e("lodash"),c=e("../../../../shared/constants/network");const u=[...((n=e("./handlers"))&&n.__esModule?n:{default:n}).default,...s.permissionRpcMethods.handlers],h=u.reduce(((e,t)=>{for(const r of t.methodNames)e.set(r,t);return e}),new Map),d=Array.from(new Set((0,a.flatten)(u.map((({hookNames:e})=>Object.keys(e))))).values())}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/createMethodMiddleware.js"}],[64,{"../../../../../shared/constants/app":3409,"../../../../../shared/constants/metametrics":3416,"../../../../../shared/modules/network.utils":3446,"eth-rpc-errors":2286,lodash:2954,"valid-url":3374},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("eth-rpc-errors"),i=(n=e("valid-url"))&&n.__esModule?n:{default:n},o=e("lodash"),a=e("../../../../../shared/constants/app"),c=e("../../../../../shared/modules/network.utils"),u=e("../../../../../shared/constants/metametrics");var h={methodNames:[a.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN],implementation:async function(e,t,r,n,{upsertNetworkConfiguration:h,getCurrentChainId:d,getCurrentRpcUrl:l,findNetworkConfigurationBy:p,setActiveNetwork:f,requestUserApproval:g}){var y;if(null===(y=e.params)||void 0===y||!y[0]||"object"!=typeof e.params[0])return n(s.ethErrors.rpc.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e.params)}`}));const{origin:m}=e,{chainId:b,chainName:T=null,blockExplorerUrls:w=null,nativeCurrency:v=null,rpcUrls:k}=e.params[0],_=Object.keys((0,o.omit)(e.params[0],["chainId","chainName","blockExplorerUrls","iconUrls","rpcUrls","nativeCurrency"]));if(_.length>0)return n(s.ethErrors.rpc.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${_}`}));const S=e=>{try{const t=new URL(e);return"localhost"===t.hostname||"127.0.0.1"===t.hostname}catch(e){return!1}},E=Array.isArray(k)?k.find((e=>S(e)||i.default.isHttpsUri(e))):null,x=null!==w&&Array.isArray(w)?w.find((e=>S(e)||i.default.isHttpsUri(e))):null;if(!E)return n(s.ethErrors.rpc.invalidParams({message:`Expected an array with at least one valid string HTTPS url 'rpcUrls', Received:\n${k}`}));if(null!==w&&!x)return n(s.ethErrors.rpc.invalidParams({message:`Expected null or array with at least one valid string HTTPS URL 'blockExplorerUrl'. Received: ${w}`}));const I="string"==typeof b&&b.toLowerCase();if(!(0,c.isPrefixedFormattedHexString)(I))return n(s.ethErrors.rpc.invalidParams({message:`Expected 0x-prefixed, unpadded, non-zero hexadecimal string 'chainId'. Received:\n${b}`}));if(!(0,c.isSafeChainId)(parseInt(I,16)))return n(s.ethErrors.rpc.invalidParams({message:`Invalid chain ID "${I}": numerical value greater than max safe value. Received:\n${b}`}));const P=p({chainId:I});if(P&&P.rpcUrl===E){t.result=null;const e=d(),r=l();if(e===I&&r===E)return n();try{await g({origin:m,type:a.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN,requestData:{rpcUrl:P.rpcUrl,chainId:P.chainId,nickname:P.nickname,ticker:P.ticker}}),await f(P.id),t.result=null}catch(e){if(e.code!==s.errorCodes.provider.userRejectedRequest)return n(e)}return n()}if("string"!=typeof T||!T)return n(s.ethErrors.rpc.invalidParams({message:`Expected non-empty string 'chainName'. Received:\n${T}`}));const A=T.length>100?T.substring(0,100):T;if(null!==v){if("object"!=typeof v||Array.isArray(v))return n(s.ethErrors.rpc.invalidParams({message:`Expected null or object 'nativeCurrency'. Received:\n${v}`}));if(18!==v.decimals)return n(s.ethErrors.rpc.invalidParams({message:`Expected the number 18 for 'nativeCurrency.decimals' when 'nativeCurrency' is provided. Received: ${v.decimals}`}));if(!v.symbol||"string"!=typeof v.symbol)return n(s.ethErrors.rpc.invalidParams({message:`Expected a string 'nativeCurrency.symbol'. Received: ${v.symbol}`}))}const C=(null==v?void 0:v.symbol)||a.UNKNOWN_TICKER_SYMBOL;if(C!==a.UNKNOWN_TICKER_SYMBOL&&("string"!=typeof C||C.length<2||C.length>6))return n(s.ethErrors.rpc.invalidParams({message:`Expected 2-6 character string 'nativeCurrency.symbol'. Received:\n${C}`}));if(P&&P.chainId===I&&P.ticker!==C)return n(s.ethErrors.rpc.invalidParams({message:`nativeCurrency.symbol does not match currency symbol for a network the user already has added with the same chainId. Received:\n${C}`}));let O;try{await g({origin:m,type:a.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN,requestData:{chainId:I,rpcPrefs:{blockExplorerUrl:x},chainName:A,rpcUrl:E,ticker:C}}),O=await h({chainId:I,rpcPrefs:{blockExplorerUrl:x},nickname:A,rpcUrl:E,ticker:C},{source:u.MetaMetricsNetworkEventSource.Dapp,referrer:m}),t.result=null}catch(e){return n(e)}try{await g({origin:m,type:a.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN,requestData:{rpcUrl:E,chainId:I,nickname:A,ticker:C,networkConfigurationId:O}}),await f(O)}catch(e){if(e.code!==s.errorCodes.provider.userRejectedRequest)return n(e)}return n()},hookNames:{upsertNetworkConfiguration:!0,getCurrentChainId:!0,getCurrentRpcUrl:!0,findNetworkConfigurationBy:!0,setActiveNetwork:!0,requestUserApproval:!0}};r.default=h}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/add-ethereum-chain.js"}],[65,{"../../../../../shared/constants/app":3409},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.ETH_ACCOUNTS],implementation:async function(e,t,r,n,{getAccounts:s}){return t.result=await s(),n()},hookNames:{getAccounts:!0}};r.default=n}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/eth-accounts.js"}],[66,{"../../../../../shared/constants/app":3409},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.GET_PROVIDER_STATE],implementation:async function(e,t,r,n,{getProviderState:s}){return t.result={...await s(e.origin)},n()},hookNames:{getProviderState:!0}};r.default=n}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/get-provider-state.js"}],[67,{"./add-ethereum-chain":64,"./eth-accounts":65,"./get-provider-state":66,"./log-web3-shim-usage":68,"./request-accounts":69,"./send-metadata":70,"./switch-ethereum-chain":71,"./watch-asset":72},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=d(e("./add-ethereum-chain")),s=d(e("./eth-accounts")),i=d(e("./get-provider-state")),o=d(e("./log-web3-shim-usage")),a=d(e("./request-accounts")),c=d(e("./send-metadata")),u=d(e("./switch-ethereum-chain")),h=d(e("./watch-asset"));function d(e){return e&&e.__esModule?e:{default:e}}var l=[n.default,s.default,i.default,o.default,a.default,c.default,u.default,h.default];r.default=l}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/index.js"}],[68,{"../../../../../shared/constants/app":3409,"../../../../../shared/constants/metametrics":3416},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("../../../../../shared/constants/app"),s=e("../../../../../shared/constants/metametrics");var i={methodNames:[n.MESSAGE_TYPE.LOG_WEB3_SHIM_USAGE],implementation:function(e,t,r,n,{sendMetrics:i,getWeb3ShimUsageState:o,setWeb3ShimUsageRecorded:a}){const{origin:c}=e;o(c)===undefined&&(a(c),i({event:"Website Accessed window.web3 Shim",category:s.MetaMetricsEventCategory.InpageProvider,referrer:{url:c}},{excludeMetaMetricsId:!0}));return t.result=!0,n()},hookNames:{sendMetrics:!0,getWeb3ShimUsageState:!0,setWeb3ShimUsageRecorded:!0}};r.default=i}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/log-web3-shim-usage.js"}],[69,{"../../../../../shared/constants/app":3409,"eth-rpc-errors":2286},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors"),s=e("../../../../../shared/constants/app");var i={methodNames:[s.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS],implementation:async function(e,t,r,i,{origin:a,getAccounts:c,getUnlockPromise:u,hasPermission:h,requestAccountsPermission:d}){if(o.has(a))return t.error=n.ethErrors.rpc.resourceUnavailable(`Already processing ${s.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS}. Please wait.`),i();if(h(s.MESSAGE_TYPE.ETH_ACCOUNTS)){try{o.add(a),await u(!0),t.result=await c(),i()}catch(e){i(e)}finally{o.delete(a)}return undefined}try{await d()}catch(e){return t.error=e,i()}const l=await c();l.length>0?t.result=l:t.error=n.ethErrors.rpc.internal("Accounts unexpectedly unavailable. Please report this bug.");return i()},hookNames:{origin:!0,getAccounts:!0,getUnlockPromise:!0,hasPermission:!0,requestAccountsPermission:!0}};r.default=i;const o=new Set}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/request-accounts.js"}],[7,{"../../../shared/constants/alarms":3407,"../../../shared/constants/app":3409,"../../../shared/constants/time":3424,"../../../shared/modules/mv3.utils":3445,"../../../ui/helpers/utils/build-types":4117,"../metamask-controller":82,"@metamask/obs-store":1301,events:2066,loglevel:2966,uuid:3359},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=p(e("events")),s=e("@metamask/obs-store"),i=e("uuid"),o=p(e("loglevel")),a=e("../metamask-controller"),c=e("../../../shared/constants/time"),u=e("../../../shared/constants/alarms"),h=e("../../../shared/modules/mv3.utils"),d=e("../../../ui/helpers/utils/build-types"),l=e("../../../shared/constants/app");function p(e){return e&&e.__esModule?e:{default:e}}class f extends n.default{constructor(e={}){const{addUnlockListener:t,isUnlocked:r,initState:n,onInactiveTimeout:i,preferencesStore:o,qrHardwareStore:a,messenger:c}=e;super(),this.onInactiveTimeout=i||(()=>undefined),this.store=new s.ObservableStore({timeoutMinutes:0,connectedStatusPopoverHasBeenShown:!0,defaultHomeActiveTabName:null,browserEnvironment:{},popupGasPollTokens:[],notificationGasPollTokens:[],fullScreenGasPollTokens:[],recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:(new Date).getTime(),outdatedBrowserWarningLastShown:(new Date).getTime(),nftsDetectionNoticeDismissed:!1,showTestnetMessageInDropdown:!0,showBetaHeader:(0,d.isBeta)(),showProductTour:!0,trezorModel:null,currentPopupId:undefined,...n,qrHardware:{},nftsDropdownState:{},usedNetworks:{"0x1":!0,"0x5":!0,"0x539":!0},serviceWorkerLastActiveTime:0}),this.timer=null,this.isUnlocked=r,this.waitingForUnlock=[],t(this.handleUnlock.bind(this)),o.subscribe((({preferences:e})=>{this.store.getState().timeoutMinutes!==e.autoLockTimeLimit&&this._setInactiveTimeout(e.autoLockTimeLimit)})),a.subscribe((e=>{this.store.updateState({qrHardware:e})}));const{preferences:u}=o.getState();this._setInactiveTimeout(u.autoLockTimeLimit),this.messagingSystem=c,this._approvalRequestId=null}getUnlockPromise(e){return new Promise((t=>{this.isUnlocked()?t():this.waitForUnlock(t,e)}))}waitForUnlock(e,t){this.waitingForUnlock.push({resolve:e}),this.emit(a.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE),t&&this._requestApproval()}handleUnlock(){if(this.waitingForUnlock.length>0){for(;this.waitingForUnlock.length>0;)this.waitingForUnlock.shift().resolve();this.emit(a.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}this._acceptApproval()}setDefaultHomeActiveTabName(e){this.store.updateState({defaultHomeActiveTabName:e})}setConnectedStatusPopoverHasBeenShown(){this.store.updateState({connectedStatusPopoverHasBeenShown:!0})}setRecoveryPhraseReminderHasBeenShown(){this.store.updateState({recoveryPhraseReminderHasBeenShown:!0})}setRecoveryPhraseReminderLastShown(e){this.store.updateState({recoveryPhraseReminderLastShown:e})}setTermsOfUseLastAgreed(e){this.store.updateState({termsOfUseLastAgreed:e})}setOutdatedBrowserWarningLastShown(e){this.store.updateState({outdatedBrowserWarningLastShown:e})}setLastActiveTime(){this._resetTimer()}_setInactiveTimeout(e){this.store.updateState({timeoutMinutes:e}),this._resetTimer()}_resetTimer(){const{timeoutMinutes:e}=this.store.getState();this.timer?clearTimeout(this.timer):h.isManifestV3&&chrome.alarms.clear(u.AUTO_LOCK_TIMEOUT_ALARM),e&&(h.isManifestV3?(chrome.alarms.create(u.AUTO_LOCK_TIMEOUT_ALARM,{delayInMinutes:e,periodInMinutes:e}),chrome.alarms.onAlarm.addListener((e=>{e.name===u.AUTO_LOCK_TIMEOUT_ALARM&&(this.onInactiveTimeout(),chrome.alarms.clear(u.AUTO_LOCK_TIMEOUT_ALARM))}))):this.timer=setTimeout((()=>this.onInactiveTimeout()),e*c.MINUTE))}setBrowserEnvironment(e,t){this.store.updateState({browserEnvironment:{os:e,browser:t}})}addPollingToken(e,t){if(t!==l.POLLING_TOKEN_ENVIRONMENT_TYPES[l.ENVIRONMENT_TYPE_BACKGROUND]){const r=this.store.getState()[t];this.store.updateState({[t]:[...r,e]})}}removePollingToken(e,t){if(t!==l.POLLING_TOKEN_ENVIRONMENT_TYPES[l.ENVIRONMENT_TYPE_BACKGROUND]){const r=this.store.getState()[t];this.store.updateState({[t]:r.filter((t=>t!==e))})}}clearPollingTokens(){this.store.updateState({popupGasPollTokens:[],notificationGasPollTokens:[],fullScreenGasPollTokens:[]})}setShowTestnetMessageInDropdown(e){this.store.updateState({showTestnetMessageInDropdown:e})}setShowBetaHeader(e){this.store.updateState({showBetaHeader:e})}setShowProductTour(e){this.store.updateState({showProductTour:e})}setTrezorModel(e){this.store.updateState({trezorModel:e})}updateNftDropDownState(e){this.store.updateState({nftsDropdownState:e})}setFirstTimeUsedNetwork(e){const t=this.store.getState(),{usedNetworks:r}=t;r[e]=!0,this.store.updateState({usedNetworks:r})}setCurrentPopupId(e){this.store.updateState({currentPopupId:e})}getCurrentPopupId(){return this.store.getState().currentPopupId}setServiceWorkerLastActiveTime(e){this.store.updateState({serviceWorkerLastActiveTime:e})}_requestApproval(){this._approvalRequestId=(0,i.v4)(),this.messagingSystem.call("ApprovalController:addRequest",{id:this._approvalRequestId,origin:l.ORIGIN_METAMASK,type:"unlock"},!0).catch((()=>{}))}_acceptApproval(){if(this._approvalRequestId){try{this.messagingSystem.call("ApprovalController:acceptRequest",this._approvalRequestId)}catch(e){o.default.error("Failed to accept transaction approval request",e)}this._approvalRequestId=null}else o.default.error("Attempted to accept missing unlock approval request")}}r.default=f}}},{package:"$root$",file:"app/scripts/controllers/app-state.js"}],[70,{"../../../../../shared/constants/app":3409,"eth-rpc-errors":2286},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors");var s={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.SEND_METADATA],implementation:function(e,t,r,s,{addSubjectMetadata:i,subjectType:o}){const{origin:a,params:c}=e;if(!c||"object"!=typeof c||Array.isArray(c))return s(n.ethErrors.rpc.invalidParams({data:c}));{const{icon:e=null,name:t=null,...r}=c;i({...r,iconUrl:e,name:t,subjectType:o,origin:a})}return t.result=!0,s()},hookNames:{addSubjectMetadata:!0,subjectType:!0}};r.default=s}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/send-metadata.js"}],[71,{"../../../../../shared/constants/app":3409,"../../../../../shared/constants/network":3417,"../../../../../shared/modules/network.utils":3446,"eth-rpc-errors":2286,lodash:2954},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors"),s=e("lodash"),i=e("../../../../../shared/constants/app"),o=e("../../../../../shared/constants/network"),a=e("../../../../../shared/modules/network.utils");var c={methodNames:[i.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN],implementation:async function(e,t,r,c,{getCurrentChainId:u,findNetworkConfigurationBy:h,setProviderType:d,setActiveNetwork:l,requestUserApproval:p}){var f;if(null===(f=e.params)||void 0===f||!f[0]||"object"!=typeof e.params[0])return c(n.ethErrors.rpc.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e.params)}`}));const{origin:g}=e,{chainId:y}=e.params[0],m=Object.keys((0,s.omit)(e.params[0],["chainId"]));if(m.length>0)return c(n.ethErrors.rpc.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${m}`}));const b="string"==typeof y&&y.toLowerCase();if(!(0,a.isPrefixedFormattedHexString)(b))return c(n.ethErrors.rpc.invalidParams({message:`Expected 0x-prefixed, unpadded, non-zero hexadecimal string 'chainId'. Received:\n${y}`}));if(!(0,a.isSafeChainId)(parseInt(b,16)))return c(n.ethErrors.rpc.invalidParams({message:`Invalid chain ID "${b}": numerical value greater than max safe value. Received:\n${y}`}));const T=function(e,t){if(Object.values(o.BUILT_IN_INFURA_NETWORKS).map((({chainId:e})=>e)).includes(e))return{chainId:e,ticker:o.CURRENCY_SYMBOLS.ETH,nickname:o.NETWORK_TO_NAME_MAP[e],rpcUrl:o.CHAIN_ID_TO_RPC_URL_MAP[e],type:o.CHAIN_ID_TO_TYPE_MAP[e]};return t({chainId:e})}(b,h);if(T){if(u()===b)return t.result=null,c();try{const e=await p({origin:g,type:i.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN,requestData:T});Object.values(o.BUILT_IN_INFURA_NETWORKS).map((({chainId:e})=>e)).includes(y)?await d(e.type):await l(e.id),t.result=null}catch(e){return c(e)}return c()}return c(n.ethErrors.provider.custom({code:4902,message:`Unrecognized chain ID "${y}". Try adding the chain using ${i.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN} first.`}))},hookNames:{getCurrentChainId:!0,findNetworkConfigurationBy:!0,setProviderType:!0,setActiveNetwork:!0,requestUserApproval:!0}};r.default=c}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/switch-ethereum-chain.js"}],[72,{"../../../../../shared/constants/app":3409,"eth-rpc-errors":2286},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors"),s=e("../../../../../shared/constants/app");var i={methodNames:[s.MESSAGE_TYPE.WATCH_ASSET,s.MESSAGE_TYPE.WATCH_ASSET_LEGACY],implementation:async function(e,t,r,s,{handleWatchAssetRequest:i}){try{const{options:r,type:n}=e.params,o=await i(r,n);return await o.result,t.result=!0,s()}catch(e){return"User rejected to watch the asset."===e.message?s(n.ethErrors.provider.userRejectedRequest()):s(e)}},hookNames:{handleWatchAssetRequest:!0}};r.default=i}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/watch-asset.js"}],[73,{"./createMethodMiddleware":63},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./createMethodMiddleware");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}))}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/index.js"}],[74,{"../../../shared/constants/app":3409,"../../../shared/modules/fetch-with-timeout":3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.securityProviderCheck=async function(e,t,r,n){let s;const a=e.msgParams||e.messageParams;if(t===i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA)s={host_name:null==a?void 0:a.origin,rpc_method_name:t,chain_id:r,data:null==a?void 0:a.data,currentLocale:n};else if(t===i.MESSAGE_TYPE.ETH_SIGN||t===i.MESSAGE_TYPE.PERSONAL_SIGN)s={host_name:null==a?void 0:a.origin,rpc_method_name:t,chain_id:r,data:{signer_address:null==a?void 0:a.from,msg_to_sign:null==a?void 0:a.data},currentLocale:n};else{var c,u,h,d,l,p;s={host_name:e.origin,rpc_method_name:t,chain_id:r,data:{from_address:null===(c=e.txParams)||void 0===c?void 0:c.from,to_address:null===(u=e.txParams)||void 0===u?void 0:u.to,gas:null===(h=e.txParams)||void 0===h?void 0:h.gas,gasPrice:null===(d=e.txParams)||void 0===d?void 0:d.gasPrice,value:null===(l=e.txParams)||void 0===l?void 0:l.value,data:null===(p=e.txParams)||void 0===p?void 0:p.data},currentLocale:n}}const f=await o("https://proxy.metafi.codefi.network/opensea/security/v1/validate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)});return await f.json()};var n,s=(n=e("../../../shared/modules/fetch-with-timeout"))&&n.__esModule?n:{default:n},i=e("../../../shared/constants/app");const o=(0,s.default)()}}},{package:"$root$",file:"app/scripts/lib/security-provider-helpers.ts"}],[75,{"../../../shared/constants/keyring":3414,"@metamask/eth-keyring-controller":1178,loglevel:2966},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=e("@metamask/eth-keyring-controller"),i=(n=e("loglevel"))&&n.__esModule?n:{default:n},o=e("../../../shared/constants/keyring");var a={async verifyAccounts(e,t){if(!e||e.length<1)throw new Error("No created accounts defined.");const r=new s.KeyringController({}).getKeyringBuilderForType(o.KeyringType.hdKeyTree)(),n={mnemonic:t,numberOfAccounts:e.length};await r.deserialize(n);const a=await r.getAccounts();if(i.default.debug(`Created accounts: ${JSON.stringify(e)}`),i.default.debug(`Restored accounts: ${JSON.stringify(a)}`),a.length!==e.length)throw new Error("Wrong number of accounts");for(let t=0;t<a.length;t++)if(a[t].toLowerCase()!==e[t].toLowerCase())throw new Error(`Not identical accounts! Original: ${e[t]}, Restored: ${a[t]}`)}};r.default=a}}},{package:"$root$",file:"app/scripts/lib/seed-phrase-verifier.js"}],[76,{"../util":81,"@segment/loosely-validate-event":1417,buffer:2065,"is-retry-allowed":2728,lodash:2954,"remove-trailing-slash":3253,timers:3338},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t,n){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=u(e("remove-trailing-slash")),i=u(e("@segment/loosely-validate-event")),o=e("lodash"),a=u(e("is-retry-allowed")),c=e("../util");function u(e){return e&&e.__esModule?e:{default:e}}const h=()=>({});r.default=class{constructor(e,t={}){this.writeKey=e,this.host=(0,s.default)(t.host||"https://api.segment.io"),this.flushInterval=t.flushInterval||1e4,this.flushAt=t.flushAt||Math.max(t.flushAt,1)||20,this.queue=[],this.path="/v1/batch",this.maxQueueSize=460800,this.flushed=!1,this.retryCount=3,Object.defineProperty(this,"enable",{configurable:!1,writable:!1,enumerable:!0,value:!0})}_validate(e,t){(0,i.default)(e,t)}_message(e,t,r){return this._validate(t,e),this.enqueue(e,t,r),this}identify(e,t){return this._message("identify",e,t)}track(e,t){return this._message("track",e,t)}page(e,t){return this._message("page",e,t)}enqueue(e,t,r=h){if(!this.enable)return void n(r);const s={...t,type:e};if(s.context={...s.context,library:{name:"analytics-node"}},s.timestamp||(s.timestamp=new Date),s.messageId||(s.messageId=(0,c.generateRandomId)()),s.anonymousId&&!(0,o.isString)(s.anonymousId)&&(s.anonymousId=JSON.stringify(s.anonymousId)),s.userId&&!(0,o.isString)(s.userId)&&(s.userId=JSON.stringify(s.userId)),this.queue.push({message:s,callback:r}),!this.flushed)return this.flushed=!0,void this.flush();const i=this.queue.length>=this.flushAt,a=this.queue.reduce(((e,t)=>e+JSON.stringify(t).length),0)>=this.maxQueueSize;(i||a)&&this.flush(),this.flushInterval&&!this.timer&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))}flush(e=h){if(!this.enable)return n(e),Promise.resolve();if(this.timer&&(clearTimeout(this.timer),this.timer=null),!this.queue.length)return n(e),Promise.resolve();const r=this.queue.splice(0,this.flushAt),s=r.map((e=>e.callback)),i={batch:r.map((e=>e.message)),timestamp:new Date,sentAt:new Date},o={Authorization:`Basic ${t.from(this.writeKey,"utf8").toString("base64")}`};return this._sendRequest(`${this.host}${this.path}`,{method:"POST",body:JSON.stringify(i),headers:o},(t=>{n((()=>{s.forEach((e=>e(t,i))),e(t,i)}))}),0)}_retryRequest(e,t,r,n){const s=100*Math.pow(2,n);setTimeout((()=>{this._sendRequest(e,t,r,n+1)}),s)}async _sendRequest(e,t,r,n){return fetch(e,t).then((async s=>{if(s.ok)r();else if(this._isErrorRetryable({response:s})&&n<=this.retryCount)this._retryRequest(e,t,r,n);else{const e=new Error(s.statusText);r(e)}})).catch((s=>{this._isErrorRetryable(s)&&n<=this.retryCount?this._retryRequest(e,t,r,n):r(s)}))}_isErrorRetryable(e){return!!function(e){return!e.response&&Boolean(e.code)&&"ECONNABORTED"!==e.code&&(0,a.default)(e)}(e)||!!e.response&&(e.response.status>=500&&e.response.status<=599||429===e.response.status)}}}).call(this)}).call(this,e("buffer").Buffer,e("timers").setImmediate)}}},{package:"$root$",file:"app/scripts/lib/segment/analytics.js"}],[77,{"../../../../shared/constants/time":3424,"./analytics":76},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.segment=r.createSegmentMock=void 0;var n,s=e("../../../../shared/constants/time"),i=(n=e("./analytics"))&&n.__esModule?n:{default:n};const o="XdGJ17zKf3NjBPCDQ2UDjJjkx6FYBMGP",a=undefined,c=5*s.SECOND,u=(e=a)=>{const t={queue:[],flush(){t.queue.forEach((([e,t])=>{t()})),t.queue=[]},track(r,n=(()=>undefined)){t.queue.push([r,n]),t.queue.length>=e&&t.flush()},page(){},identify(){}};return t};r.createSegmentMock=u;const h=o?new i.default(o,{host:null,flushAt:a,flushInterval:c}):u(a);r.segment=h}}},{package:"$root$",file:"app/scripts/lib/segment/index.js"}],[8,{"../../../shared/modules/string-utils":3451},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("../../../shared/modules/string-utils");r.default=class{constructor(e={}){const{preferencesController:t,addressBookController:r,networkController:n,trackMetaMetricsEvent:s}=e;this.preferencesController=t,this.addressBookController=r,this.networkController=n,this._trackMetaMetricsEvent=s}async restoreUserData(e){const t=this.preferencesController.store.getState(),{preferences:r,addressBook:n,network:s}=JSON.parse(e);r&&(r.identities=t.identities,r.lostIdentities=t.lostIdentities,r.selectedAddress=t.selectedAddress,this.preferencesController.store.updateState(r)),n&&this.addressBookController.update(n,!0),s&&this.networkController.store.updateState(s),(r||n||s)&&this._trackMetaMetricsEvent({event:"User Data Imported",category:"Backup"})}async backupUserData(){const e={preferences:{...this.preferencesController.store.getState()},addressBook:{...this.addressBookController.state},network:{networkConfigurations:this.networkController.store.getState().networkConfigurations}};delete e.preferences.identities,delete e.preferences.lostIdentities,delete e.preferences.selectedAddress;const t=JSON.stringify(e),r=new Date,s=e=>(0,n.prependZero)(e,2);return{fileName:`MetaMaskUserData.${r.getFullYear()}_${s(r.getMonth()+1)}_${s(r.getDay())}_${s(r.getHours())}_${s(r.getMinutes())}_${s(r.getDay())}.json`,data:t}}}}}},{package:"$root$",file:"app/scripts/controllers/backup.js"}]],[],{});